{"version":3,"file":"js/common-aacc2dbb.e42771a2.js","mappings":"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","sources":["webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://my-new-project/./node_modules/canvg/lib/index.es.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://my-new-project/./node_modules/@babel/runtime/helpers/esm/typeof.js"],"sourcesContent":["function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import 'core-js/modules/es.promise.js';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport 'core-js/modules/es.string.match.js';\nimport 'core-js/modules/es.string.replace.js';\nimport 'core-js/modules/es.string.starts-with.js';\nimport 'core-js/modules/es.array.iterator.js';\nimport 'core-js/modules/web.dom-collections.iterator.js';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport 'core-js/modules/es.array.reduce.js';\nimport 'core-js/modules/es.string.ends-with.js';\nimport 'core-js/modules/es.string.split.js';\nimport requestAnimationFrame from 'raf';\nimport 'core-js/modules/es.string.trim.js';\nimport RGBColor from 'rgbcolor';\nimport 'core-js/modules/es.array.index-of.js';\nimport 'core-js/modules/es.string.includes.js';\nimport 'core-js/modules/es.array.reverse.js';\nimport { SVGPathData } from 'svg-pathdata';\nimport 'core-js/modules/es.regexp.to-string.js';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\r\n * Options preset for `OffscreenCanvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @returns Preset object.\r\n */\nfunction offscreen() {\n  var {\n    DOMParser: DOMParserFallback\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var preset = {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParserFallback,\n\n    createCanvas(width, height) {\n      return new OffscreenCanvas(width, height);\n    },\n\n    createImage(url) {\n      return _asyncToGenerator(function* () {\n        var response = yield fetch(url);\n        var blob = yield response.blob();\n        var img = yield createImageBitmap(blob);\n        return img;\n      })();\n    }\n\n  };\n\n  if (typeof DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n    Reflect.deleteProperty(preset, 'DOMParser');\n  }\n\n  return preset;\n}\n\n/**\r\n * Options preset for `node-canvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @param config.canvas - `node-canvas` exports.\r\n * @param config.fetch - WHATWG-compatible `fetch` function.\r\n * @returns Preset object.\r\n */\nfunction node(_ref) {\n  var {\n    DOMParser,\n    canvas,\n    fetch\n  } = _ref;\n  return {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser,\n    fetch,\n    createCanvas: canvas.createCanvas,\n    createImage: canvas.loadImage\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\toffscreen: offscreen,\n\tnode: node\n});\n\n/**\r\n * HTML-safe compress white-spaces.\r\n * @param str - String to compress.\r\n * @returns String.\r\n */\nfunction compressSpaces(str) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\r\n * HTML-safe left trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimLeft(str) {\n  return str.replace(/^[\\n \\t]+/, '');\n}\n/**\r\n * HTML-safe right trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimRight(str) {\n  return str.replace(/[\\n \\t]+$/, '');\n}\n/**\r\n * String to numbers array.\r\n * @param str - Numbers string.\r\n * @returns Numbers array.\r\n */\n\nfunction toNumbers(str) {\n  var matches = (str || '').match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm) || [];\n  return matches.map(parseFloat);\n} // Microsoft Edge fix\n\nvar allUppercase = /^[A-Z-]+$/;\n/**\r\n * Normalize attribute name.\r\n * @param name - Attribute name.\r\n * @returns Normalized attribute name.\r\n */\n\nfunction normalizeAttributeName(name) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase();\n  }\n\n  return name;\n}\n/**\r\n * Parse external URL.\r\n * @param url - CSS url string.\r\n * @returns Parsed URL.\r\n */\n\nfunction parseExternalUrl(url) {\n  //                      single quotes [2]\n  //                      v         double quotes [3]\n  //                      v         v         no quotes [4]\n  //                      v         v         v\n  var urlMatch = /url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(url) || [];\n  return urlMatch[2] || urlMatch[3] || urlMatch[4];\n}\n/**\r\n * Transform floats to integers in rgb colors.\r\n * @param color - Color to normalize.\r\n * @returns Normalized color.\r\n */\n\nfunction normalizeColor(color) {\n  if (!color.startsWith('rgb')) {\n    return color;\n  }\n\n  var rgbParts = 3;\n  var normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, (num, isFloat) => rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num);\n  return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nvar attributeRegex = /(\\[[^\\]]+\\])/g;\nvar idRegex = /(#[^\\s+>~.[:]+)/g;\nvar classRegex = /(\\.[^\\s+>~.[:]+)/g;\nvar pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi;\nvar pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi;\nvar pseudoClassRegex = /(:[^\\s+>~.[:]+)/g;\nvar elementRegex = /([^\\s+>~.[:]+)/g;\n\nfunction findSelectorMatch(selector, regex) {\n  var matches = regex.exec(selector);\n\n  if (!matches) {\n    return [selector, 0];\n  }\n\n  return [selector.replace(regex, ' '), matches.length];\n}\n/**\r\n * Measure selector specificity.\r\n * @param selector - Selector to measure.\r\n * @returns Specificity.\r\n */\n\n\nfunction getSelectorSpecificity(selector) {\n  var specificity = [0, 0, 0];\n  var currentSelector = selector.replace(/:not\\(([^)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n  var delta = 0;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex);\n  specificity[0] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex);\n  specificity[2] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex);\n  specificity[1] += delta;\n  currentSelector = currentSelector.replace(/[*\\s+>~]/g, ' ').replace(/[#.]/g, ' ');\n  [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex); // lgtm [js/useless-assignment-to-local]\n\n  specificity[2] += delta;\n  return specificity.join('');\n}\n\nvar PSEUDO_ZERO = .00000001;\n/**\r\n * Vector magnitude.\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorMagnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\r\n * Ratio between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsRatio(u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\r\n * Angle between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n  return t * t * t;\n}\nfunction CB2(t) {\n  return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n  return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n  return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n  return t * t;\n}\nfunction QB2(t) {\n  return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n  return (1 - t) * (1 - t);\n}\n\nclass Property {\n  constructor(document, name, value) {\n    this.document = document;\n    this.name = name;\n    this.value = value;\n    this.isNormalizedColor = false;\n  }\n\n  static empty(document) {\n    return new Property(document, 'EMPTY', '');\n  }\n\n  split() {\n    var separator = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ' ';\n    var {\n      document,\n      name\n    } = this;\n    return compressSpaces(this.getString()).trim().split(separator).map(value => new Property(document, name, value));\n  }\n\n  hasValue(zeroIsValue) {\n    var {\n      value\n    } = this;\n    return value !== null && value !== '' && (zeroIsValue || value !== 0) && typeof value !== 'undefined';\n  }\n\n  isString(regexp) {\n    var {\n      value\n    } = this;\n    var result = typeof value === 'string';\n\n    if (!result || !regexp) {\n      return result;\n    }\n\n    return regexp.test(value);\n  }\n\n  isUrlDefinition() {\n    return this.isString(/^url\\(/);\n  }\n\n  isPixels() {\n    if (!this.hasValue()) {\n      return false;\n    }\n\n    var asString = this.getString();\n\n    switch (true) {\n      case asString.endsWith('px'):\n      case /^[0-9]+$/.test(asString):\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n\n  getValue(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return this.value;\n    }\n\n    return def;\n  }\n\n  getNumber(def) {\n    if (!this.hasValue()) {\n      if (typeof def === 'undefined') {\n        return 0;\n      }\n\n      return parseFloat(def);\n    }\n\n    var {\n      value\n    } = this;\n    var n = parseFloat(value);\n\n    if (this.isString(/%$/)) {\n      n /= 100.0;\n    }\n\n    return n;\n  }\n\n  getString(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return typeof this.value === 'undefined' ? '' : String(this.value);\n    }\n\n    return String(def);\n  }\n\n  getColor(def) {\n    var color = this.getString(def);\n\n    if (this.isNormalizedColor) {\n      return color;\n    }\n\n    this.isNormalizedColor = true;\n    color = normalizeColor(color);\n    this.value = color;\n    return color;\n  }\n\n  getDpi() {\n    return 96.0; // TODO: compute?\n  }\n\n  getRem() {\n    return this.document.rootEmSize;\n  }\n\n  getEm() {\n    return this.document.emSize;\n  }\n\n  getUnits() {\n    return this.getString().replace(/[0-9.-]/g, '');\n  }\n\n  getPixels(axisOrIsFontSize) {\n    var processPercent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    var [axis, isFontSize] = typeof axisOrIsFontSize === 'boolean' ? [undefined, axisOrIsFontSize] : [axisOrIsFontSize];\n    var {\n      viewPort\n    } = this.document.screen;\n\n    switch (true) {\n      case this.isString(/vmin$/):\n        return this.getNumber() / 100.0 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n      case this.isString(/vmax$/):\n        return this.getNumber() / 100.0 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n      case this.isString(/vw$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('x');\n\n      case this.isString(/vh$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('y');\n\n      case this.isString(/rem$/):\n        return this.getNumber() * this.getRem();\n\n      case this.isString(/em$/):\n        return this.getNumber() * this.getEm();\n\n      case this.isString(/ex$/):\n        return this.getNumber() * this.getEm() / 2.0;\n\n      case this.isString(/px$/):\n        return this.getNumber();\n\n      case this.isString(/pt$/):\n        return this.getNumber() * this.getDpi() * (1.0 / 72.0);\n\n      case this.isString(/pc$/):\n        return this.getNumber() * 15;\n\n      case this.isString(/cm$/):\n        return this.getNumber() * this.getDpi() / 2.54;\n\n      case this.isString(/mm$/):\n        return this.getNumber() * this.getDpi() / 25.4;\n\n      case this.isString(/in$/):\n        return this.getNumber() * this.getDpi();\n\n      case this.isString(/%$/) && isFontSize:\n        return this.getNumber() * this.getEm();\n\n      case this.isString(/%$/):\n        return this.getNumber() * viewPort.computeSize(axis);\n\n      default:\n        {\n          var n = this.getNumber();\n\n          if (processPercent && n < 1.0) {\n            return n * viewPort.computeSize(axis);\n          }\n\n          return n;\n        }\n    }\n  }\n\n  getMilliseconds() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    if (this.isString(/ms$/)) {\n      return this.getNumber();\n    }\n\n    return this.getNumber() * 1000;\n  }\n\n  getRadians() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    switch (true) {\n      case this.isString(/deg$/):\n        return this.getNumber() * (Math.PI / 180.0);\n\n      case this.isString(/grad$/):\n        return this.getNumber() * (Math.PI / 200.0);\n\n      case this.isString(/rad$/):\n        return this.getNumber();\n\n      default:\n        return this.getNumber() * (Math.PI / 180.0);\n    }\n  }\n\n  getDefinition() {\n    var asString = this.getString();\n    var name = /#([^)'\"]+)/.exec(asString);\n\n    if (name) {\n      name = name[1];\n    }\n\n    if (!name) {\n      name = asString;\n    }\n\n    return this.document.definitions[name];\n  }\n\n  getFillStyleDefinition(element, opacity) {\n    var def = this.getDefinition();\n\n    if (!def) {\n      return null;\n    } // gradient\n\n\n    if (typeof def.createGradient === 'function') {\n      return def.createGradient(this.document.ctx, element, opacity);\n    } // pattern\n\n\n    if (typeof def.createPattern === 'function') {\n      if (def.getHrefAttribute().hasValue()) {\n        var patternTransform = def.getAttribute('patternTransform');\n        def = def.getHrefAttribute().getDefinition();\n\n        if (patternTransform.hasValue()) {\n          def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n        }\n      }\n\n      return def.createPattern(this.document.ctx, element, opacity);\n    }\n\n    return null;\n  }\n\n  getTextBaseline() {\n    if (!this.hasValue()) {\n      return null;\n    }\n\n    return Property.textBaselineMapping[this.getString()];\n  }\n\n  addOpacity(opacity) {\n    var value = this.getColor();\n    var len = value.length;\n    var commas = 0; // Simulate old RGBColor version, which can't parse rgba.\n\n    for (var i = 0; i < len; i++) {\n      if (value[i] === ',') {\n        commas++;\n      }\n\n      if (commas === 3) {\n        break;\n      }\n    }\n\n    if (opacity.hasValue() && this.isString() && commas !== 3) {\n      var color = new RGBColor(value);\n\n      if (color.ok) {\n        color.alpha = opacity.getNumber();\n        value = color.toRGBA();\n      }\n    }\n\n    return new Property(this.document, this.name, value);\n  }\n\n}\nProperty.textBaselineMapping = {\n  'baseline': 'alphabetic',\n  'before-edge': 'top',\n  'text-before-edge': 'top',\n  'middle': 'middle',\n  'central': 'middle',\n  'after-edge': 'bottom',\n  'text-after-edge': 'bottom',\n  'ideographic': 'ideographic',\n  'alphabetic': 'alphabetic',\n  'hanging': 'hanging',\n  'mathematical': 'alphabetic'\n};\n\nclass ViewPort {\n  constructor() {\n    this.viewPorts = [];\n  }\n\n  clear() {\n    this.viewPorts = [];\n  }\n\n  setCurrent(width, height) {\n    this.viewPorts.push({\n      width,\n      height\n    });\n  }\n\n  removeCurrent() {\n    this.viewPorts.pop();\n  }\n\n  getCurrent() {\n    var {\n      viewPorts\n    } = this;\n    return viewPorts[viewPorts.length - 1];\n  }\n\n  get width() {\n    return this.getCurrent().width;\n  }\n\n  get height() {\n    return this.getCurrent().height;\n  }\n\n  computeSize(d) {\n    if (typeof d === 'number') {\n      return d;\n    }\n\n    if (d === 'x') {\n      return this.width;\n    }\n\n    if (d === 'y') {\n      return this.height;\n    }\n\n    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n  }\n\n}\n\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static parse(point) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var [x = defaultValue, y = defaultValue] = toNumbers(point);\n    return new Point(x, y);\n  }\n\n  static parseScale(scale) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var [x = defaultValue, y = x] = toNumbers(scale);\n    return new Point(x, y);\n  }\n\n  static parsePath(path) {\n    var points = toNumbers(path);\n    var len = points.length;\n    var pathPoints = [];\n\n    for (var i = 0; i < len; i += 2) {\n      pathPoints.push(new Point(points[i], points[i + 1]));\n    }\n\n    return pathPoints;\n  }\n\n  angleTo(point) {\n    return Math.atan2(point.y - this.y, point.x - this.x);\n  }\n\n  applyTransform(transform) {\n    var {\n      x,\n      y\n    } = this;\n    var xp = x * transform[0] + y * transform[2] + transform[4];\n    var yp = x * transform[1] + y * transform[3] + transform[5];\n    this.x = xp;\n    this.y = yp;\n  }\n\n}\n\nclass Mouse {\n  constructor(screen) {\n    this.screen = screen;\n    this.working = false;\n    this.events = [];\n    this.eventElements = []; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onClick = this.onClick.bind(this); // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n\n  isWorking() {\n    return this.working;\n  }\n\n  start() {\n    if (this.working) {\n      return;\n    }\n\n    var {\n      screen,\n      onClick,\n      onMouseMove\n    } = this;\n    var canvas = screen.ctx.canvas;\n    canvas.onclick = onClick;\n    canvas.onmousemove = onMouseMove;\n    this.working = true;\n  }\n\n  stop() {\n    if (!this.working) {\n      return;\n    }\n\n    var canvas = this.screen.ctx.canvas;\n    this.working = false;\n    canvas.onclick = null;\n    canvas.onmousemove = null;\n  }\n\n  hasEvents() {\n    return this.working && this.events.length > 0;\n  }\n\n  runEvents() {\n    if (!this.working) {\n      return;\n    }\n\n    var {\n      screen: document,\n      events,\n      eventElements\n    } = this;\n    var {\n      style\n    } = document.ctx.canvas;\n\n    if (style) {\n      style.cursor = '';\n    }\n\n    events.forEach((_ref, i) => {\n      var {\n        run\n      } = _ref;\n      var element = eventElements[i];\n\n      while (element) {\n        run(element);\n        element = element.parent;\n      }\n    }); // done running, clear\n\n    this.events = [];\n    this.eventElements = [];\n  }\n\n  checkPath(element, ctx) {\n    if (!this.working || !ctx) {\n      return;\n    }\n\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref2, i) => {\n      var {\n        x,\n        y\n      } = _ref2;\n\n      if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n\n  checkBoundingBox(element, boundingBox) {\n    if (!this.working || !boundingBox) {\n      return;\n    }\n\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref3, i) => {\n      var {\n        x,\n        y\n      } = _ref3;\n\n      if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n\n  mapXY(x, y) {\n    var {\n      window,\n      ctx\n    } = this.screen;\n    var point = new Point(x, y);\n    var element = ctx.canvas;\n\n    while (element) {\n      point.x -= element.offsetLeft;\n      point.y -= element.offsetTop;\n      element = element.offsetParent;\n    }\n\n    if (window.scrollX) {\n      point.x += window.scrollX;\n    }\n\n    if (window.scrollY) {\n      point.y += window.scrollY;\n    }\n\n    return point;\n  }\n\n  onClick(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onclick',\n      x,\n      y,\n\n      run(eventTarget) {\n        if (eventTarget.onClick) {\n          eventTarget.onClick();\n        }\n      }\n\n    });\n  }\n\n  onMouseMove(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onmousemove',\n      x,\n      y,\n\n      run(eventTarget) {\n        if (eventTarget.onMouseMove) {\n          eventTarget.onMouseMove();\n        }\n      }\n\n    });\n  }\n\n}\n\nvar defaultWindow = typeof window !== 'undefined' ? window : null;\nvar defaultFetch$1 = typeof fetch !== 'undefined' ? fetch.bind(undefined) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n: null;\nclass Screen {\n  constructor(ctx) {\n    var {\n      fetch = defaultFetch$1,\n      window = defaultWindow\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.ctx = ctx;\n    this.FRAMERATE = 30;\n    this.MAX_VIRTUAL_PIXELS = 30000;\n    this.CLIENT_WIDTH = 800;\n    this.CLIENT_HEIGHT = 600;\n    this.viewPort = new ViewPort();\n    this.mouse = new Mouse(this);\n    this.animations = [];\n    this.waits = [];\n    this.frameDuration = 0;\n    this.isReadyLock = false;\n    this.isFirstRender = true;\n    this.intervalId = null;\n    this.window = window;\n    this.fetch = fetch;\n  }\n\n  wait(checker) {\n    this.waits.push(checker);\n  }\n\n  ready() {\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    if (!this.readyPromise) {\n      return Promise.resolve();\n    }\n\n    return this.readyPromise;\n  }\n\n  isReady() {\n    if (this.isReadyLock) {\n      return true;\n    }\n\n    var isReadyLock = this.waits.every(_ => _());\n\n    if (isReadyLock) {\n      this.waits = [];\n\n      if (this.resolveReady) {\n        this.resolveReady();\n      }\n    }\n\n    this.isReadyLock = isReadyLock;\n    return isReadyLock;\n  }\n\n  setDefaults(ctx) {\n    // initial values and defaults\n    ctx.strokeStyle = 'rgba(0,0,0,0)';\n    ctx.lineCap = 'butt';\n    ctx.lineJoin = 'miter';\n    ctx.miterLimit = 4;\n  }\n\n  setViewBox(_ref) {\n    var {\n      document,\n      ctx,\n      aspectRatio,\n      width,\n      desiredWidth,\n      height,\n      desiredHeight,\n      minX = 0,\n      minY = 0,\n      refX,\n      refY,\n      clip = false,\n      clipX = 0,\n      clipY = 0\n    } = _ref;\n    // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n    var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, ''); // ignore defer\n\n    var [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(' ');\n    var align = aspectRatioAlign || 'xMidYMid';\n    var meetOrSlice = aspectRatioMeetOrSlice || 'meet'; // calculate scale\n\n    var scaleX = width / desiredWidth;\n    var scaleY = height / desiredHeight;\n    var scaleMin = Math.min(scaleX, scaleY);\n    var scaleMax = Math.max(scaleX, scaleY);\n    var finalDesiredWidth = desiredWidth;\n    var finalDesiredHeight = desiredHeight;\n\n    if (meetOrSlice === 'meet') {\n      finalDesiredWidth *= scaleMin;\n      finalDesiredHeight *= scaleMin;\n    }\n\n    if (meetOrSlice === 'slice') {\n      finalDesiredWidth *= scaleMax;\n      finalDesiredHeight *= scaleMax;\n    }\n\n    var refXProp = new Property(document, 'refX', refX);\n    var refYProp = new Property(document, 'refY', refY);\n    var hasRefs = refXProp.hasValue() && refYProp.hasValue();\n\n    if (hasRefs) {\n      ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n    }\n\n    if (clip) {\n      var scaledClipX = scaleMin * clipX;\n      var scaledClipY = scaleMin * clipY;\n      ctx.beginPath();\n      ctx.moveTo(scaledClipX, scaledClipY);\n      ctx.lineTo(width, scaledClipY);\n      ctx.lineTo(width, height);\n      ctx.lineTo(scaledClipX, height);\n      ctx.closePath();\n      ctx.clip();\n    }\n\n    if (!hasRefs) {\n      var isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n      var isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n      var isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n      var isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n\n      if (align.startsWith('xMid') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0);\n      }\n\n      if (align.endsWith('YMid') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0);\n      }\n\n      if (align.startsWith('xMax') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width - finalDesiredWidth, 0);\n      }\n\n      if (align.endsWith('YMax') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height - finalDesiredHeight);\n      }\n    } // scale\n\n\n    switch (true) {\n      case align === 'none':\n        ctx.scale(scaleX, scaleY);\n        break;\n\n      case meetOrSlice === 'meet':\n        ctx.scale(scaleMin, scaleMin);\n        break;\n\n      case meetOrSlice === 'slice':\n        ctx.scale(scaleMax, scaleMax);\n        break;\n    } // translate\n\n\n    ctx.translate(-minX, -minY);\n  }\n\n  start(element) {\n    var {\n      enableRedraw = false,\n      ignoreMouse = false,\n      ignoreAnimation = false,\n      ignoreDimensions = false,\n      ignoreClear = false,\n      forceRedraw,\n      scaleWidth,\n      scaleHeight,\n      offsetX,\n      offsetY\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      FRAMERATE,\n      mouse\n    } = this;\n    var frameDuration = 1000 / FRAMERATE;\n    this.frameDuration = frameDuration;\n    this.readyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n\n    if (this.isReady()) {\n      this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n    }\n\n    if (!enableRedraw) {\n      return;\n    }\n\n    var now = Date.now();\n    var then = now;\n    var delta = 0;\n\n    var tick = () => {\n      now = Date.now();\n      delta = now - then;\n\n      if (delta >= frameDuration) {\n        then = now - delta % frameDuration;\n\n        if (this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n          this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n          mouse.runEvents();\n        }\n      }\n\n      this.intervalId = requestAnimationFrame(tick);\n    };\n\n    if (!ignoreMouse) {\n      mouse.start();\n    }\n\n    this.intervalId = requestAnimationFrame(tick);\n  }\n\n  stop() {\n    if (this.intervalId) {\n      requestAnimationFrame.cancel(this.intervalId);\n      this.intervalId = null;\n    }\n\n    this.mouse.stop();\n  }\n\n  shouldUpdate(ignoreAnimation, forceRedraw) {\n    // need update from animations?\n    if (!ignoreAnimation) {\n      var {\n        frameDuration\n      } = this;\n      var shouldUpdate = this.animations.reduce((shouldUpdate, animation) => animation.update(frameDuration) || shouldUpdate, false);\n\n      if (shouldUpdate) {\n        return true;\n      }\n    } // need update from redraw?\n\n\n    if (typeof forceRedraw === 'function' && forceRedraw()) {\n      return true;\n    }\n\n    if (!this.isReadyLock && this.isReady()) {\n      return true;\n    } // need update from mouse events?\n\n\n    if (this.mouse.hasEvents()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n    var {\n      CLIENT_WIDTH,\n      CLIENT_HEIGHT,\n      viewPort,\n      ctx,\n      isFirstRender\n    } = this;\n    var canvas = ctx.canvas;\n    viewPort.clear();\n\n    if (canvas.width && canvas.height) {\n      viewPort.setCurrent(canvas.width, canvas.height);\n    } else {\n      viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);\n    }\n\n    var widthStyle = element.getStyle('width');\n    var heightStyle = element.getStyle('height');\n\n    if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n      // set canvas size\n      if (widthStyle.hasValue()) {\n        canvas.width = widthStyle.getPixels('x');\n\n        if (canvas.style) {\n          canvas.style.width = \"\".concat(canvas.width, \"px\");\n        }\n      }\n\n      if (heightStyle.hasValue()) {\n        canvas.height = heightStyle.getPixels('y');\n\n        if (canvas.style) {\n          canvas.style.height = \"\".concat(canvas.height, \"px\");\n        }\n      }\n    }\n\n    var cWidth = canvas.clientWidth || canvas.width;\n    var cHeight = canvas.clientHeight || canvas.height;\n\n    if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n      cWidth = widthStyle.getPixels('x');\n      cHeight = heightStyle.getPixels('y');\n    }\n\n    viewPort.setCurrent(cWidth, cHeight);\n\n    if (typeof offsetX === 'number') {\n      element.getAttribute('x', true).setValue(offsetX);\n    }\n\n    if (typeof offsetY === 'number') {\n      element.getAttribute('y', true).setValue(offsetY);\n    }\n\n    if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n      var viewBox = toNumbers(element.getAttribute('viewBox').getString());\n      var xRatio = 0;\n      var yRatio = 0;\n\n      if (typeof scaleWidth === 'number') {\n        var _widthStyle = element.getStyle('width');\n\n        if (_widthStyle.hasValue()) {\n          xRatio = _widthStyle.getPixels('x') / scaleWidth;\n        } else if (!isNaN(viewBox[2])) {\n          xRatio = viewBox[2] / scaleWidth;\n        }\n      }\n\n      if (typeof scaleHeight === 'number') {\n        var _heightStyle = element.getStyle('height');\n\n        if (_heightStyle.hasValue()) {\n          yRatio = _heightStyle.getPixels('y') / scaleHeight;\n        } else if (!isNaN(viewBox[3])) {\n          yRatio = viewBox[3] / scaleHeight;\n        }\n      }\n\n      if (!xRatio) {\n        xRatio = yRatio;\n      }\n\n      if (!yRatio) {\n        yRatio = xRatio;\n      }\n\n      element.getAttribute('width', true).setValue(scaleWidth);\n      element.getAttribute('height', true).setValue(scaleHeight);\n      var transformStyle = element.getStyle('transform', true, true);\n      transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1.0 / xRatio, \", \").concat(1.0 / yRatio, \")\"));\n    } // clear and render\n\n\n    if (!ignoreClear) {\n      ctx.clearRect(0, 0, cWidth, cHeight);\n    }\n\n    element.render(ctx);\n\n    if (isFirstRender) {\n      this.isFirstRender = false;\n    }\n  }\n\n}\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch$1;\n\nvar {\n  defaultFetch\n} = Screen;\nvar DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : null;\nclass Parser {\n  constructor() {\n    var {\n      fetch = defaultFetch,\n      DOMParser = DefaultDOMParser\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.fetch = fetch;\n    this.DOMParser = DOMParser;\n  }\n\n  parse(resource) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (resource.startsWith('<')) {\n        return _this.parseFromString(resource);\n      }\n\n      return _this.load(resource);\n    })();\n  }\n\n  parseFromString(xml) {\n    var parser = new this.DOMParser();\n\n    try {\n      return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n    } catch (err) {\n      return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n    }\n  }\n\n  checkDocument(document) {\n    var parserError = document.getElementsByTagName('parsererror')[0];\n\n    if (parserError) {\n      throw new Error(parserError.textContent);\n    }\n\n    return document;\n  }\n\n  load(url) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var response = yield _this2.fetch(url);\n      var xml = yield response.text();\n      return _this2.parseFromString(xml);\n    })();\n  }\n\n}\n\nclass Translate {\n  constructor(_, point) {\n    this.type = 'translate';\n    this.point = null;\n    this.point = Point.parse(point);\n  }\n\n  apply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(x || 0.0, y || 0.0);\n  }\n\n  unapply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(-1.0 * x || 0.0, -1.0 * y || 0.0);\n  }\n\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.point;\n    point.applyTransform([1, 0, 0, 1, x || 0.0, y || 0.0]);\n  }\n\n}\n\nclass Rotate {\n  constructor(document, rotate, transformOrigin) {\n    this.type = 'rotate';\n    this.angle = null;\n    this.originX = null;\n    this.originY = null;\n    this.cx = 0;\n    this.cy = 0;\n    var numbers = toNumbers(rotate);\n    this.angle = new Property(document, 'angle', numbers[0]);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n    this.cx = numbers[1] || 0;\n    this.cy = numbers[2] || 0;\n  }\n\n  apply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(-1.0 * angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    var {\n      cx,\n      cy,\n      angle\n    } = this;\n    var rad = angle.getRadians();\n    point.applyTransform([1, 0, 0, 1, cx || 0.0, cy || 0.0 // this.p.y\n    ]);\n    point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);\n    point.applyTransform([1, 0, 0, 1, -cx || 0.0, -cy || 0.0 // -this.p.y\n    ]);\n  }\n\n}\n\nclass Scale {\n  constructor(_, scale, transformOrigin) {\n    this.type = 'scale';\n    this.scale = null;\n    this.originX = null;\n    this.originY = null;\n    var scaleSize = Point.parseScale(scale); // Workaround for node-canvas\n\n    if (scaleSize.x === 0 || scaleSize.y === 0) {\n      scaleSize.x = PSEUDO_ZERO;\n      scaleSize.y = PSEUDO_ZERO;\n    }\n\n    this.scale = scaleSize;\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n\n  apply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(x, y || x);\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(1.0 / x, 1.0 / y || x);\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.scale;\n    point.applyTransform([x || 0.0, 0, 0, y || 0.0, 0, 0]);\n  }\n\n}\n\nclass Matrix {\n  constructor(_, matrix, transformOrigin) {\n    this.type = 'matrix';\n    this.matrix = [];\n    this.originX = null;\n    this.originY = null;\n    this.matrix = toNumbers(matrix);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n\n  apply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var a = matrix[0];\n    var b = matrix[2];\n    var c = matrix[4];\n    var d = matrix[1];\n    var e = matrix[3];\n    var f = matrix[5];\n    var g = 0.0;\n    var h = 0.0;\n    var i = 1.0;\n    var det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    point.applyTransform(this.matrix);\n  }\n\n}\n\nclass Skew extends Matrix {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skew';\n    this.angle = null;\n    this.angle = new Property(document, 'angle', skew);\n  }\n\n}\n\nclass SkewX extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewX';\n    this.matrix = [1, 0, Math.tan(this.angle.getRadians()), 1, 0, 0];\n  }\n\n}\n\nclass SkewY extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewY';\n    this.matrix = [1, Math.tan(this.angle.getRadians()), 0, 1, 0, 0];\n  }\n\n}\n\nfunction parseTransforms(transform) {\n  return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\n\nfunction parseTransform(transform) {\n  var [type, value] = transform.split('(');\n  return [type.trim(), value.trim().replace(')', '')];\n}\n\nclass Transform {\n  constructor(document, transform, transformOrigin) {\n    this.document = document;\n    this.transforms = [];\n    var data = parseTransforms(transform);\n    data.forEach(transform => {\n      if (transform === 'none') {\n        return;\n      }\n\n      var [type, value] = parseTransform(transform);\n      var TransformType = Transform.transformTypes[type];\n\n      if (typeof TransformType !== 'undefined') {\n        this.transforms.push(new TransformType(this.document, value, transformOrigin));\n      }\n    });\n  }\n\n  static fromElement(document, element) {\n    var transformStyle = element.getStyle('transform', false, true);\n    var [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle('transform-origin', false, true).split();\n    var transformOrigin = [transformOriginXProperty, transformOriginYProperty];\n\n    if (transformStyle.hasValue()) {\n      return new Transform(document, transformStyle.getString(), transformOrigin);\n    }\n\n    return null;\n  }\n\n  apply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = 0; i < len; i++) {\n      transforms[i].apply(ctx);\n    }\n  }\n\n  unapply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = len - 1; i >= 0; i--) {\n      transforms[i].unapply(ctx);\n    }\n  } // TODO: applyToPoint unused ... remove?\n\n\n  applyToPoint(point) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = 0; i < len; i++) {\n      transforms[i].applyToPoint(point);\n    }\n  }\n\n}\nTransform.transformTypes = {\n  translate: Translate,\n  rotate: Rotate,\n  scale: Scale,\n  matrix: Matrix,\n  skewX: SkewX,\n  skewY: SkewY\n};\n\nclass Element {\n  constructor(document, node) {\n    var captureTextNodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.document = document;\n    this.node = node;\n    this.captureTextNodes = captureTextNodes;\n    this.attributes = Object.create(null);\n    this.styles = Object.create(null);\n    this.stylesSpecificity = Object.create(null);\n    this.animationFrozen = false;\n    this.animationFrozenValue = '';\n    this.parent = null;\n    this.children = [];\n\n    if (!node || node.nodeType !== 1) {\n      // ELEMENT_NODE\n      return;\n    } // add attributes\n\n\n    Array.from(node.attributes).forEach(attribute => {\n      var nodeName = normalizeAttributeName(attribute.nodeName);\n      this.attributes[nodeName] = new Property(document, nodeName, attribute.value);\n    });\n    this.addStylesFromStyleDefinition(); // add inline styles\n\n    if (this.getAttribute('style').hasValue()) {\n      var styles = this.getAttribute('style').getString().split(';').map(_ => _.trim());\n      styles.forEach(style => {\n        if (!style) {\n          return;\n        }\n\n        var [name, value] = style.split(':').map(_ => _.trim());\n        this.styles[name] = new Property(document, name, value);\n      });\n    }\n\n    var {\n      definitions\n    } = document;\n    var id = this.getAttribute('id'); // add id\n\n    if (id.hasValue()) {\n      if (!definitions[id.getString()]) {\n        definitions[id.getString()] = this;\n      }\n    }\n\n    Array.from(node.childNodes).forEach(childNode => {\n      if (childNode.nodeType === 1) {\n        this.addChild(childNode); // ELEMENT_NODE\n      } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n        var textNode = document.createTextNode(childNode);\n\n        if (textNode.getText().length > 0) {\n          this.addChild(textNode); // TEXT_NODE\n        }\n      }\n    });\n  }\n\n  getAttribute(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var attr = this.attributes[name];\n\n    if (!attr && createIfNotExists) {\n      var _attr = new Property(this.document, name, '');\n\n      this.attributes[name] = _attr;\n      return _attr;\n    }\n\n    return attr || Property.empty(this.document);\n  }\n\n  getHrefAttribute() {\n    for (var key in this.attributes) {\n      if (key === 'href' || key.endsWith(':href')) {\n        return this.attributes[key];\n      }\n    }\n\n    return Property.empty(this.document);\n  }\n\n  getStyle(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var skipAncestors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var style = this.styles[name];\n\n    if (style) {\n      return style;\n    }\n\n    var attr = this.getAttribute(name);\n\n    if (attr !== null && attr !== void 0 && attr.hasValue()) {\n      this.styles[name] = attr; // move up to me to cache\n\n      return attr;\n    }\n\n    if (!skipAncestors) {\n      var {\n        parent\n      } = this;\n\n      if (parent) {\n        var parentStyle = parent.getStyle(name);\n\n        if (parentStyle !== null && parentStyle !== void 0 && parentStyle.hasValue()) {\n          return parentStyle;\n        }\n      }\n    }\n\n    if (createIfNotExists) {\n      var _style = new Property(this.document, name, '');\n\n      this.styles[name] = _style;\n      return _style;\n    }\n\n    return style || Property.empty(this.document);\n  }\n\n  render(ctx) {\n    // don't render display=none\n    // don't render visibility=hidden\n    if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n      return;\n    }\n\n    ctx.save();\n\n    if (this.getStyle('mask').hasValue()) {\n      // mask\n      var mask = this.getStyle('mask').getDefinition();\n\n      if (mask) {\n        this.applyEffects(ctx);\n        mask.apply(ctx, this);\n      }\n    } else if (this.getStyle('filter').getValue('none') !== 'none') {\n      // filter\n      var filter = this.getStyle('filter').getDefinition();\n\n      if (filter) {\n        this.applyEffects(ctx);\n        filter.apply(ctx, this);\n      }\n    } else {\n      this.setContext(ctx);\n      this.renderChildren(ctx);\n      this.clearContext(ctx);\n    }\n\n    ctx.restore();\n  }\n\n  setContext(_) {// NO RENDER\n  }\n\n  applyEffects(ctx) {\n    // transform\n    var transform = Transform.fromElement(this.document, this);\n\n    if (transform) {\n      transform.apply(ctx);\n    } // clip\n\n\n    var clipPathStyleProp = this.getStyle('clip-path', false, true);\n\n    if (clipPathStyleProp.hasValue()) {\n      var clip = clipPathStyleProp.getDefinition();\n\n      if (clip) {\n        clip.apply(ctx);\n      }\n    }\n  }\n\n  clearContext(_) {// NO RENDER\n  }\n\n  renderChildren(ctx) {\n    this.children.forEach(child => {\n      child.render(ctx);\n    });\n  }\n\n  addChild(childNode) {\n    var child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n    child.parent = this;\n\n    if (!Element.ignoreChildTypes.includes(child.type)) {\n      this.children.push(child);\n    }\n  }\n\n  matchesSelector(selector) {\n    var _node$getAttribute;\n\n    var {\n      node\n    } = this;\n\n    if (typeof node.matches === 'function') {\n      return node.matches(selector);\n    }\n\n    var styleClasses = (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, 'class');\n\n    if (!styleClasses || styleClasses === '') {\n      return false;\n    }\n\n    return styleClasses.split(' ').some(styleClass => \".\".concat(styleClass) === selector);\n  }\n\n  addStylesFromStyleDefinition() {\n    var {\n      styles,\n      stylesSpecificity\n    } = this.document;\n\n    for (var selector in styles) {\n      if (!selector.startsWith('@') && this.matchesSelector(selector)) {\n        var style = styles[selector];\n        var specificity = stylesSpecificity[selector];\n\n        if (style) {\n          for (var name in style) {\n            var existingSpecificity = this.stylesSpecificity[name];\n\n            if (typeof existingSpecificity === 'undefined') {\n              existingSpecificity = '000';\n            }\n\n            if (specificity >= existingSpecificity) {\n              this.styles[name] = style[name];\n              this.stylesSpecificity[name] = specificity;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  removeStyles(element, ignoreStyles) {\n    var toRestore = ignoreStyles.reduce((toRestore, name) => {\n      var styleProp = element.getStyle(name);\n\n      if (!styleProp.hasValue()) {\n        return toRestore;\n      }\n\n      var value = styleProp.getString();\n      styleProp.setValue('');\n      return [...toRestore, [name, value]];\n    }, []);\n    return toRestore;\n  }\n\n  restoreStyles(element, styles) {\n    styles.forEach(_ref => {\n      var [name, value] = _ref;\n      element.getStyle(name, true).setValue(value);\n    });\n  }\n\n  isFirstChild() {\n    var _this$parent;\n\n    return ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.children.indexOf(this)) === 0;\n  }\n\n}\nElement.ignoreChildTypes = ['title'];\n\nclass UnknownElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n  }\n\n}\n\nfunction wrapFontFamily(fontFamily) {\n  var trimmed = fontFamily.trim();\n  return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\n\nfunction prepareFontFamily(fontFamily) {\n  return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\r\n * @param fontStyle\r\n * @returns CSS font style.\r\n */\n\n\nfunction prepareFontStyle(fontStyle) {\n  if (!fontStyle) {\n    return '';\n  }\n\n  var targetFontStyle = fontStyle.trim().toLowerCase();\n\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle;\n\n    default:\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle;\n      }\n\n      return '';\n  }\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\r\n * @param fontWeight\r\n * @returns CSS font weight.\r\n */\n\n\nfunction prepareFontWeight(fontWeight) {\n  if (!fontWeight) {\n    return '';\n  }\n\n  var targetFontWeight = fontWeight.trim().toLowerCase();\n\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight;\n\n    default:\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight;\n      }\n\n      return '';\n  }\n}\n\nclass Font {\n  constructor(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n    var inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n    this.fontFamily = fontFamily || inheritFont.fontFamily;\n    this.fontSize = fontSize || inheritFont.fontSize;\n    this.fontStyle = fontStyle || inheritFont.fontStyle;\n    this.fontWeight = fontWeight || inheritFont.fontWeight;\n    this.fontVariant = fontVariant || inheritFont.fontVariant;\n  }\n\n  static parse() {\n    var font = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var inherit = arguments.length > 1 ? arguments[1] : undefined;\n    var fontStyle = '';\n    var fontVariant = '';\n    var fontWeight = '';\n    var fontSize = '';\n    var fontFamily = '';\n    var parts = compressSpaces(font).trim().split(' ');\n    var set = {\n      fontSize: false,\n      fontStyle: false,\n      fontWeight: false,\n      fontVariant: false\n    };\n    parts.forEach(part => {\n      switch (true) {\n        case !set.fontStyle && Font.styles.includes(part):\n          if (part !== 'inherit') {\n            fontStyle = part;\n          }\n\n          set.fontStyle = true;\n          break;\n\n        case !set.fontVariant && Font.variants.includes(part):\n          if (part !== 'inherit') {\n            fontVariant = part;\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          break;\n\n        case !set.fontWeight && Font.weights.includes(part):\n          if (part !== 'inherit') {\n            fontWeight = part;\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          break;\n\n        case !set.fontSize:\n          if (part !== 'inherit') {\n            [fontSize] = part.split('/');\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          set.fontSize = true;\n          break;\n\n        default:\n          if (part !== 'inherit') {\n            fontFamily += part;\n          }\n\n      }\n    });\n    return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n  }\n\n  toString() {\n    return [prepareFontStyle(this.fontStyle), this.fontVariant, prepareFontWeight(this.fontWeight), this.fontSize, // Wrap fontFamily only on nodejs and only for canvas.ctx\n    prepareFontFamily(this.fontFamily)].join(' ').trim();\n  }\n\n}\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\n\nclass BoundingBox {\n  constructor() {\n    var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NaN;\n    var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.NaN;\n    var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.NaN;\n    var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Number.NaN;\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n\n  get x() {\n    return this.x1;\n  }\n\n  get y() {\n    return this.y1;\n  }\n\n  get width() {\n    return this.x2 - this.x1;\n  }\n\n  get height() {\n    return this.y2 - this.y1;\n  }\n\n  addPoint(x, y) {\n    if (typeof x !== 'undefined') {\n      if (isNaN(this.x1) || isNaN(this.x2)) {\n        this.x1 = x;\n        this.x2 = x;\n      }\n\n      if (x < this.x1) {\n        this.x1 = x;\n      }\n\n      if (x > this.x2) {\n        this.x2 = x;\n      }\n    }\n\n    if (typeof y !== 'undefined') {\n      if (isNaN(this.y1) || isNaN(this.y2)) {\n        this.y1 = y;\n        this.y2 = y;\n      }\n\n      if (y < this.y1) {\n        this.y1 = y;\n      }\n\n      if (y > this.y2) {\n        this.y2 = y;\n      }\n    }\n  }\n\n  addX(x) {\n    this.addPoint(x, null);\n  }\n\n  addY(y) {\n    this.addPoint(null, y);\n  }\n\n  addBoundingBox(boundingBox) {\n    if (!boundingBox) {\n      return;\n    }\n\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = boundingBox;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n\n  sumCubic(t, p0, p1, p2, p3) {\n    return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n  }\n\n  bezierCurveAdd(forX, p0, p1, p2, p3) {\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var c = 3 * p1 - 3 * p0;\n\n    if (a === 0) {\n      if (b === 0) {\n        return;\n      }\n\n      var t = -c / b;\n\n      if (0 < t && t < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t, p0, p1, p2, p3));\n        }\n      }\n\n      return;\n    }\n\n    var b2ac = Math.pow(b, 2) - 4 * c * a;\n\n    if (b2ac < 0) {\n      return;\n    }\n\n    var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n\n    if (0 < t1 && t1 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n      }\n    }\n\n    var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n\n    if (0 < t2 && t2 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n      }\n    }\n  } // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n\n\n  addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n    this.addPoint(p0x, p0y);\n    this.addPoint(p3x, p3y);\n    this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n    this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n  }\n\n  addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n    var cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    var cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n  }\n\n  isPointInBox(x, y) {\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = this;\n    return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n  }\n\n}\n\nclass PathParser extends SVGPathData {\n  constructor(path) {\n    super(path // Fix spaces after signs.\n    .replace(/([+\\-.])\\s+/gm, '$1') // Remove invalid part.\n    .replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g, ''));\n    this.control = null;\n    this.start = null;\n    this.current = null;\n    this.command = null;\n    this.commands = this.commands;\n    this.i = -1;\n    this.previousCommand = null;\n    this.points = [];\n    this.angles = [];\n  }\n\n  reset() {\n    this.i = -1;\n    this.command = null;\n    this.previousCommand = null;\n    this.start = new Point(0, 0);\n    this.control = new Point(0, 0);\n    this.current = new Point(0, 0);\n    this.points = [];\n    this.angles = [];\n  }\n\n  isEnd() {\n    var {\n      i,\n      commands\n    } = this;\n    return i >= commands.length - 1;\n  }\n\n  next() {\n    var command = this.commands[++this.i];\n    this.previousCommand = this.command;\n    this.command = command;\n    return command;\n  }\n\n  getPoint() {\n    var xProp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'x';\n    var yProp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'y';\n    var point = new Point(this.command[xProp], this.command[yProp]);\n    return this.makeAbsolute(point);\n  }\n\n  getAsControlPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.control = point;\n    return point;\n  }\n\n  getAsCurrentPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.current = point;\n    return point;\n  }\n\n  getReflectedControlPoint() {\n    var previousCommand = this.previousCommand.type;\n\n    if (previousCommand !== SVGPathData.CURVE_TO && previousCommand !== SVGPathData.SMOOTH_CURVE_TO && previousCommand !== SVGPathData.QUAD_TO && previousCommand !== SVGPathData.SMOOTH_QUAD_TO) {\n      return this.current;\n    } // reflect point\n\n\n    var {\n      current: {\n        x: cx,\n        y: cy\n      },\n      control: {\n        x: ox,\n        y: oy\n      }\n    } = this;\n    var point = new Point(2 * cx - ox, 2 * cy - oy);\n    return point;\n  }\n\n  makeAbsolute(point) {\n    if (this.command.relative) {\n      var {\n        x,\n        y\n      } = this.current;\n      point.x += x;\n      point.y += y;\n    }\n\n    return point;\n  }\n\n  addMarker(point, from, priorTo) {\n    var {\n      points,\n      angles\n    } = this; // if the last angle isn't filled in because we didn't have this point yet ...\n\n    if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n      angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n    }\n\n    this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n  }\n\n  addMarkerAngle(point, angle) {\n    this.points.push(point);\n    this.angles.push(angle);\n  }\n\n  getMarkerPoints() {\n    return this.points;\n  }\n\n  getMarkerAngles() {\n    var {\n      angles\n    } = this;\n    var len = angles.length;\n\n    for (var i = 0; i < len; i++) {\n      if (!angles[i]) {\n        for (var j = i + 1; j < len; j++) {\n          if (angles[j]) {\n            angles[i] = angles[j];\n            break;\n          }\n        }\n      }\n    }\n\n    return angles;\n  }\n\n}\n\nclass RenderedElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.modifiedEmSizeStack = false;\n  }\n\n  calculateOpacity() {\n    var opacity = 1.0; // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n\n    var element = this;\n\n    while (element) {\n      var opacityStyle = element.getStyle('opacity', false, true); // no ancestors on style call\n\n      if (opacityStyle.hasValue(true)) {\n        opacity *= opacityStyle.getNumber();\n      }\n\n      element = element.parent;\n    }\n\n    return opacity;\n  }\n\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!fromMeasure) {\n      // causes stack overflow when measuring text with gradients\n      // fill\n      var fillStyleProp = this.getStyle('fill');\n      var fillOpacityStyleProp = this.getStyle('fill-opacity');\n      var strokeStyleProp = this.getStyle('stroke');\n      var strokeOpacityProp = this.getStyle('stroke-opacity');\n\n      if (fillStyleProp.isUrlDefinition()) {\n        var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n\n        if (fillStyle) {\n          ctx.fillStyle = fillStyle;\n        }\n      } else if (fillStyleProp.hasValue()) {\n        if (fillStyleProp.getString() === 'currentColor') {\n          fillStyleProp.setValue(this.getStyle('color').getColor());\n        }\n\n        var _fillStyle = fillStyleProp.getColor();\n\n        if (_fillStyle !== 'inherit') {\n          ctx.fillStyle = _fillStyle === 'none' ? 'rgba(0,0,0,0)' : _fillStyle;\n        }\n      }\n\n      if (fillOpacityStyleProp.hasValue()) {\n        var _fillStyle2 = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n\n        ctx.fillStyle = _fillStyle2;\n      } // stroke\n\n\n      if (strokeStyleProp.isUrlDefinition()) {\n        var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n\n        if (strokeStyle) {\n          ctx.strokeStyle = strokeStyle;\n        }\n      } else if (strokeStyleProp.hasValue()) {\n        if (strokeStyleProp.getString() === 'currentColor') {\n          strokeStyleProp.setValue(this.getStyle('color').getColor());\n        }\n\n        var _strokeStyle = strokeStyleProp.getString();\n\n        if (_strokeStyle !== 'inherit') {\n          ctx.strokeStyle = _strokeStyle === 'none' ? 'rgba(0,0,0,0)' : _strokeStyle;\n        }\n      }\n\n      if (strokeOpacityProp.hasValue()) {\n        var _strokeStyle2 = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n\n        ctx.strokeStyle = _strokeStyle2;\n      }\n\n      var strokeWidthStyleProp = this.getStyle('stroke-width');\n\n      if (strokeWidthStyleProp.hasValue()) {\n        var newLineWidth = strokeWidthStyleProp.getPixels();\n        ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n        : newLineWidth;\n      }\n\n      var strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n      var strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n      var strokeMiterlimitProp = this.getStyle('stroke-miterlimit'); // NEED TEST\n      // const pointOrderStyleProp = this.getStyle('paint-order');\n\n      var strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n      var strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n\n      if (strokeLinecapStyleProp.hasValue()) {\n        ctx.lineCap = strokeLinecapStyleProp.getString();\n      }\n\n      if (strokeLinejoinStyleProp.hasValue()) {\n        ctx.lineJoin = strokeLinejoinStyleProp.getString();\n      }\n\n      if (strokeMiterlimitProp.hasValue()) {\n        ctx.miterLimit = strokeMiterlimitProp.getNumber();\n      } // NEED TEST\n      // if (pointOrderStyleProp.hasValue()) {\n      // \t// ?\n      // \tctx.paintOrder = pointOrderStyleProp.getValue();\n      // }\n\n\n      if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n        var gaps = toNumbers(strokeDasharrayStyleProp.getString());\n\n        if (typeof ctx.setLineDash !== 'undefined') {\n          ctx.setLineDash(gaps);\n        } else // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDash !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDash = gaps;\n          } else // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDash = gaps;\n            }\n\n        var offset = strokeDashoffsetProp.getPixels();\n\n        if (typeof ctx.lineDashOffset !== 'undefined') {\n          ctx.lineDashOffset = offset;\n        } else // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDashOffset = offset;\n          } else // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDashOffset !== 'undefined') {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDashOffset = offset;\n            }\n      }\n    } // font\n\n\n    this.modifiedEmSizeStack = false;\n\n    if (typeof ctx.font !== 'undefined') {\n      var fontStyleProp = this.getStyle('font');\n      var fontStyleStyleProp = this.getStyle('font-style');\n      var fontVariantStyleProp = this.getStyle('font-variant');\n      var fontWeightStyleProp = this.getStyle('font-weight');\n      var fontSizeStyleProp = this.getStyle('font-size');\n      var fontFamilyStyleProp = this.getStyle('font-family');\n      var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n      fontStyleStyleProp.setValue(font.fontStyle);\n      fontVariantStyleProp.setValue(font.fontVariant);\n      fontWeightStyleProp.setValue(font.fontWeight);\n      fontSizeStyleProp.setValue(font.fontSize);\n      fontFamilyStyleProp.setValue(font.fontFamily);\n      ctx.font = font.toString();\n\n      if (fontSizeStyleProp.isPixels()) {\n        this.document.emSize = fontSizeStyleProp.getPixels();\n        this.modifiedEmSizeStack = true;\n      }\n    }\n\n    if (!fromMeasure) {\n      // effects\n      this.applyEffects(ctx); // opacity\n\n      ctx.globalAlpha = this.calculateOpacity();\n    }\n  }\n\n  clearContext(ctx) {\n    super.clearContext(ctx);\n\n    if (this.modifiedEmSizeStack) {\n      this.document.popEmSize();\n    }\n  }\n\n}\n\nclass PathElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'path';\n    this.pathParser = null;\n    this.pathParser = new PathParser(this.getAttribute('d').getString());\n  }\n\n  path(ctx) {\n    var {\n      pathParser\n    } = this;\n    var boundingBox = new BoundingBox();\n    pathParser.reset();\n\n    if (ctx) {\n      ctx.beginPath();\n    }\n\n    while (!pathParser.isEnd()) {\n      switch (pathParser.next().type) {\n        case PathParser.MOVE_TO:\n          this.pathM(ctx, boundingBox);\n          break;\n\n        case PathParser.LINE_TO:\n          this.pathL(ctx, boundingBox);\n          break;\n\n        case PathParser.HORIZ_LINE_TO:\n          this.pathH(ctx, boundingBox);\n          break;\n\n        case PathParser.VERT_LINE_TO:\n          this.pathV(ctx, boundingBox);\n          break;\n\n        case PathParser.CURVE_TO:\n          this.pathC(ctx, boundingBox);\n          break;\n\n        case PathParser.SMOOTH_CURVE_TO:\n          this.pathS(ctx, boundingBox);\n          break;\n\n        case PathParser.QUAD_TO:\n          this.pathQ(ctx, boundingBox);\n          break;\n\n        case PathParser.SMOOTH_QUAD_TO:\n          this.pathT(ctx, boundingBox);\n          break;\n\n        case PathParser.ARC:\n          this.pathA(ctx, boundingBox);\n          break;\n\n        case PathParser.CLOSE_PATH:\n          this.pathZ(ctx, boundingBox);\n          break;\n      }\n    }\n\n    return boundingBox;\n  }\n\n  getBoundingBox(_) {\n    return this.path();\n  }\n\n  getMarkers() {\n    var {\n      pathParser\n    } = this;\n    var points = pathParser.getMarkerPoints();\n    var angles = pathParser.getMarkerAngles();\n    var markers = points.map((point, i) => [point, angles[i]]);\n    return markers;\n  }\n\n  renderChildren(ctx) {\n    this.path(ctx);\n    this.document.screen.mouse.checkPath(this, ctx);\n    var fillRuleStyleProp = this.getStyle('fill-rule');\n\n    if (ctx.fillStyle !== '') {\n      if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n        ctx.fill(fillRuleStyleProp.getString());\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (ctx.strokeStyle !== '') {\n      if (this.getAttribute('vector-effect').getString() === 'non-scaling-stroke') {\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.stroke();\n      }\n    }\n\n    var markers = this.getMarkers();\n\n    if (markers) {\n      var markersLastIndex = markers.length - 1;\n      var markerStartStyleProp = this.getStyle('marker-start');\n      var markerMidStyleProp = this.getStyle('marker-mid');\n      var markerEndStyleProp = this.getStyle('marker-end');\n\n      if (markerStartStyleProp.isUrlDefinition()) {\n        var marker = markerStartStyleProp.getDefinition();\n        var [point, angle] = markers[0];\n        marker.render(ctx, point, angle);\n      }\n\n      if (markerMidStyleProp.isUrlDefinition()) {\n        var _marker = markerMidStyleProp.getDefinition();\n\n        for (var i = 1; i < markersLastIndex; i++) {\n          var [_point, _angle] = markers[i];\n\n          _marker.render(ctx, _point, _angle);\n        }\n      }\n\n      if (markerEndStyleProp.isUrlDefinition()) {\n        var _marker2 = markerEndStyleProp.getDefinition();\n\n        var [_point2, _angle2] = markers[markersLastIndex];\n\n        _marker2.render(ctx, _point2, _angle2);\n      }\n    }\n  }\n\n  static pathM(pathParser) {\n    var point = pathParser.getAsCurrentPoint();\n    pathParser.start = pathParser.current;\n    return {\n      point\n    };\n  }\n\n  pathM(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      point\n    } = PathElement.pathM(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.moveTo(x, y);\n    }\n  }\n\n  static pathL(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point\n    };\n  }\n\n  pathL(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathL(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathH(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point((command.relative ? current.x : 0) + command.x, current.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n\n  pathH(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathH(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathV(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point(current.x, (command.relative ? current.y : 0) + command.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n\n  pathV(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathV(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathC(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getPoint('x1', 'y1');\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathC(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathS(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getReflectedControlPoint();\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathS(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathQ(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getAsControlPoint('x1', 'y1');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathQ(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathT(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getReflectedControlPoint();\n    pathParser.control = controlPoint;\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathT(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathA(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var {\n      rX,\n      rY,\n      xRot,\n      lArcFlag,\n      sweepFlag\n    } = command;\n    var xAxisRotation = xRot * (Math.PI / 180.0);\n    var currentPoint = pathParser.getAsCurrentPoint(); // Conversion from endpoint to center parameterization\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    // x1', y1'\n\n    var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n    var l = Math.pow(currp.x, 2) / Math.pow(rX, 2) + Math.pow(currp.y, 2) / Math.pow(rY, 2);\n\n    if (l > 1) {\n      rX *= Math.sqrt(l);\n      rY *= Math.sqrt(l);\n    } // cx', cy'\n\n\n    var s = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rX, 2) * Math.pow(rY, 2) - Math.pow(rX, 2) * Math.pow(currp.y, 2) - Math.pow(rY, 2) * Math.pow(currp.x, 2)) / (Math.pow(rX, 2) * Math.pow(currp.y, 2) + Math.pow(rY, 2) * Math.pow(currp.x, 2)));\n\n    if (isNaN(s)) {\n      s = 0;\n    }\n\n    var cpp = new Point(s * rX * currp.y / rY, s * -rY * currp.x / rX); // cx, cy\n\n    var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n    var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY]); // θ1\n    // angle delta\n\n    var u = [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY];\n    var v = [(-currp.x - cpp.x) / rX, (-currp.y - cpp.y) / rY];\n    var ad = vectorsAngle(u, v); // Δθ\n\n    if (vectorsRatio(u, v) <= -1) {\n      ad = Math.PI;\n    }\n\n    if (vectorsRatio(u, v) >= 1) {\n      ad = 0;\n    }\n\n    return {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    };\n  }\n\n  pathA(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser); // for markers\n\n    var dir = 1 - sweepFlag ? 1.0 : -1.0;\n    var ah = a1 + dir * (ad / 2.0);\n    var halfWay = new Point(centp.x + rX * Math.cos(ah), centp.y + rY * Math.sin(ah));\n    pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n    pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n    boundingBox.addPoint(currentPoint.x, currentPoint.y); // TODO: this is too naive, make it better\n\n    if (ctx && !isNaN(a1) && !isNaN(ad)) {\n      var r = rX > rY ? rX : rY;\n      var sx = rX > rY ? 1 : rX / rY;\n      var sy = rX > rY ? rY / rX : 1;\n      ctx.translate(centp.x, centp.y);\n      ctx.rotate(xAxisRotation);\n      ctx.scale(sx, sy);\n      ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n      ctx.scale(1 / sx, 1 / sy);\n      ctx.rotate(-xAxisRotation);\n      ctx.translate(-centp.x, -centp.y);\n    }\n  }\n\n  static pathZ(pathParser) {\n    pathParser.current = pathParser.start;\n  }\n\n  pathZ(ctx, boundingBox) {\n    PathElement.pathZ(this.pathParser);\n\n    if (ctx) {\n      // only close path if it is not a straight line\n      if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n        ctx.closePath();\n      }\n    }\n  }\n\n}\n\nclass GlyphElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'glyph';\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    this.unicode = this.getAttribute('unicode').getString();\n    this.arabicForm = this.getAttribute('arabic-form').getString();\n  }\n\n}\n\nclass TextElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TextElement ? true : captureTextNodes);\n    this.type = 'text';\n    this.x = 0;\n    this.y = 0;\n    this.measureCache = -1;\n  }\n\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    super.setContext(ctx, fromMeasure);\n    var textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n\n    if (textBaseline) {\n      ctx.textBaseline = textBaseline;\n    }\n  }\n\n  initializeCoordinates() {\n    this.x = 0;\n    this.y = 0;\n    this.leafTexts = [];\n    this.textChunkStart = 0;\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n  }\n\n  getBoundingBox(ctx) {\n    if (this.type !== 'text') {\n      return this.getTElementBoundingBox(ctx);\n    } // first, calculate child positions\n\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx);\n    var boundingBox = null; // then calculate bounding box\n\n    this.children.forEach((_, i) => {\n      var childBoundingBox = this.getChildBoundingBox(ctx, this, this, i);\n\n      if (!boundingBox) {\n        boundingBox = childBoundingBox;\n      } else {\n        boundingBox.addBoundingBox(childBoundingBox);\n      }\n    });\n    return boundingBox;\n  }\n\n  getFontSize() {\n    var {\n      document,\n      parent\n    } = this;\n    var inheritFontSize = Font.parse(document.ctx.font).fontSize;\n    var fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n    return fontSize;\n  }\n\n  getTElementBoundingBox(ctx) {\n    var fontSize = this.getFontSize();\n    return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n  }\n\n  getGlyph(font, text, i) {\n    var char = text[i];\n    var glyph = null;\n\n    if (font.isArabic) {\n      var len = text.length;\n      var prevChar = text[i - 1];\n      var nextChar = text[i + 1];\n      var arabicForm = 'isolated';\n\n      if ((i === 0 || prevChar === ' ') && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'terminal';\n      }\n\n      if (i > 0 && prevChar !== ' ' && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'medial';\n      }\n\n      if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n        arabicForm = 'initial';\n      }\n\n      if (typeof font.glyphs[char] !== 'undefined') {\n        // NEED TEST\n        var maybeGlyph = font.glyphs[char];\n        glyph = maybeGlyph instanceof GlyphElement ? maybeGlyph : maybeGlyph[arabicForm];\n      }\n    } else {\n      glyph = font.glyphs[char];\n    }\n\n    if (!glyph) {\n      glyph = font.missingGlyph;\n    }\n\n    return glyph;\n  }\n\n  getText() {\n    return '';\n  }\n\n  getTextFromNode(node) {\n    var textNode = node || this.node;\n    var childNodes = Array.from(textNode.parentNode.childNodes);\n    var index = childNodes.indexOf(textNode);\n    var lastIndex = childNodes.length - 1;\n    var text = compressSpaces( // textNode.value\n    // || textNode.text\n    textNode.textContent || '');\n\n    if (index === 0) {\n      text = trimLeft(text);\n    }\n\n    if (index === lastIndex) {\n      text = trimRight(text);\n    }\n\n    return text;\n  }\n\n  renderChildren(ctx) {\n    if (this.type !== 'text') {\n      this.renderTElementChildren(ctx);\n      return;\n    } // first, calculate child positions\n\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx); // then render\n\n    this.children.forEach((_, i) => {\n      this.renderChild(ctx, this, this, i);\n    });\n    var {\n      mouse\n    } = this.document.screen; // Do not calc bounding box if mouse is not working.\n\n    if (mouse.isWorking()) {\n      mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n    }\n  }\n\n  renderTElementChildren(ctx) {\n    var {\n      document,\n      parent\n    } = this;\n    var renderText = this.getText();\n    var customFont = parent.getStyle('font-family').getDefinition();\n\n    if (customFont) {\n      var {\n        unitsPerEm\n      } = customFont.fontFace;\n      var ctxFont = Font.parse(document.ctx.font);\n      var fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n      var fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n      var scale = fontSize / unitsPerEm;\n      var text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        ctx.translate(this.x, this.y);\n        ctx.scale(scale, -scale);\n        var lw = ctx.lineWidth;\n        ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, .4, 1, 0, 0);\n        }\n\n        glyph.render(ctx);\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, -.4, 1, 0, 0);\n        }\n\n        ctx.lineWidth = lw;\n        ctx.scale(1 / scale, -1 / scale);\n        ctx.translate(-this.x, -this.y);\n        this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          this.x += dx[i];\n        }\n      }\n\n      return;\n    }\n\n    var {\n      x,\n      y\n    } = this; // NEED TEST\n    // if (ctx.paintOrder === 'stroke') {\n    // \tif (ctx.strokeStyle) {\n    // \t\tctx.strokeText(renderText, x, y);\n    // \t}\n    // \tif (ctx.fillStyle) {\n    // \t\tctx.fillText(renderText, x, y);\n    // \t}\n    // } else {\n\n    if (ctx.fillStyle) {\n      ctx.fillText(renderText, x, y);\n    }\n\n    if (ctx.strokeStyle) {\n      ctx.strokeText(renderText, x, y);\n    } // }\n\n  }\n\n  applyAnchoring() {\n    if (this.textChunkStart >= this.leafTexts.length) {\n      return;\n    } // This is basically the \"Apply anchoring\" part of https://www.w3.org/TR/SVG2/text.html#TextLayoutAlgorithm.\n    // The difference is that we apply the anchoring as soon as a chunk is finished. This saves some extra looping.\n    // Vertical text is not supported.\n\n\n    var firstElement = this.leafTexts[this.textChunkStart];\n    var textAnchor = firstElement.getStyle('text-anchor').getString('start');\n    var isRTL = false; // we treat RTL like LTR\n\n    var shift = 0;\n\n    if (textAnchor === 'start' && !isRTL || textAnchor === 'end' && isRTL) {\n      shift = firstElement.x - this.minX;\n    } else if (textAnchor === 'end' && !isRTL || textAnchor === 'start' && isRTL) {\n      shift = firstElement.x - this.maxX;\n    } else {\n      shift = firstElement.x - (this.minX + this.maxX) / 2;\n    }\n\n    for (var i = this.textChunkStart; i < this.leafTexts.length; i++) {\n      this.leafTexts[i].x += shift;\n    } // start new chunk\n\n\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.textChunkStart = this.leafTexts.length;\n  }\n\n  adjustChildCoordinatesRecursive(ctx) {\n    this.children.forEach((_, i) => {\n      this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i);\n    });\n    this.applyAnchoring();\n  }\n\n  adjustChildCoordinatesRecursiveCore(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n\n    if (child.children.length > 0) {\n      child.children.forEach((_, i) => {\n        textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i);\n      });\n    } else {\n      // only leafs are relevant\n      this.adjustChildCoordinates(ctx, textParent, parent, i);\n    }\n  }\n\n  adjustChildCoordinates(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n\n    if (typeof child.measureText !== 'function') {\n      return child;\n    }\n\n    ctx.save();\n    child.setContext(ctx, true);\n    var xAttr = child.getAttribute('x');\n    var yAttr = child.getAttribute('y');\n    var dxAttr = child.getAttribute('dx');\n    var dyAttr = child.getAttribute('dy');\n    var customFont = child.getStyle('font-family').getDefinition();\n    var isRTL = Boolean(customFont) && customFont.isRTL;\n\n    if (i === 0) {\n      // First children inherit attributes from parent(s). Positional attributes\n      // are only inherited from a parent to it's first child.\n      if (!xAttr.hasValue()) {\n        xAttr.setValue(child.getInheritedAttribute('x'));\n      }\n\n      if (!yAttr.hasValue()) {\n        yAttr.setValue(child.getInheritedAttribute('y'));\n      }\n\n      if (!dxAttr.hasValue()) {\n        dxAttr.setValue(child.getInheritedAttribute('dx'));\n      }\n\n      if (!dyAttr.hasValue()) {\n        dyAttr.setValue(child.getInheritedAttribute('dy'));\n      }\n    }\n\n    var width = child.measureText(ctx);\n\n    if (isRTL) {\n      textParent.x -= width;\n    }\n\n    if (xAttr.hasValue()) {\n      // an \"x\" attribute marks the start of a new chunk\n      textParent.applyAnchoring();\n      child.x = xAttr.getPixels('x');\n\n      if (dxAttr.hasValue()) {\n        child.x += dxAttr.getPixels('x');\n      }\n    } else {\n      if (dxAttr.hasValue()) {\n        textParent.x += dxAttr.getPixels('x');\n      }\n\n      child.x = textParent.x;\n    }\n\n    textParent.x = child.x;\n\n    if (!isRTL) {\n      textParent.x += width;\n    }\n\n    if (yAttr.hasValue()) {\n      child.y = yAttr.getPixels('y');\n\n      if (dyAttr.hasValue()) {\n        child.y += dyAttr.getPixels('y');\n      }\n    } else {\n      if (dyAttr.hasValue()) {\n        textParent.y += dyAttr.getPixels('y');\n      }\n\n      child.y = textParent.y;\n    }\n\n    textParent.y = child.y; // update the current chunk and it's bounds\n\n    textParent.leafTexts.push(child);\n    textParent.minX = Math.min(textParent.minX, child.x, child.x + width);\n    textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width);\n    child.clearContext(ctx);\n    ctx.restore();\n    return child;\n  }\n\n  getChildBoundingBox(ctx, textParent, parent, i) {\n    var child = parent.children[i]; // not a text node?\n\n    if (typeof child.getBoundingBox !== 'function') {\n      return null;\n    }\n\n    var boundingBox = child.getBoundingBox(ctx);\n\n    if (!boundingBox) {\n      return null;\n    }\n\n    child.children.forEach((_, i) => {\n      var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n      boundingBox.addBoundingBox(childBoundingBox);\n    });\n    return boundingBox;\n  }\n\n  renderChild(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n    child.render(ctx);\n    child.children.forEach((_, i) => {\n      textParent.renderChild(ctx, textParent, child, i);\n    });\n  }\n\n  measureText(ctx) {\n    var {\n      measureCache\n    } = this;\n\n    if (~measureCache) {\n      return measureCache;\n    }\n\n    var renderText = this.getText();\n    var measure = this.measureTargetText(ctx, renderText);\n    this.measureCache = measure;\n    return measure;\n  }\n\n  measureTargetText(ctx, targetText) {\n    if (!targetText.length) {\n      return 0;\n    }\n\n    var {\n      parent\n    } = this;\n    var customFont = parent.getStyle('font-family').getDefinition();\n\n    if (customFont) {\n      var fontSize = this.getFontSize();\n      var text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n      var _measure = 0;\n\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          _measure += dx[i];\n        }\n      }\n\n      return _measure;\n    }\n\n    if (!ctx.measureText) {\n      return targetText.length * 10;\n    }\n\n    ctx.save();\n    this.setContext(ctx, true);\n    var {\n      width: measure\n    } = ctx.measureText(targetText);\n    this.clearContext(ctx);\n    ctx.restore();\n    return measure;\n  }\n  /**\r\n   * Inherits positional attributes from {@link TextElement} parent(s). Attributes\r\n   * are only inherited from a parent to its first child.\r\n   * @param name - The attribute name.\r\n   * @returns The attribute value or null.\r\n   */\n\n\n  getInheritedAttribute(name) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias,consistent-this\n    var current = this;\n\n    while (current instanceof TextElement && current.isFirstChild()) {\n      var parentAttr = current.parent.getAttribute(name);\n\n      if (parentAttr.hasValue(true)) {\n        return parentAttr.getValue('0');\n      }\n\n      current = current.parent;\n    }\n\n    return null;\n  }\n\n}\n\nclass TSpanElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TSpanElement ? true : captureTextNodes);\n    this.type = 'tspan'; // if this node has children, then they own the text\n\n    this.text = this.children.length > 0 ? '' : this.getTextFromNode();\n  }\n\n  getText() {\n    return this.text;\n  }\n\n}\n\nclass TextNode extends TSpanElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'textNode';\n  }\n\n}\n\nclass SVGElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'svg';\n    this.root = false;\n  }\n\n  setContext(ctx) {\n    var _this$node$parentNode;\n\n    var {\n      document\n    } = this;\n    var {\n      screen,\n      window\n    } = document;\n    var canvas = ctx.canvas;\n    screen.setDefaults(ctx);\n\n    if (canvas.style && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n      ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n      var fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n\n      if (fontSizeProp.hasValue()) {\n        document.rootEmSize = fontSizeProp.getPixels('y');\n        document.emSize = document.rootEmSize;\n      }\n    } // create new view port\n\n\n    if (!this.getAttribute('x').hasValue()) {\n      this.getAttribute('x', true).setValue(0);\n    }\n\n    if (!this.getAttribute('y').hasValue()) {\n      this.getAttribute('y', true).setValue(0);\n    }\n\n    var {\n      width,\n      height\n    } = screen.viewPort;\n\n    if (!this.getStyle('width').hasValue()) {\n      this.getStyle('width', true).setValue('100%');\n    }\n\n    if (!this.getStyle('height').hasValue()) {\n      this.getStyle('height', true).setValue('100%');\n    }\n\n    if (!this.getStyle('color').hasValue()) {\n      this.getStyle('color', true).setValue('black');\n    }\n\n    var refXAttr = this.getAttribute('refX');\n    var refYAttr = this.getAttribute('refY');\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n    var clip = !this.root && this.getStyle('overflow').getValue('hidden') !== 'visible';\n    var minX = 0;\n    var minY = 0;\n    var clipX = 0;\n    var clipY = 0;\n\n    if (viewBox) {\n      minX = viewBox[0];\n      minY = viewBox[1];\n    }\n\n    if (!this.root) {\n      width = this.getStyle('width').getPixels('x');\n      height = this.getStyle('height').getPixels('y');\n\n      if (this.type === 'marker') {\n        clipX = minX;\n        clipY = minY;\n        minX = 0;\n        minY = 0;\n      }\n    }\n\n    screen.viewPort.setCurrent(width, height); // Default value of transform-origin is center only for root SVG elements\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform-origin\n\n    if (this.node // is not temporary SVGElement\n    && (!this.parent || ((_this$node$parentNode = this.node.parentNode) === null || _this$node$parentNode === void 0 ? void 0 : _this$node$parentNode.nodeName) === 'foreignObject') && this.getStyle('transform', false, true).hasValue() && !this.getStyle('transform-origin', false, true).hasValue()) {\n      this.getStyle('transform-origin', true, true).setValue('50% 50%');\n    }\n\n    super.setContext(ctx);\n    ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n\n    if (viewBox) {\n      width = viewBox[2];\n      height = viewBox[3];\n    }\n\n    document.setViewBox({\n      ctx,\n      aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n      width: screen.viewPort.width,\n      desiredWidth: width,\n      height: screen.viewPort.height,\n      desiredHeight: height,\n      minX,\n      minY,\n      refX: refXAttr.getValue(),\n      refY: refYAttr.getValue(),\n      clip,\n      clipX,\n      clipY\n    });\n\n    if (viewBox) {\n      screen.viewPort.removeCurrent();\n      screen.viewPort.setCurrent(width, height);\n    }\n  }\n\n  clearContext(ctx) {\n    super.clearContext(ctx);\n    this.document.screen.viewPort.removeCurrent();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var widthAttr = this.getAttribute('width', true);\n    var heightAttr = this.getAttribute('height', true);\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var styleAttr = this.getAttribute('style');\n    var originWidth = widthAttr.getNumber(0);\n    var originHeight = heightAttr.getNumber(0);\n\n    if (preserveAspectRatio) {\n      if (typeof preserveAspectRatio === 'string') {\n        this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n      } else {\n        var preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n\n        if (preserveAspectRatioAttr.hasValue()) {\n          preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n        }\n      }\n    }\n\n    widthAttr.setValue(width);\n    heightAttr.setValue(height);\n\n    if (!viewBoxAttr.hasValue()) {\n      viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n    }\n\n    if (styleAttr.hasValue()) {\n      var widthStyle = this.getStyle('width');\n      var heightStyle = this.getStyle('height');\n\n      if (widthStyle.hasValue()) {\n        widthStyle.setValue(\"\".concat(width, \"px\"));\n      }\n\n      if (heightStyle.hasValue()) {\n        heightStyle.setValue(\"\".concat(height, \"px\"));\n      }\n    }\n  }\n\n}\n\nclass RectElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'rect';\n  }\n\n  path(ctx) {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width', false, true).getPixels('x');\n    var height = this.getStyle('height', false, true).getPixels('y');\n    var rxAttr = this.getAttribute('rx');\n    var ryAttr = this.getAttribute('ry');\n    var rx = rxAttr.getPixels('x');\n    var ry = ryAttr.getPixels('y');\n\n    if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n      ry = rx;\n    }\n\n    if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n      rx = ry;\n    }\n\n    rx = Math.min(rx, width / 2.0);\n    ry = Math.min(ry, height / 2.0);\n\n    if (ctx) {\n      var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n      ctx.beginPath(); // always start the path so we don't fill prior paths\n\n      if (height > 0 && width > 0) {\n        ctx.moveTo(x + rx, y);\n        ctx.lineTo(x + width - rx, y);\n        ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n        ctx.lineTo(x + width, y + height - ry);\n        ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n        ctx.lineTo(x + rx, y + height);\n        ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n        ctx.lineTo(x, y + ry);\n        ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n        ctx.closePath();\n      }\n    }\n\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass CircleElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'circle';\n  }\n\n  path(ctx) {\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n    var r = this.getAttribute('r').getPixels();\n\n    if (ctx && r > 0) {\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n      ctx.closePath();\n    }\n\n    return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass EllipseElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'ellipse';\n  }\n\n  path(ctx) {\n    var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n    var rx = this.getAttribute('rx').getPixels('x');\n    var ry = this.getAttribute('ry').getPixels('y');\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n\n    if (ctx && rx > 0 && ry > 0) {\n      ctx.beginPath();\n      ctx.moveTo(cx + rx, cy);\n      ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n      ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n      ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n      ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n      ctx.closePath();\n    }\n\n    return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass LineElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'line';\n  }\n\n  getPoints() {\n    return [new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')), new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))];\n  }\n\n  path(ctx) {\n    var [{\n      x: x0,\n      y: y0\n    }, {\n      x: x1,\n      y: y1\n    }] = this.getPoints();\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n      ctx.lineTo(x1, y1);\n    }\n\n    return new BoundingBox(x0, y0, x1, y1);\n  }\n\n  getMarkers() {\n    var [p0, p1] = this.getPoints();\n    var a = p0.angleTo(p1);\n    return [[p0, a], [p1, a]];\n  }\n\n}\n\nclass PolylineElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'polyline';\n    this.points = [];\n    this.points = Point.parsePath(this.getAttribute('points').getString());\n  }\n\n  path(ctx) {\n    var {\n      points\n    } = this;\n    var [{\n      x: x0,\n      y: y0\n    }] = points;\n    var boundingBox = new BoundingBox(x0, y0);\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n    }\n\n    points.forEach(_ref => {\n      var {\n        x,\n        y\n      } = _ref;\n      boundingBox.addPoint(x, y);\n\n      if (ctx) {\n        ctx.lineTo(x, y);\n      }\n    });\n    return boundingBox;\n  }\n\n  getMarkers() {\n    var {\n      points\n    } = this;\n    var lastIndex = points.length - 1;\n    var markers = [];\n    points.forEach((point, i) => {\n      if (i === lastIndex) {\n        return;\n      }\n\n      markers.push([point, point.angleTo(points[i + 1])]);\n    });\n\n    if (markers.length > 0) {\n      markers.push([points[points.length - 1], markers[markers.length - 1][1]]);\n    }\n\n    return markers;\n  }\n\n}\n\nclass PolygonElement extends PolylineElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'polygon';\n  }\n\n  path(ctx) {\n    var boundingBox = super.path(ctx);\n    var [{\n      x,\n      y\n    }] = this.points;\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n      ctx.closePath();\n    }\n\n    return boundingBox;\n  }\n\n}\n\nclass PatternElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'pattern';\n  }\n\n  createPattern(ctx, _, parentOpacityProp) {\n    var width = this.getStyle('width').getPixels('x', true);\n    var height = this.getStyle('height').getPixels('y', true); // render me using a temporary svg element\n\n    var patternSvg = new SVGElement(this.document, null);\n    patternSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    patternSvg.attributes.width = new Property(this.document, 'width', \"\".concat(width, \"px\"));\n    patternSvg.attributes.height = new Property(this.document, 'height', \"\".concat(height, \"px\"));\n    patternSvg.attributes.transform = new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue());\n    patternSvg.children = this.children;\n    var patternCanvas = this.document.createCanvas(width, height);\n    var patternCtx = patternCanvas.getContext('2d');\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n\n    if (xAttr.hasValue() && yAttr.hasValue()) {\n      patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n    }\n\n    if (parentOpacityProp.hasValue()) {\n      this.styles['fill-opacity'] = parentOpacityProp;\n    } else {\n      Reflect.deleteProperty(this.styles, 'fill-opacity');\n    } // render 3x3 grid so when we transform there's no white space on edges\n\n\n    for (var x = -1; x <= 1; x++) {\n      for (var y = -1; y <= 1; y++) {\n        patternCtx.save();\n        patternSvg.attributes.x = new Property(this.document, 'x', x * patternCanvas.width);\n        patternSvg.attributes.y = new Property(this.document, 'y', y * patternCanvas.height);\n        patternSvg.render(patternCtx);\n        patternCtx.restore();\n      }\n    }\n\n    var pattern = ctx.createPattern(patternCanvas, 'repeat');\n    return pattern;\n  }\n\n}\n\nclass MarkerElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'marker';\n  }\n\n  render(ctx, point, angle) {\n    if (!point) {\n      return;\n    }\n\n    var {\n      x,\n      y\n    } = point;\n    var orient = this.getAttribute('orient').getString('auto');\n    var markerUnits = this.getAttribute('markerUnits').getString('strokeWidth');\n    ctx.translate(x, y);\n\n    if (orient === 'auto') {\n      ctx.rotate(angle);\n    }\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(ctx.lineWidth, ctx.lineWidth);\n    }\n\n    ctx.save(); // render me using a temporary svg element\n\n    var markerSvg = new SVGElement(this.document, null);\n    markerSvg.type = this.type;\n    markerSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    markerSvg.attributes.refX = new Property(this.document, 'refX', this.getAttribute('refX').getValue());\n    markerSvg.attributes.refY = new Property(this.document, 'refY', this.getAttribute('refY').getValue());\n    markerSvg.attributes.width = new Property(this.document, 'width', this.getAttribute('markerWidth').getValue());\n    markerSvg.attributes.height = new Property(this.document, 'height', this.getAttribute('markerHeight').getValue());\n    markerSvg.attributes.overflow = new Property(this.document, 'overflow', this.getAttribute('overflow').getValue());\n    markerSvg.attributes.fill = new Property(this.document, 'fill', this.getAttribute('fill').getColor('black'));\n    markerSvg.attributes.stroke = new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none'));\n    markerSvg.children = this.children;\n    markerSvg.render(ctx);\n    ctx.restore();\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n    }\n\n    if (orient === 'auto') {\n      ctx.rotate(-angle);\n    }\n\n    ctx.translate(-x, -y);\n  }\n\n}\n\nclass DefsElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'defs';\n  }\n\n  render() {// NOOP\n  }\n\n}\n\nclass GElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'g';\n  }\n\n  getBoundingBox(ctx) {\n    var boundingBox = new BoundingBox();\n    this.children.forEach(child => {\n      boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n    });\n    return boundingBox;\n  }\n\n}\n\nclass GradientElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.attributesToInherit = ['gradientUnits'];\n    this.stops = [];\n    var {\n      stops,\n      children\n    } = this;\n    children.forEach(child => {\n      if (child.type === 'stop') {\n        stops.push(child);\n      }\n    });\n  }\n\n  getGradientUnits() {\n    return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n  }\n\n  createGradient(ctx, element, parentOpacityProp) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n    var stopsContainer = this;\n\n    if (this.getHrefAttribute().hasValue()) {\n      stopsContainer = this.getHrefAttribute().getDefinition();\n      this.inheritStopContainer(stopsContainer);\n    }\n\n    var {\n      stops\n    } = stopsContainer;\n    var gradient = this.getGradient(ctx, element);\n\n    if (!gradient) {\n      return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n    }\n\n    stops.forEach(stop => {\n      gradient.addColorStop(stop.offset, this.addParentOpacity(parentOpacityProp, stop.color));\n    });\n\n    if (this.getAttribute('gradientTransform').hasValue()) {\n      // render as transformed pattern on temporary canvas\n      var {\n        document\n      } = this;\n      var {\n        MAX_VIRTUAL_PIXELS,\n        viewPort\n      } = document.screen;\n      var [rootView] = viewPort.viewPorts;\n      var rect = new RectElement(document, null);\n      rect.attributes.x = new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.y = new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.width = new Property(document, 'width', MAX_VIRTUAL_PIXELS);\n      rect.attributes.height = new Property(document, 'height', MAX_VIRTUAL_PIXELS);\n      var group = new GElement(document, null);\n      group.attributes.transform = new Property(document, 'transform', this.getAttribute('gradientTransform').getValue());\n      group.children = [rect];\n      var patternSvg = new SVGElement(document, null);\n      patternSvg.attributes.x = new Property(document, 'x', 0);\n      patternSvg.attributes.y = new Property(document, 'y', 0);\n      patternSvg.attributes.width = new Property(document, 'width', rootView.width);\n      patternSvg.attributes.height = new Property(document, 'height', rootView.height);\n      patternSvg.children = [group];\n      var patternCanvas = document.createCanvas(rootView.width, rootView.height);\n      var patternCtx = patternCanvas.getContext('2d');\n      patternCtx.fillStyle = gradient;\n      patternSvg.render(patternCtx);\n      return patternCtx.createPattern(patternCanvas, 'no-repeat');\n    }\n\n    return gradient;\n  }\n\n  inheritStopContainer(stopsContainer) {\n    this.attributesToInherit.forEach(attributeToInherit => {\n      if (!this.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n        this.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n      }\n    });\n  }\n\n  addParentOpacity(parentOpacityProp, color) {\n    if (parentOpacityProp.hasValue()) {\n      var colorProp = new Property(this.document, 'color', color);\n      return colorProp.addOpacity(parentOpacityProp).getColor();\n    }\n\n    return color;\n  }\n\n}\n\nclass LinearGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'linearGradient';\n    this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n  }\n\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n\n    if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n      this.getAttribute('x1', true).setValue(0);\n      this.getAttribute('y1', true).setValue(0);\n      this.getAttribute('x2', true).setValue(1);\n      this.getAttribute('y2', true).setValue(0);\n    }\n\n    var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n    var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n    var x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n    var y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n\n    if (x1 === x2 && y1 === y2) {\n      return null;\n    }\n\n    return ctx.createLinearGradient(x1, y1, x2, y2);\n  }\n\n}\n\nclass RadialGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'radialGradient';\n    this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n  }\n\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = element.getBoundingBox(ctx);\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n\n    if (!this.getAttribute('cx').hasValue()) {\n      this.getAttribute('cx', true).setValue('50%');\n    }\n\n    if (!this.getAttribute('cy').hasValue()) {\n      this.getAttribute('cy', true).setValue('50%');\n    }\n\n    if (!this.getAttribute('r').hasValue()) {\n      this.getAttribute('r', true).setValue('50%');\n    }\n\n    var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n    var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n    var fx = cx;\n    var fy = cy;\n\n    if (this.getAttribute('fx').hasValue()) {\n      fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n    }\n\n    if (this.getAttribute('fy').hasValue()) {\n      fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n    }\n\n    var r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n    var fr = this.getAttribute('fr').getPixels();\n    return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n  }\n\n}\n\nclass StopElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'stop';\n    var offset = Math.max(0, Math.min(1, this.getAttribute('offset').getNumber()));\n    var stopOpacity = this.getStyle('stop-opacity');\n    var stopColor = this.getStyle('stop-color', true);\n\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000');\n    }\n\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity);\n    }\n\n    this.offset = offset;\n    this.color = stopColor.getColor();\n  }\n\n}\n\nclass AnimateElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'animate';\n    this.duration = 0;\n    this.initialValue = null;\n    this.initialUnits = '';\n    this.removed = false;\n    this.frozen = false;\n    document.screen.animations.push(this);\n    this.begin = this.getAttribute('begin').getMilliseconds();\n    this.maxDuration = this.begin + this.getAttribute('dur').getMilliseconds();\n    this.from = this.getAttribute('from');\n    this.to = this.getAttribute('to');\n    this.values = new Property(document, 'values', null);\n    var valuesAttr = this.getAttribute('values');\n\n    if (valuesAttr.hasValue()) {\n      this.values.setValue(valuesAttr.getString().split(';'));\n    }\n  }\n\n  getProperty() {\n    var attributeType = this.getAttribute('attributeType').getString();\n    var attributeName = this.getAttribute('attributeName').getString();\n\n    if (attributeType === 'CSS') {\n      return this.parent.getStyle(attributeName, true);\n    }\n\n    return this.parent.getAttribute(attributeName, true);\n  }\n\n  calcValue() {\n    var {\n      initialUnits\n    } = this;\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n\n    if (initialUnits === '%') {\n      newValue *= 100.0; // numValue() returns 0-1 whereas properties are 0-100\n    }\n\n    return \"\".concat(newValue).concat(initialUnits);\n  }\n\n  update(delta) {\n    var {\n      parent\n    } = this;\n    var prop = this.getProperty(); // set initial value\n\n    if (!this.initialValue) {\n      this.initialValue = prop.getString();\n      this.initialUnits = prop.getUnits();\n    } // if we're past the end time\n\n\n    if (this.duration > this.maxDuration) {\n      var fill = this.getAttribute('fill').getString('remove'); // loop for indefinitely repeating animations\n\n      if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n        this.duration = 0;\n      } else if (fill === 'freeze' && !this.frozen) {\n        this.frozen = true;\n        parent.animationFrozen = true;\n        parent.animationFrozenValue = prop.getString();\n      } else if (fill === 'remove' && !this.removed) {\n        this.removed = true;\n        prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n        return true;\n      }\n\n      return false;\n    }\n\n    this.duration += delta; // if we're past the begin time\n\n    var updated = false;\n\n    if (this.begin < this.duration) {\n      var newValue = this.calcValue(); // tween\n\n      var typeAttr = this.getAttribute('type');\n\n      if (typeAttr.hasValue()) {\n        // for transform, etc.\n        var type = typeAttr.getString();\n        newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n      }\n\n      prop.setValue(newValue);\n      updated = true;\n    }\n\n    return updated;\n  }\n\n  getProgress() {\n    var {\n      document,\n      values\n    } = this;\n    var result = {\n      progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n    };\n\n    if (values.hasValue()) {\n      var p = result.progress * (values.getValue().length - 1);\n      var lb = Math.floor(p);\n      var ub = Math.ceil(p);\n      result.from = new Property(document, 'from', parseFloat(values.getValue()[lb]));\n      result.to = new Property(document, 'to', parseFloat(values.getValue()[ub]));\n      result.progress = (p - lb) / (ub - lb);\n    } else {\n      result.from = this.from;\n      result.to = this.to;\n    }\n\n    return result;\n  }\n\n}\n\nclass AnimateColorElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateColor';\n  }\n\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress();\n    var colorFrom = new RGBColor(from.getColor());\n    var colorTo = new RGBColor(to.getColor());\n\n    if (colorFrom.ok && colorTo.ok) {\n      // tween color linearly\n      var r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n      var g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n      var b = colorFrom.b + (colorTo.b - colorFrom.b) * progress; // ? alpha\n\n      return \"rgb(\".concat(Math.floor(r), \", \").concat(Math.floor(g), \", \").concat(Math.floor(b), \")\");\n    }\n\n    return this.getAttribute('from').getColor();\n  }\n\n}\n\nclass AnimateTransformElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateTransform';\n  }\n\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var transformFrom = toNumbers(from.getString());\n    var transformTo = toNumbers(to.getString());\n    var newValue = transformFrom.map((from, i) => {\n      var to = transformTo[i];\n      return from + (to - from) * progress;\n    }).join(' ');\n    return newValue;\n  }\n\n}\n\nclass FontElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font';\n    this.glyphs = Object.create(null);\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    var {\n      definitions\n    } = document;\n    var {\n      children\n    } = this;\n\n    for (var child of children) {\n      switch (child.type) {\n        case 'font-face':\n          {\n            this.fontFace = child;\n            var fontFamilyStyle = child.getStyle('font-family');\n\n            if (fontFamilyStyle.hasValue()) {\n              definitions[fontFamilyStyle.getString()] = this;\n            }\n\n            break;\n          }\n\n        case 'missing-glyph':\n          this.missingGlyph = child;\n          break;\n\n        case 'glyph':\n          {\n            var glyph = child;\n\n            if (glyph.arabicForm) {\n              this.isRTL = true;\n              this.isArabic = true;\n\n              if (typeof this.glyphs[glyph.unicode] === 'undefined') {\n                this.glyphs[glyph.unicode] = Object.create(null);\n              }\n\n              this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;\n            } else {\n              this.glyphs[glyph.unicode] = glyph;\n            }\n\n            break;\n          }\n      }\n    }\n  }\n\n  render() {// NO RENDER\n  }\n\n}\n\nclass FontFaceElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font-face';\n    this.ascent = this.getAttribute('ascent').getNumber();\n    this.descent = this.getAttribute('descent').getNumber();\n    this.unitsPerEm = this.getAttribute('units-per-em').getNumber();\n  }\n\n}\n\nclass MissingGlyphElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'missing-glyph';\n    this.horizAdvX = 0;\n  }\n\n}\n\nclass TRefElement extends TextElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'tref';\n  }\n\n  getText() {\n    var element = this.getHrefAttribute().getDefinition();\n\n    if (element) {\n      var firstChild = element.children[0];\n\n      if (firstChild) {\n        return firstChild.getText();\n      }\n    }\n\n    return '';\n  }\n\n}\n\nclass AElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'a';\n    var {\n      childNodes\n    } = node;\n    var firstChild = childNodes[0];\n    var hasText = childNodes.length > 0 && Array.from(childNodes).every(node => node.nodeType === 3);\n    this.hasText = hasText;\n    this.text = hasText ? this.getTextFromNode(firstChild) : '';\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  renderChildren(ctx) {\n    if (this.hasText) {\n      // render as text element\n      super.renderChildren(ctx);\n      var {\n        document,\n        x,\n        y\n      } = this;\n      var {\n        mouse\n      } = document.screen;\n      var fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize); // Do not calc bounding box if mouse is not working.\n\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n      }\n    } else if (this.children.length > 0) {\n      // render as temporary group\n      var g = new GElement(this.document, null);\n      g.children = this.children;\n      g.parent = this;\n      g.render(ctx);\n    }\n  }\n\n  onClick() {\n    var {\n      window\n    } = this.document;\n\n    if (window) {\n      window.open(this.getHrefAttribute().getString());\n    }\n  }\n\n  onMouseMove() {\n    var ctx = this.document.ctx;\n    ctx.canvas.style.cursor = 'pointer';\n  }\n\n}\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nclass TextPathElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'textPath';\n    this.textWidth = 0;\n    this.textHeight = 0;\n    this.pathLength = -1;\n    this.glyphInfo = null;\n    this.letterSpacingCache = [];\n    this.measuresCache = new Map([['', 0]]);\n    var pathElement = this.getHrefAttribute().getDefinition();\n    this.text = this.getTextFromNode();\n    this.dataArray = this.parsePathData(pathElement);\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  path(ctx) {\n    var {\n      dataArray\n    } = this;\n\n    if (ctx) {\n      ctx.beginPath();\n    }\n\n    dataArray.forEach(_ref => {\n      var {\n        type,\n        points\n      } = _ref;\n\n      switch (type) {\n        case PathParser.LINE_TO:\n          if (ctx) {\n            ctx.lineTo(points[0], points[1]);\n          }\n\n          break;\n\n        case PathParser.MOVE_TO:\n          if (ctx) {\n            ctx.moveTo(points[0], points[1]);\n          }\n\n          break;\n\n        case PathParser.CURVE_TO:\n          if (ctx) {\n            ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n          }\n\n          break;\n\n        case PathParser.QUAD_TO:\n          if (ctx) {\n            ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n          }\n\n          break;\n\n        case PathParser.ARC:\n          {\n            var [cx, cy, rx, ry, theta, dTheta, psi, fs] = points;\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n\n            if (ctx) {\n              ctx.translate(cx, cy);\n              ctx.rotate(psi);\n              ctx.scale(scaleX, scaleY);\n              ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n              ctx.scale(1 / scaleX, 1 / scaleY);\n              ctx.rotate(-psi);\n              ctx.translate(-cx, -cy);\n            }\n\n            break;\n          }\n\n        case PathParser.CLOSE_PATH:\n          if (ctx) {\n            ctx.closePath();\n          }\n\n          break;\n      }\n    });\n  }\n\n  renderChildren(ctx) {\n    this.setTextData(ctx);\n    ctx.save();\n    var textDecoration = this.parent.getStyle('text-decoration').getString();\n    var fontSize = this.getFontSize();\n    var {\n      glyphInfo\n    } = this;\n    var fill = ctx.fillStyle;\n\n    if (textDecoration === 'underline') {\n      ctx.beginPath();\n    }\n\n    glyphInfo.forEach((glyph, i) => {\n      var {\n        p0,\n        p1,\n        rotation,\n        text: partialText\n      } = glyph;\n      ctx.save();\n      ctx.translate(p0.x, p0.y);\n      ctx.rotate(rotation);\n\n      if (ctx.fillStyle) {\n        ctx.fillText(partialText, 0, 0);\n      }\n\n      if (ctx.strokeStyle) {\n        ctx.strokeText(partialText, 0, 0);\n      }\n\n      ctx.restore();\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          ctx.moveTo(p0.x, p0.y + fontSize / 8);\n        }\n\n        ctx.lineTo(p1.x, p1.y + fontSize / 5);\n      } // // To assist with debugging visually, uncomment following\n      //\n      // ctx.beginPath();\n      // if (i % 2)\n      // \tctx.strokeStyle = 'red';\n      // else\n      // \tctx.strokeStyle = 'green';\n      // ctx.moveTo(p0.x, p0.y);\n      // ctx.lineTo(p1.x, p1.y);\n      // ctx.stroke();\n      // ctx.closePath();\n\n    });\n\n    if (textDecoration === 'underline') {\n      ctx.lineWidth = fontSize / 20;\n      ctx.strokeStyle = fill;\n      ctx.stroke();\n      ctx.closePath();\n    }\n\n    ctx.restore();\n  }\n\n  getLetterSpacingAt() {\n    var idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return this.letterSpacingCache[idx] || 0;\n  }\n\n  findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, dy, c, charI) {\n    var offset = inputOffset;\n    var glyphWidth = this.measureText(ctx, c);\n\n    if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n      glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n    }\n\n    if (charI > -1) {\n      offset += this.getLetterSpacingAt(charI);\n    }\n\n    var splineStep = this.textHeight / 20;\n    var p0 = this.getEquidistantPointOnPath(offset, splineStep, 0);\n    var p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0);\n    var segment = {\n      p0,\n      p1\n    };\n    var rotation = p0 && p1 ? Math.atan2(p1.y - p0.y, p1.x - p0.x) : 0;\n\n    if (dy) {\n      var dyX = Math.cos(Math.PI / 2 + rotation) * dy;\n      var dyY = Math.cos(-rotation) * dy;\n      segment.p0 = _objectSpread$2(_objectSpread$2({}, p0), {}, {\n        x: p0.x + dyX,\n        y: p0.y + dyY\n      });\n      segment.p1 = _objectSpread$2(_objectSpread$2({}, p1), {}, {\n        x: p1.x + dyX,\n        y: p1.y + dyY\n      });\n    }\n\n    offset += glyphWidth;\n    return {\n      offset,\n      segment,\n      rotation\n    };\n  }\n\n  measureText(ctx, text) {\n    var {\n      measuresCache\n    } = this;\n    var targetText = text || this.getText();\n\n    if (measuresCache.has(targetText)) {\n      return measuresCache.get(targetText);\n    }\n\n    var measure = this.measureTargetText(ctx, targetText);\n    measuresCache.set(targetText, measure);\n    return measure;\n  } // This method supposes what all custom fonts already loaded.\n  // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n  // You need to call this method manually to update glyphs cache.\n\n\n  setTextData(ctx) {\n    if (this.glyphInfo) {\n      return;\n    }\n\n    var renderText = this.getText();\n    var chars = renderText.split('');\n    var spacesNumber = renderText.split(' ').length - 1;\n    var dx = this.parent.getAttribute('dx').split().map(_ => _.getPixels('x'));\n    var dy = this.parent.getAttribute('dy').getPixels('y');\n    var anchor = this.parent.getStyle('text-anchor').getString('start');\n    var thisSpacing = this.getStyle('letter-spacing');\n    var parentSpacing = this.parent.getStyle('letter-spacing');\n    var letterSpacing = 0;\n\n    if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n      letterSpacing = parentSpacing.getPixels();\n    } else if (thisSpacing.hasValue()) {\n      if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n        letterSpacing = thisSpacing.getPixels();\n      }\n    } // fill letter-spacing cache\n\n\n    var letterSpacingCache = [];\n    var textLen = renderText.length;\n    this.letterSpacingCache = letterSpacingCache;\n\n    for (var i = 0; i < textLen; i++) {\n      letterSpacingCache.push(typeof dx[i] !== 'undefined' ? dx[i] : letterSpacing);\n    }\n\n    var dxSum = letterSpacingCache.reduce((acc, cur, i) => i === 0 ? 0 : acc + cur || 0, 0);\n    var textWidth = this.measureText(ctx);\n    var textFullWidth = Math.max(textWidth + dxSum, 0);\n    this.textWidth = textWidth;\n    this.textHeight = this.getFontSize();\n    this.glyphInfo = [];\n    var fullPathWidth = this.getPathLength();\n    var startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n    var offset = 0;\n\n    if (anchor === 'middle' || anchor === 'center') {\n      offset = -textFullWidth / 2;\n    }\n\n    if (anchor === 'end' || anchor === 'right') {\n      offset = -textFullWidth;\n    }\n\n    offset += startOffset;\n    chars.forEach((char, i) => {\n      // Find such segment what distance between p0 and p1 is approx. width of glyph\n      var {\n        offset: nextOffset,\n        segment,\n        rotation\n      } = this.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, dy, char, i);\n      offset = nextOffset;\n\n      if (!segment.p0 || !segment.p1) {\n        return;\n      } // const width = this.getLineLength(\n      // \tsegment.p0.x,\n      // \tsegment.p0.y,\n      // \tsegment.p1.x,\n      // \tsegment.p1.y\n      // );\n      // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n      // Can foresee having a rough pair table built in that the developer can override as needed.\n      // Or use \"dx\" attribute of the <text> node as a naive replacement\n      // const kern = 0;\n      // placeholder for future implementation\n      // const midpoint = this.getPointOnLine(\n      // \tkern + width / 2.0,\n      // \tsegment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y\n      // );\n\n\n      this.glyphInfo.push({\n        // transposeX: midpoint.x,\n        // transposeY: midpoint.y,\n        text: chars[i],\n        p0: segment.p0,\n        p1: segment.p1,\n        rotation\n      });\n    });\n  }\n\n  parsePathData(path) {\n    this.pathLength = -1; // reset path length\n\n    if (!path) {\n      return [];\n    }\n\n    var pathCommands = [];\n    var {\n      pathParser\n    } = path;\n    pathParser.reset(); // convert l, H, h, V, and v to L\n\n    while (!pathParser.isEnd()) {\n      var {\n        current\n      } = pathParser;\n      var startX = current ? current.x : 0;\n      var startY = current ? current.y : 0;\n      var command = pathParser.next();\n      var nextCommandType = command.type;\n      var points = [];\n\n      switch (command.type) {\n        case PathParser.MOVE_TO:\n          this.pathM(pathParser, points);\n          break;\n\n        case PathParser.LINE_TO:\n          nextCommandType = this.pathL(pathParser, points);\n          break;\n\n        case PathParser.HORIZ_LINE_TO:\n          nextCommandType = this.pathH(pathParser, points);\n          break;\n\n        case PathParser.VERT_LINE_TO:\n          nextCommandType = this.pathV(pathParser, points);\n          break;\n\n        case PathParser.CURVE_TO:\n          this.pathC(pathParser, points);\n          break;\n\n        case PathParser.SMOOTH_CURVE_TO:\n          nextCommandType = this.pathS(pathParser, points);\n          break;\n\n        case PathParser.QUAD_TO:\n          this.pathQ(pathParser, points);\n          break;\n\n        case PathParser.SMOOTH_QUAD_TO:\n          nextCommandType = this.pathT(pathParser, points);\n          break;\n\n        case PathParser.ARC:\n          points = this.pathA(pathParser);\n          break;\n\n        case PathParser.CLOSE_PATH:\n          PathElement.pathZ(pathParser);\n          break;\n      }\n\n      if (command.type !== PathParser.CLOSE_PATH) {\n        pathCommands.push({\n          type: nextCommandType,\n          points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, nextCommandType, points)\n        });\n      } else {\n        pathCommands.push({\n          type: PathParser.CLOSE_PATH,\n          points: [],\n          pathLength: 0\n        });\n      }\n    }\n\n    return pathCommands;\n  }\n\n  pathM(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathM(pathParser).point;\n    points.push(x, y);\n  }\n\n  pathL(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathL(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathH(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathH(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathV(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathV(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathC(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n\n  pathS(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.CURVE_TO;\n  }\n\n  pathQ(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n\n  pathT(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.QUAD_TO;\n  }\n\n  pathA(pathParser) {\n    var {\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser);\n\n    if (sweepFlag === 0 && ad > 0) {\n      ad -= 2 * Math.PI;\n    }\n\n    if (sweepFlag === 1 && ad < 0) {\n      ad += 2 * Math.PI;\n    }\n\n    return [centp.x, centp.y, rX, rY, a1, ad, xAxisRotation, sweepFlag];\n  }\n\n  calcLength(x, y, commandType, points) {\n    var len = 0;\n    var p1 = null;\n    var p2 = null;\n    var t = 0;\n\n    switch (commandType) {\n      case PathParser.LINE_TO:\n        return this.getLineLength(x, y, points[0], points[1]);\n\n      case PathParser.CURVE_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case PathParser.QUAD_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case PathParser.ARC:\n        {\n          // Approximates by breaking curve into line segments\n          len = 0.0;\n          var start = points[4]; // 4 = theta\n\n          var dTheta = points[5]; // 5 = dTheta\n\n          var end = points[4] + dTheta;\n          var inc = Math.PI / 180.0; // 1 degree resolution\n\n          if (Math.abs(start - end) < inc) {\n            inc = Math.abs(start - end);\n          } // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n\n\n          p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n          if (dTheta < 0) {\n            // clockwise\n            for (t = start - inc; t > end; t -= inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          } else {\n            // counter-clockwise\n            for (t = start + inc; t < end; t += inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          }\n\n          p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          return len;\n        }\n    }\n\n    return 0;\n  }\n\n  getPointOnLine(dist, p1x, p1y, p2x, p2y) {\n    var fromX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : p1x;\n    var fromY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : p1y;\n    var m = (p2y - p1y) / (p2x - p1x + PSEUDO_ZERO);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (p2x < p1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt = null;\n\n    if (p2x === p1x) {\n      // vertical line\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - p1y) / (fromX - p1x + PSEUDO_ZERO) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix = 0;\n      var iy = 0;\n      var len = this.getLineLength(p1x, p1y, p2x, p2y);\n\n      if (len < PSEUDO_ZERO) {\n        return null;\n      }\n\n      var u = (fromX - p1x) * (p2x - p1x) + (fromY - p1y) * (p2y - p1y);\n      u /= len * len;\n      ix = p1x + u * (p2x - p1x);\n      iy = p1y + u * (p2y - p1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (p2x < p1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  }\n\n  getPointOnPath(distance) {\n    var fullLen = this.getPathLength();\n    var cumulativePathLength = 0;\n    var p = null;\n\n    if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n      return null;\n    }\n\n    var {\n      dataArray\n    } = this;\n\n    for (var command of dataArray) {\n      if (command && (command.pathLength < 0.00005 || cumulativePathLength + command.pathLength + 0.00005 < distance)) {\n        cumulativePathLength += command.pathLength;\n        continue;\n      }\n\n      var delta = distance - cumulativePathLength;\n      var currentT = 0;\n\n      switch (command.type) {\n        case PathParser.LINE_TO:\n          p = this.getPointOnLine(delta, command.start.x, command.start.y, command.points[0], command.points[1], command.start.x, command.start.y);\n          break;\n\n        case PathParser.ARC:\n          {\n            var start = command.points[4]; // 4 = theta\n\n            var dTheta = command.points[5]; // 5 = dTheta\n\n            var end = command.points[4] + dTheta;\n            currentT = start + delta / command.pathLength * dTheta;\n\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              break;\n            }\n\n            p = this.getPointOnEllipticalArc(command.points[0], command.points[1], command.points[2], command.points[3], currentT, command.points[6]);\n            break;\n          }\n\n        case PathParser.CURVE_TO:\n          currentT = delta / command.pathLength;\n\n          if (currentT > 1) {\n            currentT = 1;\n          }\n\n          p = this.getPointOnCubicBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3], command.points[4], command.points[5]);\n          break;\n\n        case PathParser.QUAD_TO:\n          currentT = delta / command.pathLength;\n\n          if (currentT > 1) {\n            currentT = 1;\n          }\n\n          p = this.getPointOnQuadraticBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3]);\n          break;\n      }\n\n      if (p) {\n        return p;\n      }\n\n      break;\n    }\n\n    return null;\n  }\n\n  getLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  getPathLength() {\n    if (this.pathLength === -1) {\n      this.pathLength = this.dataArray.reduce((length, command) => command.pathLength > 0 ? length + command.pathLength : length, 0);\n    }\n\n    return this.pathLength;\n  }\n\n  getPointOnCubicBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    var x = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct);\n    var y = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct);\n    return {\n      x,\n      y\n    };\n  }\n\n  getPointOnQuadraticBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y) {\n    var x = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct);\n    var y = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct);\n    return {\n      x,\n      y\n    };\n  }\n\n  getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi);\n    var sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  } // TODO need some optimisations. possibly build cache only for curved segments?\n\n\n  buildEquidistantCache(inputStep, inputPrecision) {\n    var fullLen = this.getPathLength();\n    var precision = inputPrecision || 0.25; // accuracy vs performance\n\n    var step = inputStep || fullLen / 100;\n\n    if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n      // Prepare cache\n      this.equidistantCache = {\n        step,\n        precision,\n        points: []\n      }; // Calculate points\n\n      var s = 0;\n\n      for (var l = 0; l <= fullLen; l += precision) {\n        var p0 = this.getPointOnPath(l);\n        var p1 = this.getPointOnPath(l + precision);\n\n        if (!p0 || !p1) {\n          continue;\n        }\n\n        s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n\n        if (s >= step) {\n          this.equidistantCache.points.push({\n            x: p0.x,\n            y: p0.y,\n            distance: l\n          });\n          s -= step;\n        }\n      }\n    }\n  }\n\n  getEquidistantPointOnPath(targetDistance, step, precision) {\n    this.buildEquidistantCache(step, precision);\n\n    if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n      return null;\n    }\n\n    var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n    return this.equidistantCache.points[idx] || null;\n  }\n\n}\n\nvar dataUriRegex = /^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;\nclass ImageElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'image';\n    this.loaded = false;\n    var href = this.getHrefAttribute().getString();\n\n    if (!href) {\n      return;\n    }\n\n    var isSvg = href.endsWith('.svg') || /^\\s*data:image\\/svg\\+xml/i.test(href);\n    document.images.push(this);\n\n    if (!isSvg) {\n      void this.loadImage(href);\n    } else {\n      void this.loadSvg(href);\n    }\n\n    this.isSvg = isSvg;\n  }\n\n  loadImage(href) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        var image = yield _this.document.createImage(href);\n        _this.image = image;\n      } catch (err) {\n        console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n      }\n\n      _this.loaded = true;\n    })();\n  }\n\n  loadSvg(href) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var match = dataUriRegex.exec(href);\n\n      if (match) {\n        var data = match[5];\n\n        if (match[4] === 'base64') {\n          _this2.image = atob(data);\n        } else {\n          _this2.image = decodeURIComponent(data);\n        }\n      } else {\n        try {\n          var response = yield _this2.document.fetch(href);\n          var svg = yield response.text();\n          _this2.image = svg;\n        } catch (err) {\n          console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n        }\n      }\n\n      _this2.loaded = true;\n    })();\n  }\n\n  renderChildren(ctx) {\n    var {\n      document,\n      image,\n      loaded\n    } = this;\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n\n    if (!loaded || !image || !width || !height) {\n      return;\n    }\n\n    ctx.save();\n    ctx.translate(x, y);\n\n    if (this.isSvg) {\n      var subDocument = document.canvg.forkString(ctx, this.image, {\n        ignoreMouse: true,\n        ignoreAnimation: true,\n        ignoreDimensions: true,\n        ignoreClear: true,\n        offsetX: 0,\n        offsetY: 0,\n        scaleWidth: width,\n        scaleHeight: height\n      });\n      subDocument.document.documentElement.parent = this;\n      void subDocument.render();\n    } else {\n      var _image = this.image;\n      document.setViewBox({\n        ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width,\n        desiredWidth: _image.width,\n        height,\n        desiredHeight: _image.height\n      });\n\n      if (this.loaded) {\n        if (typeof _image.complete === 'undefined' || _image.complete) {\n          ctx.drawImage(_image, 0, 0);\n        }\n      }\n    }\n\n    ctx.restore();\n  }\n\n  getBoundingBox() {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n\n}\n\nclass SymbolElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'symbol';\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\n\nclass SVGFontLoader {\n  constructor(document) {\n    this.document = document;\n    this.loaded = false;\n    document.fonts.push(this);\n  }\n\n  load(fontFamily, url) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        var {\n          document\n        } = _this;\n        var svgDocument = yield document.canvg.parser.load(url);\n        var fonts = svgDocument.getElementsByTagName('font');\n        Array.from(fonts).forEach(fontNode => {\n          var font = document.createElement(fontNode);\n          document.definitions[fontFamily] = font;\n        });\n      } catch (err) {\n        console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), err);\n      }\n\n      _this.loaded = true;\n    })();\n  }\n\n}\n\nclass StyleElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'style';\n    var css = compressSpaces(Array.from(node.childNodes) // NEED TEST\n    .map(_ => _.textContent).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n    .replace(/@import.*;/g, '') // remove imports\n    );\n    var cssDefs = css.split('}');\n    cssDefs.forEach(_ => {\n      var def = _.trim();\n\n      if (!def) {\n        return;\n      }\n\n      var cssParts = def.split('{');\n      var cssClasses = cssParts[0].split(',');\n      var cssProps = cssParts[1].split(';');\n      cssClasses.forEach(_ => {\n        var cssClass = _.trim();\n\n        if (!cssClass) {\n          return;\n        }\n\n        var props = document.styles[cssClass] || {};\n        cssProps.forEach(cssProp => {\n          var prop = cssProp.indexOf(':');\n          var name = cssProp.substr(0, prop).trim();\n          var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n\n          if (name && value) {\n            props[name] = new Property(document, name, value);\n          }\n        });\n        document.styles[cssClass] = props;\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\n\n        if (cssClass === '@font-face') {\n          //  && !nodeEnv\n          var fontFamily = props['font-family'].getString().replace(/\"|'/g, '');\n          var srcs = props.src.getString().split(',');\n          srcs.forEach(src => {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              var url = parseExternalUrl(src);\n\n              if (url) {\n                void new SVGFontLoader(document).load(fontFamily, url);\n              }\n            }\n          });\n        }\n      });\n    });\n  }\n\n}\nStyleElement.parseExternalUrl = parseExternalUrl;\n\nclass UseElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'use';\n  }\n\n  setContext(ctx) {\n    super.setContext(ctx);\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n\n    if (xAttr.hasValue()) {\n      ctx.translate(xAttr.getPixels('x'), 0);\n    }\n\n    if (yAttr.hasValue()) {\n      ctx.translate(0, yAttr.getPixels('y'));\n    }\n  }\n\n  path(ctx) {\n    var {\n      element\n    } = this;\n\n    if (element) {\n      element.path(ctx);\n    }\n  }\n\n  renderChildren(ctx) {\n    var {\n      document,\n      element\n    } = this;\n\n    if (element) {\n      var tempSvg = element;\n\n      if (element.type === 'symbol') {\n        // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n        tempSvg = new SVGElement(document, null);\n        tempSvg.attributes.viewBox = new Property(document, 'viewBox', element.getAttribute('viewBox').getString());\n        tempSvg.attributes.preserveAspectRatio = new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString());\n        tempSvg.attributes.overflow = new Property(document, 'overflow', element.getAttribute('overflow').getString());\n        tempSvg.children = element.children; // element is still the parent of the children\n\n        element.styles.opacity = new Property(document, 'opacity', this.calculateOpacity());\n      }\n\n      if (tempSvg.type === 'svg') {\n        var widthStyle = this.getStyle('width', false, true);\n        var heightStyle = this.getStyle('height', false, true); // if symbol or svg, inherit width/height from me\n\n        if (widthStyle.hasValue()) {\n          tempSvg.attributes.width = new Property(document, 'width', widthStyle.getString());\n        }\n\n        if (heightStyle.hasValue()) {\n          tempSvg.attributes.height = new Property(document, 'height', heightStyle.getString());\n        }\n      }\n\n      var oldParent = tempSvg.parent;\n      tempSvg.parent = this;\n      tempSvg.render(ctx);\n      tempSvg.parent = oldParent;\n    }\n  }\n\n  getBoundingBox(ctx) {\n    var {\n      element\n    } = this;\n\n    if (element) {\n      return element.getBoundingBox(ctx);\n    }\n\n    return null;\n  }\n\n  elementTransform() {\n    var {\n      document,\n      element\n    } = this;\n    return Transform.fromElement(document, element);\n  }\n\n  get element() {\n    if (!this.cachedElement) {\n      this.cachedElement = this.getHrefAttribute().getDefinition();\n    }\n\n    return this.cachedElement;\n  }\n\n}\n\nfunction imGet(img, x, y, width, _height, rgba) {\n  return img[y * width * 4 + x * 4 + rgba];\n}\n\nfunction imSet(img, x, y, width, _height, rgba, val) {\n  img[y * width * 4 + x * 4 + rgba] = val;\n}\n\nfunction m(matrix, i, v) {\n  var mi = matrix[i];\n  return mi * v;\n}\n\nfunction c(a, m1, m2, m3) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\n\nclass FeColorMatrixElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feColorMatrix';\n    var matrix = toNumbers(this.getAttribute('values').getString());\n\n    switch (this.getAttribute('type').getString('matrix')) {\n      // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate':\n        {\n          var s = matrix[0];\n          /* eslint-disable array-element-newline */\n\n          matrix = [0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n\n      case 'hueRotate':\n        {\n          var a = matrix[0] * Math.PI / 180.0;\n          /* eslint-disable array-element-newline */\n\n          matrix = [c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0, c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0, c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n\n      case 'luminanceToAlpha':\n        /* eslint-disable array-element-newline */\n        matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];\n        /* eslint-enable array-element-newline */\n\n        break;\n    }\n\n    this.matrix = matrix;\n    this.includeOpacity = this.getAttribute('includeOpacity').hasValue();\n  }\n\n  apply(ctx, _x, _y, width, height) {\n    // assuming x==0 && y==0 for now\n    var {\n      includeOpacity,\n      matrix\n    } = this;\n    var srcData = ctx.getImageData(0, 0, width, height);\n\n    for (var y = 0; y < height; y++) {\n      for (var x = 0; x < width; x++) {\n        var r = imGet(srcData.data, x, y, width, height, 0);\n        var g = imGet(srcData.data, x, y, width, height, 1);\n        var b = imGet(srcData.data, x, y, width, height, 2);\n        var a = imGet(srcData.data, x, y, width, height, 3);\n        var nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n        var ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n        var nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n        var na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n\n        if (includeOpacity) {\n          nr = 0;\n          ng = 0;\n          nb = 0;\n          na *= a / 255;\n        }\n\n        imSet(srcData.data, x, y, width, height, 0, nr);\n        imSet(srcData.data, x, y, width, height, 1, ng);\n        imSet(srcData.data, x, y, width, height, 2, nb);\n        imSet(srcData.data, x, y, width, height, 3, na);\n      }\n    }\n\n    ctx.clearRect(0, 0, width, height);\n    ctx.putImageData(srcData, 0, 0);\n  }\n\n}\n\nclass MaskElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'mask';\n  }\n\n  apply(ctx, element) {\n    var {\n      document\n    } = this; // render as temp svg\n\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n\n    if (!width && !height) {\n      var boundingBox = new BoundingBox();\n      this.children.forEach(child => {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n      });\n      x = Math.floor(boundingBox.x1);\n      y = Math.floor(boundingBox.y1);\n      width = Math.floor(boundingBox.width);\n      height = Math.floor(boundingBox.height);\n    }\n\n    var ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n    var maskCanvas = document.createCanvas(x + width, y + height);\n    var maskCtx = maskCanvas.getContext('2d');\n    document.screen.setDefaults(maskCtx);\n    this.renderChildren(maskCtx); // convert mask to alpha with a fake node\n    // TODO: refactor out apply from feColorMatrix\n\n    new FeColorMatrixElement(document, {\n      nodeType: 1,\n      childNodes: [],\n      attributes: [{\n        nodeName: 'type',\n        value: 'luminanceToAlpha'\n      }, {\n        nodeName: 'includeOpacity',\n        value: 'true'\n      }]\n    }).apply(maskCtx, 0, 0, x + width, y + height);\n    var tmpCanvas = document.createCanvas(x + width, y + height);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    element.render(tmpCtx);\n    tmpCtx.globalCompositeOperation = 'destination-in';\n    tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n    tmpCtx.fillRect(0, 0, x + width, y + height);\n    ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n    ctx.fillRect(0, 0, x + width, y + height); // reassign mask\n\n    this.restoreStyles(element, ignoredStyles);\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\nMaskElement.ignoreStyles = ['mask', 'transform', 'clip-path'];\n\nvar noop = () => {// NOOP\n};\n\nclass ClipPathElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'clipPath';\n  }\n\n  apply(ctx) {\n    var {\n      document\n    } = this;\n    var contextProto = Reflect.getPrototypeOf(ctx);\n    var {\n      beginPath,\n      closePath\n    } = ctx;\n\n    if (contextProto) {\n      contextProto.beginPath = noop;\n      contextProto.closePath = noop;\n    }\n\n    Reflect.apply(beginPath, ctx, []);\n    this.children.forEach(child => {\n      if (typeof child.path === 'undefined') {\n        return;\n      }\n\n      var transform = typeof child.elementTransform !== 'undefined' ? child.elementTransform() : null; // handle <use />\n\n      if (!transform) {\n        transform = Transform.fromElement(document, child);\n      }\n\n      if (transform) {\n        transform.apply(ctx);\n      }\n\n      child.path(ctx);\n\n      if (contextProto) {\n        contextProto.closePath = closePath;\n      }\n\n      if (transform) {\n        transform.unapply(ctx);\n      }\n    });\n    Reflect.apply(closePath, ctx, []);\n    ctx.clip();\n\n    if (contextProto) {\n      contextProto.beginPath = beginPath;\n      contextProto.closePath = closePath;\n    }\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\n\nclass FilterElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'filter';\n  }\n\n  apply(ctx, element) {\n    // render as temp svg\n    var {\n      document,\n      children\n    } = this;\n    var boundingBox = element.getBoundingBox(ctx);\n\n    if (!boundingBox) {\n      return;\n    }\n\n    var px = 0;\n    var py = 0;\n    children.forEach(child => {\n      var efd = child.extraFilterDistance || 0;\n      px = Math.max(px, efd);\n      py = Math.max(py, efd);\n    });\n    var width = Math.floor(boundingBox.width);\n    var height = Math.floor(boundingBox.height);\n    var tmpCanvasWidth = width + 2 * px;\n    var tmpCanvasHeight = height + 2 * py;\n\n    if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n      return;\n    }\n\n    var x = Math.floor(boundingBox.x);\n    var y = Math.floor(boundingBox.y);\n    var ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n    var tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    tmpCtx.translate(-x + px, -y + py);\n    element.render(tmpCtx); // apply filters\n\n    children.forEach(child => {\n      if (typeof child.apply === 'function') {\n        child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n      }\n    }); // render on me\n\n    ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n    this.restoreStyles(element, ignoredStyles);\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\nFilterElement.ignoreStyles = ['filter', 'transform', 'clip-path'];\n\nclass FeDropShadowElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feDropShadow';\n    this.addStylesFromStyleDefinition();\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeMorphologyElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feMorphology';\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeCompositeElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feComposite';\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeGaussianBlurElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feGaussianBlur';\n    this.blurRadius = Math.floor(this.getAttribute('stdDeviation').getNumber());\n    this.extraFilterDistance = this.blurRadius;\n  }\n\n  apply(ctx, x, y, width, height) {\n    var {\n      document,\n      blurRadius\n    } = this;\n    var body = document.window ? document.window.document.body : null;\n    var canvas = ctx.canvas; // StackBlur requires canvas be on document\n\n    canvas.id = document.getUniqueId();\n\n    if (body) {\n      canvas.style.display = 'none';\n      body.appendChild(canvas);\n    }\n\n    canvasRGBA(canvas, x, y, width, height, blurRadius);\n\n    if (body) {\n      body.removeChild(canvas);\n    }\n  }\n\n}\n\nclass TitleElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'title';\n  }\n\n}\n\nclass DescElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'desc';\n  }\n\n}\n\nvar elements = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction createCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n\nfunction createImage(_x) {\n  return _createImage.apply(this, arguments);\n}\n\nfunction _createImage() {\n  _createImage = _asyncToGenerator(function* (src) {\n    var anonymousCrossOrigin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var image = document.createElement('img');\n\n    if (anonymousCrossOrigin) {\n      image.crossOrigin = 'Anonymous';\n    }\n\n    return new Promise((resolve, reject) => {\n      image.onload = () => {\n        resolve(image);\n      };\n\n      image.onerror = (_event, _source, _lineno, _colno, error) => {\n        reject(error);\n      };\n\n      image.src = src;\n    });\n  });\n  return _createImage.apply(this, arguments);\n}\n\nclass Document {\n  constructor(canvg) {\n    var {\n      rootEmSize = 12,\n      emSize = 12,\n      createCanvas = Document.createCanvas,\n      createImage = Document.createImage,\n      anonymousCrossOrigin\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.canvg = canvg;\n    this.definitions = Object.create(null);\n    this.styles = Object.create(null);\n    this.stylesSpecificity = Object.create(null);\n    this.images = [];\n    this.fonts = [];\n    this.emSizeStack = [];\n    this.uniqueId = 0;\n    this.screen = canvg.screen;\n    this.rootEmSize = rootEmSize;\n    this.emSize = emSize;\n    this.createCanvas = createCanvas;\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin);\n    this.screen.wait(this.isImagesLoaded.bind(this));\n    this.screen.wait(this.isFontsLoaded.bind(this));\n  }\n\n  bindCreateImage(createImage, anonymousCrossOrigin) {\n    if (typeof anonymousCrossOrigin === 'boolean') {\n      return (source, forceAnonymousCrossOrigin) => createImage(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin);\n    }\n\n    return createImage;\n  }\n\n  get window() {\n    return this.screen.window;\n  }\n\n  get fetch() {\n    return this.screen.fetch;\n  }\n\n  get ctx() {\n    return this.screen.ctx;\n  }\n\n  get emSize() {\n    var {\n      emSizeStack\n    } = this;\n    return emSizeStack[emSizeStack.length - 1];\n  }\n\n  set emSize(value) {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.push(value);\n  }\n\n  popEmSize() {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.pop();\n  }\n\n  getUniqueId() {\n    return \"canvg\".concat(++this.uniqueId);\n  }\n\n  isImagesLoaded() {\n    return this.images.every(_ => _.loaded);\n  }\n\n  isFontsLoaded() {\n    return this.fonts.every(_ => _.loaded);\n  }\n\n  createDocumentElement(document) {\n    var documentElement = this.createElement(document.documentElement);\n    documentElement.root = true;\n    documentElement.addStylesFromStyleDefinition();\n    this.documentElement = documentElement;\n    return documentElement;\n  }\n\n  createElement(node) {\n    var elementType = node.nodeName.replace(/^[^:]+:/, '');\n    var ElementType = Document.elementTypes[elementType];\n\n    if (typeof ElementType !== 'undefined') {\n      return new ElementType(this, node);\n    }\n\n    return new UnknownElement(this, node);\n  }\n\n  createTextNode(node) {\n    return new TextNode(this, node);\n  }\n\n  setViewBox(config) {\n    this.screen.setViewBox(_objectSpread$1({\n      document: this\n    }, config));\n  }\n\n}\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elements;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * SVG renderer on canvas.\r\n */\n\nclass Canvg {\n  /**\r\n   * Main constructor.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG Document.\r\n   * @param options - Rendering options.\r\n   */\n  constructor(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.parser = new Parser(options);\n    this.screen = new Screen(ctx, options);\n    this.options = options;\n    var document = new Document(this, options);\n    var documentElement = document.createDocumentElement(svg);\n    this.document = document;\n    this.documentElement = documentElement;\n  }\n  /**\r\n   * Create Canvg instance from SVG source string or URL.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  static from(ctx, svg) {\n    var _arguments = arguments;\n    return _asyncToGenerator(function* () {\n      var options = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : {};\n      var parser = new Parser(options);\n      var svgDocument = yield parser.parse(svg);\n      return new Canvg(ctx, svgDocument, options);\n    })();\n  }\n  /**\r\n   * Create Canvg instance from SVG source string.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  static fromString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var parser = new Parser(options);\n    var svgDocument = parser.parseFromString(svg);\n    return new Canvg(ctx, svgDocument, options);\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  fork(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.from(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  forkString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.fromString(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Document is ready promise.\r\n   * @returns Ready promise.\r\n   */\n\n\n  ready() {\n    return this.screen.ready();\n  }\n  /**\r\n   * Document is ready value.\r\n   * @returns Is ready or not.\r\n   */\n\n\n  isReady() {\n    return this.screen.isReady();\n  }\n  /**\r\n   * Render only first frame, ignoring animations and mouse.\r\n   * @param options - Rendering options.\r\n   */\n\n\n  render() {\n    var _arguments2 = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var options = _arguments2.length > 0 && _arguments2[0] !== undefined ? _arguments2[0] : {};\n\n      _this.start(_objectSpread({\n        enableRedraw: true,\n        ignoreAnimation: true,\n        ignoreMouse: true\n      }, options));\n\n      yield _this.ready();\n\n      _this.stop();\n    })();\n  }\n  /**\r\n   * Start rendering.\r\n   * @param options - Render options.\r\n   */\n\n\n  start() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var {\n      documentElement,\n      screen,\n      options: baseOptions\n    } = this;\n    screen.start(documentElement, _objectSpread(_objectSpread({\n      enableRedraw: true\n    }, baseOptions), options));\n  }\n  /**\r\n   * Stop rendering.\r\n   */\n\n\n  stop() {\n    this.screen.stop();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.documentElement.resize(width, height, preserveAspectRatio);\n  }\n\n}\n\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, Canvg as default, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZXMuanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsifQ==\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };"],"names":["asyncGeneratorStep","n","t","e","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","this","arguments","apply","_next","_throw","toPrimitive","_typeof","Symbol","call","TypeError","String","Number","toPropertyKey","_defineProperty","Object","defineProperty","enumerable","configurable","writable","offscreen","DOMParser","DOMParserFallback","length","undefined","preset","window","ignoreAnimation","ignoreMouse","createCanvas","width","height","OffscreenCanvas","createImage","url","response","fetch","blob","img","createImageBitmap","Reflect","deleteProperty","node","_ref","canvas","loadImage","index","freeze","__proto__","compressSpaces","str","replace","trimLeft","trimRight","toNumbers","matches","match","map","parseFloat","allUppercase","normalizeAttributeName","name","test","toLowerCase","parseExternalUrl","urlMatch","exec","normalizeColor","color","startsWith","rgbParts","normalizedColor","num","isFloat","Math","round","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","selector","regex","getSelectorSpecificity","specificity","currentSelector","delta","join","PSEUDO_ZERO","vectorMagnitude","v","sqrt","pow","vectorsRatio","vectorsAngle","acos","CB1","CB2","CB3","CB4","QB1","QB2","QB3","Property","constructor","document","isNormalizedColor","empty","split","separator","getString","trim","hasValue","zeroIsValue","isString","regexp","result","isUrlDefinition","isPixels","asString","endsWith","setValue","getValue","def","getNumber","getColor","getDpi","getRem","rootEmSize","getEm","emSize","getUnits","getPixels","axisOrIsFontSize","processPercent","axis","isFontSize","viewPort","screen","min","computeSize","max","getMilliseconds","getRadians","PI","getDefinition","definitions","getFillStyleDefinition","element","opacity","createGradient","ctx","createPattern","getHrefAttribute","patternTransform","getAttribute","getTextBaseline","textBaselineMapping","addOpacity","len","commas","ok","alpha","toRGBA","ViewPort","viewPorts","clear","setCurrent","push","removeCurrent","pop","getCurrent","d","Point","x","y","parse","point","defaultValue","parseScale","scale","parsePath","path","points","pathPoints","angleTo","atan2","applyTransform","transform","xp","yp","Mouse","working","events","eventElements","onClick","bind","onMouseMove","isWorking","start","onclick","onmousemove","stop","hasEvents","runEvents","style","cursor","forEach","run","parent","checkPath","_ref2","isPointInPath","checkBoundingBox","boundingBox","_ref3","isPointInBox","mapXY","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","event","clientX","clientY","type","eventTarget","defaultWindow","defaultFetch$1","Screen","FRAMERATE","MAX_VIRTUAL_PIXELS","CLIENT_WIDTH","CLIENT_HEIGHT","mouse","animations","waits","frameDuration","isReadyLock","isFirstRender","intervalId","wait","checker","ready","readyPromise","isReady","every","_","resolveReady","setDefaults","strokeStyle","lineCap","lineJoin","miterLimit","setViewBox","aspectRatio","desiredWidth","desiredHeight","minX","minY","refX","refY","clip","clipX","clipY","cleanAspectRatio","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleX","scaleY","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","translate","scaledClipX","scaledClipY","beginPath","moveTo","lineTo","closePath","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","enableRedraw","ignoreDimensions","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","render","now","Date","tick","shouldUpdate","reduce","animation","update","widthStyle","getStyle","heightStyle","concat","cWidth","clientWidth","cHeight","clientHeight","viewBox","xRatio","yRatio","_widthStyle","isNaN","_heightStyle","transformStyle","clearRect","defaultFetch","DefaultDOMParser","Parser","resource","_this","parseFromString","load","xml","parser","checkDocument","err","parserError","getElementsByTagName","Error","textContent","_this2","text","Translate","unapply","applyToPoint","Rotate","rotate","transformOrigin","angle","originX","originY","cx","cy","numbers","tx","ty","rad","cos","sin","Scale","scaleSize","Matrix","matrix","b","f","g","h","det","Skew","skew","super","SkewX","tan","SkewY","parseTransforms","parseTransform","Transform","transforms","data","TransformType","transformTypes","fromElement","transformOriginXProperty","transformOriginYProperty","skewX","skewY","Element","captureTextNodes","attributes","create","styles","stylesSpecificity","animationFrozen","animationFrozenValue","children","nodeType","Array","from","attribute","nodeName","addStylesFromStyleDefinition","id","childNodes","childNode","addChild","textNode","createTextNode","getText","createIfNotExists","attr","_attr","key","skipAncestors","parentStyle","_style","save","mask","applyEffects","filter","setContext","renderChildren","clearContext","restore","clipPathStyleProp","child","createElement","ignoreChildTypes","includes","matchesSelector","_node$getAttribute","styleClasses","some","styleClass","existingSpecificity","removeStyles","ignoreStyles","toRestore","styleProp","restoreStyles","isFirstChild","_this$parent","indexOf","UnknownElement","wrapFontFamily","fontFamily","trimmed","prepareFontFamily","process","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","fontVariant","fontSize","inherit","inheritFont","font","parts","set","part","variants","weights","toString","BoundingBox","x1","NaN","y1","x2","y2","addPoint","addX","addY","addBoundingBox","sumCubic","p0","p1","p2","p3","bezierCurveAdd","forX","b2ac","t1","t2","addBezierCurve","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","addQuadraticCurve","cp1x","cp1y","cp2x","cp2y","PathParser","control","current","command","commands","previousCommand","angles","reset","isEnd","next","getPoint","xProp","yProp","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","CURVE_TO","SMOOTH_CURVE_TO","QUAD_TO","SMOOTH_QUAD_TO","ox","oy","relative","addMarker","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","j","RenderedElement","modifiedEmSizeStack","calculateOpacity","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","fillStyle","_fillStyle","_fillStyle2","_strokeStyle","_strokeStyle2","strokeWidthStyleProp","newLineWidth","lineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","strokeDasharrayStyleProp","strokeDashoffsetProp","gaps","setLineDash","webkitLineDash","mozDash","offset","lineDashOffset","webkitLineDashOffset","mozDashOffset","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","globalAlpha","popEmSize","PathElement","pathParser","MOVE_TO","pathM","LINE_TO","pathL","HORIZ_LINE_TO","pathH","VERT_LINE_TO","pathV","pathC","pathS","pathQ","pathT","ARC","pathA","CLOSE_PATH","pathZ","getBoundingBox","getMarkers","markers","fillRuleStyleProp","fill","setTransform","stroke","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","marker","_marker","_point","_angle","_marker2","_point2","_angle2","controlPoint","currentPoint","bezierCurveTo","quadraticCurveTo","rX","rY","xRot","lArcFlag","sweepFlag","xAxisRotation","currp","l","s","cpp","centp","a1","ad","dir","ah","halfWay","sx","sy","arc","Boolean","GlyphElement","horizAdvX","unicode","arabicForm","TextElement","measureCache","textBaseline","initializeCoordinates","leafTexts","textChunkStart","POSITIVE_INFINITY","maxX","NEGATIVE_INFINITY","getTElementBoundingBox","adjustChildCoordinatesRecursive","childBoundingBox","getChildBoundingBox","getFontSize","inheritFontSize","measureText","getGlyph","char","glyph","isArabic","prevChar","nextChar","glyphs","maybeGlyph","missingGlyph","getTextFromNode","parentNode","lastIndex","renderChild","renderTElementChildren","renderText","customFont","unitsPerEm","fontFace","ctxFont","isRTL","reverse","dx","lw","fillText","strokeText","applyAnchoring","firstElement","textAnchor","shift","adjustChildCoordinatesRecursiveCore","textParent","adjustChildCoordinates","xAttr","yAttr","dxAttr","dyAttr","getInheritedAttribute","measure","measureTargetText","targetText","_measure","parentAttr","TSpanElement","TextNode","SVGElement","root","_this$node$parentNode","getComputedStyle","getPropertyValue","fontSizeProp","refXAttr","refYAttr","viewBoxAttr","resize","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","RectElement","rxAttr","ryAttr","rx","ry","KAPPA","CircleElement","EllipseElement","LineElement","getPoints","x0","y0","PolylineElement","PolygonElement","PatternElement","parentOpacityProp","patternSvg","patternCanvas","patternCtx","getContext","pattern","MarkerElement","orient","markerUnits","markerSvg","overflow","DefsElement","GElement","GradientElement","attributesToInherit","stops","getGradientUnits","stopsContainer","inheritStopContainer","gradient","getGradient","addParentOpacity","addColorStop","rootView","rect","group","attributeToInherit","colorProp","LinearGradientElement","isBoundingBoxUnits","createLinearGradient","RadialGradientElement","fx","fy","fr","createRadialGradient","StopElement","stopOpacity","stopColor","AnimateElement","duration","initialValue","initialUnits","removed","frozen","begin","maxDuration","to","values","valuesAttr","getProperty","attributeType","attributeName","calcValue","progress","getProgress","newValue","prop","updated","typeAttr","p","lb","floor","ub","ceil","AnimateColorElement","colorFrom","colorTo","AnimateTransformElement","transformFrom","transformTo","FontElement","fontFamilyStyle","FontFaceElement","ascent","descent","MissingGlyphElement","TRefElement","firstChild","AElement","hasText","open","ownKeys$2","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread$2","target","source","getOwnPropertyDescriptors","defineProperties","TextPathElement","textWidth","textHeight","pathLength","glyphInfo","letterSpacingCache","measuresCache","Map","pathElement","dataArray","parsePathData","theta","dTheta","psi","fs","setTextData","textDecoration","rotation","partialText","getLetterSpacingAt","idx","findSegmentToFitChar","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","dy","charI","glyphWidth","splineStep","getEquidistantPointOnPath","segment","dyX","dyY","has","get","chars","thisSpacing","parentSpacing","letterSpacing","textLen","dxSum","acc","cur","getPathLength","startOffset","nextOffset","pathCommands","startX","startY","nextCommandType","calcLength","commandType","getLineLength","getPointOnCubicBezier","getPointOnQuadraticBezier","end","inc","abs","getPointOnEllipticalArc","getPointOnLine","dist","fromX","fromY","m","rise","pt","ix","iy","pRise","pRun","getPointOnPath","distance","fullLen","cumulativePathLength","currentT","pct","p4x","p4y","cosPsi","sinPsi","buildEquidistantCache","inputStep","inputPrecision","precision","step","equidistantCache","targetDistance","dataUriRegex","ImageElement","loaded","href","isSvg","images","loadSvg","image","console","error","atob","decodeURIComponent","svg","subDocument","canvg","forkString","documentElement","_image","complete","drawImage","SymbolElement","SVGFontLoader","fonts","svgDocument","fontNode","StyleElement","css","cssDefs","cssParts","cssClasses","cssProps","cssClass","props","cssProp","substr","srcs","src","UseElement","tempSvg","oldParent","elementTransform","cachedElement","imGet","_height","rgba","imSet","val","mi","m1","m2","m3","FeColorMatrixElement","includeOpacity","_x","_y","srcData","getImageData","nr","ng","nb","na","putImageData","MaskElement","ignoredStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","globalCompositeOperation","fillRect","noop","ClipPathElement","contextProto","getPrototypeOf","FilterElement","px","py","efd","extraFilterDistance","tmpCanvasWidth","tmpCanvasHeight","FeDropShadowElement","_width","FeMorphologyElement","FeCompositeElement","FeGaussianBlurElement","blurRadius","body","getUniqueId","display","appendChild","removeChild","TitleElement","DescElement","ownKeys$1","_objectSpread$1","_createImage","anonymousCrossOrigin","crossOrigin","reject","onload","onerror","_event","_source","_lineno","_colno","Document","emSizeStack","uniqueId","bindCreateImage","isImagesLoaded","isFontsLoaded","forceAnonymousCrossOrigin","createDocumentElement","elementType","ElementType","elementTypes","config","ownKeys","_objectSpread","Canvg","options","_arguments","fromString","fork","_arguments2","baseOptions","_arrayWithHoles","isArray","_iterableToArrayLimit","iterator","_arrayLikeToArray","_unsupportedIterableToArray","arrayLikeToArray","slice","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","prototype"],"sourceRoot":""}