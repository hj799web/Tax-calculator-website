{"version":3,"file":"js/6534.741c9a7b.js","mappings":"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","sources":["webpack://my-new-project/./src/domains/social/components/SocialShareModal.vue","webpack://my-new-project/./src/domains/social/components/SocialShareModal.vue?25f9"],"sourcesContent":["<template>\n  <teleport to=\"body\">\n    <transition name=\"modal\" appear>\n      <div v-if=\"modelValue\" class=\"social-share-modal\" \n           aria-modal=\"true\" role=\"dialog\" \n           tabindex=\"-1\">\n        <!-- Premium Backdrop -->\n        <div \n          class=\"modal-backdrop\"\n          @click=\"$emit('update:modelValue', false)\"\n        ></div>\n        \n        <!-- Modal Container -->\n        <div \n          class=\"modal-container\"\n          :style=\"{\n            width: isMobile ? '90vw' : '80vw',\n            maxWidth: '80rem',\n            maxHeight: '95vh'\n          }\"\n        >\n          <!-- Loading Indicator -->\n          <div v-if=\"props.isLoading\" class=\"loading-overlay\">\n            <div class=\"loading-spinner\"></div>\n            <p class=\"loading-text\">Preparing your budget visualization...</p>\n          </div>\n          <!-- Header -->\n          <div class=\"sticky top-0 w-full bg-white dark:bg-gray-900 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center z-10\">\n            <h2 class=\"text-xl font-semibold\">{{ t('socialShare.title', 'Share Your Budget') }}</h2>\n            <button \n              @click=\"$emit('update:modelValue', false)\"\n              class=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              :aria-label=\"t('socialShare.closeModal', 'Close modal')\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n              </svg>\n            </button>\n          </div>\n\n          <!-- Body Content -->\n          <div class=\"overflow-y-auto\" style=\"max-height: calc(v-bind('modalMaxHeight') - 4rem); overflow-x: hidden;\">\n            <!-- Two Column Layout -->\n            <div class=\"px-6 py-4 md:grid md:grid-cols-2 md:gap-6\">\n              <!-- Left Column: Budget Preview -->\n              <div class=\"social-media-buttons\">\n                <h4 class=\"text-lg font-semibold mb-4\">Share on Social Media</h4>\n                <div class=\"flex flex-col gap-3 mb-6\">\n                  <!-- Link Preview with Detailed Card -->\n                  <div class=\"link-preview-container\" ref=\"socialCardRef\">\n                    <div class=\"link-preview\">\n                      <div class=\"link-preview-header\">\n                        <div class=\"link-preview-icon\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class=\"w-6 h-6\">\n                            <path d=\"M11.7 2.805a.75.75 0 01.6 0A60.65 60.65 0 0122.83 8.72a.75.75 0 01-.231 1.337 49.949 49.949 0 00-9.902 3.912l-.003.002-.34.18a.75.75 0 01-.707 0A50.009 50.009 0 007.5 12.174v-.224c0-.131.067-.248.172-.311a54.614 54.614 0 014.653-2.52.75.75 0 00-.65-1.352 56.129 56.129 0 00-4.78 2.589 1.858 1.858 0 00-.859 1.228 49.803 49.803 0 00-4.634-1.527.75.75 0 01-.231-1.337A60.653 60.653 0 0111.7 2.805z\" />\n                          </svg>\n                        </div>\n                        <div class=\"link-preview-title\">Federal Canadian Budget Simulator</div>\n                      </div>\n                      \n                      <!-- Budget Metrics -->\n                      <div class=\"link-preview-content\">\n                        <div class=\"link-preview-metrics\">\n                          <div class=\"metric\">\n                            <div class=\"metric-label\">Revenue</div>\n                            <div class=\"metric-value\">{{ formatCurrency(effectiveTotalRevenue) }}B</div>\n                          </div>\n                          \n                          <div class=\"metric\" :class=\"effectiveBudgetSurplus >= 0 ? 'positive' : 'negative'\">\n                            <div class=\"metric-label\">{{ effectiveBudgetSurplus >= 0 ? 'Surplus' : 'Deficit' }}</div>\n                            <div class=\"metric-value\">{{ effectiveBudgetSurplus >= 0 ? '+' : '' }}{{ formatCurrency(effectiveBudgetSurplus) }}B</div>\n                          </div>\n                          \n                          <div class=\"metric\">\n                            <div class=\"metric-label\">Debt-to-GDP</div>\n                            <div class=\"metric-value\">{{ effectiveDebtToGdpRatio.toFixed(1) }}%</div>\n                          </div>\n                        </div>\n                        \n                        <!-- Compact Sentiment and Badge Preview -->\n                        <div class=\"compact-preview\">\n                          <!-- Top Positive/Negative Segments -->\n                          <div class=\"compact-segments\">\n                            <div v-if=\"mostPositiveSegments.length > 0\" class=\"compact-segment positive\">\n                              <span class=\"material-icons\">trending_up</span>\n                              <span>{{ mostPositiveSegments[0]?.name }}</span>\n                            </div>\n                            <div v-if=\"mostNegativeSegments.length > 0\" class=\"compact-segment negative\">\n                              <span class=\"material-icons\">trending_down</span>\n                              <span>{{ mostNegativeSegments[0]?.name }}</span>\n                            </div>\n                          </div>\n                          \n                          <!-- Top Badges -->\n                          <div class=\"compact-badges\">\n                            <div v-for=\"badge in effectiveBadges.slice(0, 2)\" :key=\"badge.name\" class=\"compact-badge\">\n                              <span class=\"badge-icon\">{{ badge.icon }}</span>\n                              <span class=\"badge-name\">{{ badge.name }}</span>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div class=\"link-preview-url\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 text-gray-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                            <path fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" />\n                          </svg>\n                          <span>{{ safeHostUrl }}/budget-simulator</span>\n                        </div>\n                      </div>\n                      \n                      <!-- Detailed Budget Sentiment and Badge Card -->\n                      <div class=\"link-preview-detailed-card\">\n                        <h3 class=\"text-xl font-bold mb-3\">Budget Impact Analysis</h3>\n                        <BudgetSentimentBadgeCard :budget-data=\"previewBudgetData\" />\n                      </div>\n                    </div>\n                    \n                    <div class=\"link-preview-description\">\n                      <p>This link will share your budget with the key metrics shown above. Recipients can click the link to see your full budget details.</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- Right Column: Share Options -->\n              <div>\n                <h4 class=\"text-lg font-semibold mb-4\">Share Your Budget</h4>\n                \n                <!-- Social Share Buttons -->\n                <div class=\"flex flex-col gap-3 mb-6\">\n                  <button \n                    @click=\"shareToSocialMedia('twitter')\"\n                    class=\"social-button twitter-button\"\n                    :class=\"{ 'shared': sharedPlatform === 'twitter' }\"\n                  >\n                    <template v-if=\"sharedPlatform === 'twitter'\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                        <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n                      </svg>\n                      Shared on X\n                    </template>\n                    <template v-else>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n                      </svg>\n                      Share on X\n                    </template>\n                  </button>\n                  \n                  <button \n                    @click=\"shareToSocialMedia('facebook')\"\n                    class=\"flex items-center gap-3 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-[var(--color-facebook)] hover:bg-[var(--facebook-hover)]\"\n                    :aria-label=\"t('socialShare.shareOnFacebook', 'Share on Facebook')\"\n                    :title=\"t('socialShare.shareOnFacebookTitle', 'Share your budget on Facebook')\"\n                  >\n                    <template v-if=\"sharedPlatform === 'facebook'\">\n                      <span class=\"material-icons animate-pop\">check_circle</span>\n                      Shared!\n                    </template>\n                    <template v-else>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n                      </svg>\n                      {{ t('socialShare.shareOnFacebook', 'Share on Facebook') }}\n                    </template>\n                  </button>\n                  \n                  <button \n                    @click=\"shareToSocialMedia('linkedin')\"\n                    class=\"flex items-center gap-3 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-[var(--color-linkedin)] hover:bg-[var(--linkedin-hover)]\"\n                    :aria-label=\"t('socialShare.shareOnLinkedIn', 'Share on LinkedIn')\"\n                    :title=\"t('socialShare.shareOnLinkedInTitle', 'Share your budget on LinkedIn')\"\n                  >\n                    <template v-if=\"sharedPlatform === 'linkedin'\">\n                      <span class=\"material-icons animate-pop\">check_circle</span>\n                      Shared!\n                    </template>\n                    <template v-else>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"/>\n                      </svg>\n                      {{ t('socialShare.shareOnLinkedIn', 'Share on LinkedIn') }}\n                    </template>\n                  </button>\n                  \n                  <button \n                    @click=\"shareToSocialMedia('instagram')\"\n                    class=\"flex items-center gap-3 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 hover:from-purple-600 hover:via-pink-600 hover:to-orange-600\"\n                    :aria-label=\"t('socialShare.shareOnInstagram', 'Share on Instagram')\"\n                    :title=\"t('socialShare.shareOnInstagramTitle', 'Share your budget on Instagram')\"\n                  >\n                    <template v-if=\"sharedPlatform === 'instagram'\">\n                      <span class=\"material-icons animate-pop\">check_circle</span>\n                      Shared!\n                    </template>\n                    <template v-else>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z\"/>\n                      </svg>\n                      {{ t('socialShare.shareOnInstagram', 'Share on Instagram') }}\n                    </template>\n                  </button>\n                </div>\n                \n                <!-- Download & Copy Buttons -->\n                <div class=\"flex flex-col sm:flex-row gap-3\">\n                  <button \n                    @click=\"downloadImage\"\n                    class=\"flex items-center justify-center gap-2 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-emerald-600 hover:bg-emerald-700\"\n                    :aria-label=\"t('socialShare.downloadBudgetImage', 'Download budget image')\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fill-rule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n                    </svg>\n                    {{ t('socialShare.downloadBudgetImage', 'Download Image') }}\n                  </button>\n                  \n                  <button \n                    @click=\"copyLink\"\n                    class=\"flex items-center justify-center gap-2 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-blue-600 hover:bg-blue-700\"\n                    :aria-label=\"t('socialShare.copyLinkToShare', 'Copy link to share')\"\n                  >\n                    <template v-if=\"linkCopied\">\n                      <span class=\"material-icons animate-pop\">check_circle</span>\n                      {{ t('socialShare.copied', 'Copied!') }}\n                    </template>\n                    <template v-else>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                        <path fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" />\n                      </svg>\n                      {{ t('socialShare.copyLinkToShare', 'Copy Link') }}\n                    </template>\n                  </button>\n                  \n                  <button \n                    @click=\"copyImage\"\n                    class=\"flex items-center justify-center gap-2 px-5 py-3 rounded-lg text-white transition-all hover:scale-105 bg-purple-600 hover:bg-purple-700\"\n                    :aria-label=\"t('socialShare.copyImageToClipboard', 'Copy image to clipboard')\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" />\n                      <path d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" />\n                    </svg>\n                    {{ t('socialShare.copyImageToClipboard', 'Copy to Clipboard') }}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </teleport>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport html2canvas from 'html2canvas';\nimport BudgetSentimentBadgeCard from '@/domains/badges/components/BudgetSentimentBadgeCard.vue';\nimport { useBudgetSimulatorStore } from '@/domains/budget';\nimport { handleError } from '@/utils/errorHandler.js';\nimport { useI18n } from '@/i18n';\n\nconst { t } = useI18n();\n\n// Build previewBudgetData from current store/computed values\nconst previewBudgetData = computed(() => ({\n  sentiment: budgetStore.sentimentAnalysis?.overall || 3,\n  surplus: effectiveBudgetSurplus.value,\n  revenue: effectiveTotalRevenue.value,\n  debt: effectiveDebtToGdpRatio.value,\n  badges: props.earnedBadges || effectiveBadges.value.slice(0, 3),\n  positiveSegments: props.sentimentScores ? getSentimentSegments(props.sentimentScores, true) : mostPositiveSegments.value,\n  negativeSegments: props.sentimentScores ? getSentimentSegments(props.sentimentScores, false) : mostNegativeSegments.value,\n  fiscalChaos: props.fiscalChaos || false\n}));\n\n// Helper function to extract sentiment segments from sentiment scores\nfunction getSentimentSegments(sentimentScores, isPositive) {\n  if (!sentimentScores) return [];\n  \n  // Collect all segments from different categories\n  const allSegments = [];\n  \n  // Process provinces\n  if (sentimentScores.provinces) {\n    Object.entries(sentimentScores.provinces).forEach(([name, score]) => {\n      allSegments.push({ name, score, category: 'provinces' });\n    });\n  }\n  \n  // Process demographics\n  if (sentimentScores.demographics) {\n    Object.entries(sentimentScores.demographics).forEach(([name, score]) => {\n      // Format demographic names for better display\n      const formattedName = name.replace(/([A-Z])/g, ' $1')\n        .replace(/^./, str => str.toUpperCase())\n        .trim();\n      allSegments.push({ name: formattedName, score, category: 'demographics' });\n    });\n  }\n  \n  // Process sectors\n  if (sentimentScores.sectors) {\n    Object.entries(sentimentScores.sectors).forEach(([name, score]) => {\n      // Format sector names for better display\n      const formattedName = name.replace(/([A-Z])/g, ' $1')\n        .replace(/^./, str => str.toUpperCase())\n        .trim();\n      allSegments.push({ name: formattedName, score, category: 'sectors' });\n    });\n  }\n  \n  // Sort and filter segments based on score\n  return allSegments\n    .sort((a, b) => isPositive ? b.score - a.score : a.score - b.score)\n    .slice(0, 5)\n    .filter(segment => isPositive ? segment.score > 3 : segment.score < 3);\n}\n\n// Access the budget store for current data\nconst budgetStore = useBudgetSimulatorStore();\n\n// Setup reactive variables\n\nconst props = defineProps({\n  modelValue: { type: Boolean, default: false },\n  budgetSurplus: { type: Number, default: 0 },\n  debtToGdpRatio: { type: Number, default: 0 },\n  totalRevenue: { type: Number, default: 0 },\n  totalSpending: { type: Number, default: 0 },\n  badges: { type: Array, default: () => [] },\n  shareUrl: { type: String, default: window.location.href },\n  shareTitle: { type: String, default: 'Check out my budget!' },\n  // Add missing props that were causing warnings\n  sentimentScores: { type: Object, default: () => ({}) },\n  earnedBadges: { type: Array, default: () => [] },\n  fiscalChaos: { type: Boolean, default: false },\n  isLoading: { type: Boolean, default: false }\n});\n\n// References and state\nconst socialCardRef = ref(null);\nconst windowWidth = ref(window.innerWidth);\nconst windowHeight = ref(window.innerHeight);\nconst isMobile = computed(() => windowWidth.value < 768);\nconst sharedPlatform = ref(null);\nconst linkCopied = ref(false);\nconst modalMaxHeight = ref(window.innerHeight);\n// eslint-disable-next-line no-unused-vars\nconst cardSize = ref({ width: 0, height: 0 });\n\n// Ensure chart renders properly before html2canvas capture\nconst isGenerating = ref(false);\n// eslint-disable-next-line no-unused-vars\nconst chartRendered = ref(false);\n\n// Track which card type to display (regular or story)\n// eslint-disable-next-line no-unused-vars\nconst cardType = ref('regular');\n\n// Create computed versions of the props that fallback to store data if props are zero\nconst effectiveBudgetSurplus = computed(() => {\n  return props.budgetSurplus || budgetStore.surplus || 0;\n});\n\nconst effectiveDebtToGdpRatio = computed(() => {\n  return props.debtToGdpRatio || (budgetStore.fiscalIndicators?.debtToGdpRatio) || 0;\n});\n\nconst effectiveTotalRevenue = computed(() => {\n  return props.totalRevenue || budgetStore.totalRevenue || 0;\n});\n\n// eslint-disable-next-line no-unused-vars\nconst effectiveTotalSpending = computed(() => {\n  return props.totalSpending || budgetStore.totalSpending || 0;\n});\n\nconst effectiveBadges = computed(() => {\n  return props.badges || [];\n});\n\n// Utility functions for sentiment data validation\n/**\n * Validates and normalizes segment data to ensure it has the correct structure\n * @param {Array} segments - Array of segment objects from sentiment analysis\n * @returns {Array} - Normalized array of segments with valid properties\n */\nfunction validateSegments(segments) {\n  if (!Array.isArray(segments)) return [];\n  \n  return segments.map(seg => ({\n    name: typeof seg?.name === 'string' ? seg.name : 'Unknown',\n    score: typeof seg?.score === 'number' && !isNaN(seg.score) ? seg.score : 0\n  }));\n}\n\n// Safe access to window.location.host\nconst safeHostUrl = computed(() => {\n  return typeof window !== 'undefined' ? window.location.host : 'budgetsimulator.ca';\n});\n\n// Get sentiment data from the store and normalize it\n// eslint-disable-next-line no-unused-vars\nconst mostPositiveSegments = computed(() => {\n  return validateSegments(budgetStore.sentimentAnalysis?.mostPositiveSegments || []).slice(0, 3);\n});\n\n// eslint-disable-next-line no-unused-vars\nconst mostNegativeSegments = computed(() => {\n  return validateSegments(budgetStore.sentimentAnalysis?.mostNegativeSegments || []).slice(0, 3);\n});\n\n// Format currency for display\nconst formatCurrency = (value) => {\n  return new Intl.NumberFormat('en-CA', {\n    minimumFractionDigits: 1,\n    maximumFractionDigits: 1\n  }).format(value);\n};\n\n// Handle window resize\nconst handleResize = () => {\n  windowWidth.value = window.innerWidth;\n  windowHeight.value = window.innerHeight;\n  modalMaxHeight.value = window.innerHeight;\n};\n\n// Add and remove event listeners\nonMounted(() => {\n  window.addEventListener('resize', handleResize);\n  \n  \n  handleResize();\n});\n\nonUnmounted(() => {\n  window.removeEventListener('resize', handleResize);\n  \n  \n});\n\n\n\n// Simplified Instagram sharing with link-based approach\nconst handleInstagramShare = () => {\n  // Create a shareable URL with budget parameters\n  const shareUrl = new URL('/budget-simulator', window.location.origin);\n  \n  // Add high-level budget parameters to the URL\n  shareUrl.searchParams.set('surplus', Number(effectiveBudgetSurplus.value ?? 0).toFixed(1));\n  shareUrl.searchParams.set('debt', Number(effectiveDebtToGdpRatio.value ?? 0).toFixed(1));\n  shareUrl.searchParams.set('revenue', Number(effectiveTotalRevenue.value ?? 0).toFixed(1));\n  \n  // Add all revenue slider positions\n  Object.entries(budgetStore.revenueSources).forEach(([key, source]) => {\n    shareUrl.searchParams.set(`r_${key}`, Number(source.rate ?? 0).toFixed(2));\n  });\n  \n  // Add all spending category slider positions\n  Object.entries(budgetStore.spendingCategories).forEach(([key, category]) => {\n    shareUrl.searchParams.set(`s_${key}`, Number(category.factor ?? 0).toFixed(2));\n  });\n  \n  // Add badge information if available\n  if (effectiveBadges.value.length > 0) {\n    // Include up to 3 badge names\n    const badgeNames = effectiveBadges.value.slice(0, 3).map(badge => badge.name).join(',');\n    shareUrl.searchParams.set('badges', badgeNames);\n  }\n  \n  // Add sentiment data if available\n  if (mostPositiveSegments.value.length > 0) {\n    const positiveData = mostPositiveSegments.value.map(seg => \n      `${encodeURIComponent(seg.name)}:${seg.score.toFixed(1)}`\n    ).join(',');\n    shareUrl.searchParams.set('pos', positiveData);\n  }\n  \n  if (mostNegativeSegments.value.length > 0) {\n    const negativeData = mostNegativeSegments.value.map(seg => \n      `${encodeURIComponent(seg.name)}:${seg.score.toFixed(1)}`\n    ).join(',');\n    shareUrl.searchParams.set('neg', negativeData);\n  }\n  \n  // Create share text with key budget information\n  const shareText = `Check out my Canadian federal budget with ${formatCurrency(effectiveTotalRevenue.value)}B in revenue and a ${effectiveBudgetSurplus.value >= 0 ? 'surplus' : 'deficit'} of ${formatCurrency(Math.abs(effectiveBudgetSurplus.value))}B!`;\n  \n  // Try to use Web Share API first for mobile devices\n  if (navigator.share) {\n    navigator.share({\n      title: 'My Canadian Budget',\n      text: shareText,\n      url: shareUrl.toString()\n    }).then(() => {\n      // Success feedback\n      sharedPlatform.value = 'instagram';\n      setTimeout(() => sharedPlatform.value = null, 2000);\n    }).catch(error => {\n      handleError(error, (msg) => errorMessage.value = msg);\n      // Fallback to opening Instagram\n      openInstagramWithUrl(shareUrl.toString(), shareText);\n    });\n  } else {\n    // Fallback for devices without Web Share API\n    openInstagramWithUrl(shareUrl.toString(), shareText);\n  }\n};\n\n// Helper function to open Instagram with URL\nconst openInstagramWithUrl = (url, text) => {\n  const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n  const isAndroid = /Android/i.test(navigator.userAgent);\n  \n  // Try to open Instagram app\n  \n  if (isIOS || isAndroid) {\n    // Try to open Instagram app\n    window.location.href = `instagram://app`;\n    \n    // Set a timeout to check if Instagram opened\n    setTimeout(() => {\n      if (document.hidden) {\n        // Instagram opened successfully\n        console.log('Instagram opened successfully');\n      } else {\n        // Instagram didn't open, copy to clipboard and show instructions\n        navigator.clipboard.writeText(`${text} ${url}`).then(() => {\n          alert('Text and link copied to clipboard. Open Instagram and paste in your post or story.');\n        }).catch(() => {\n          // If clipboard fails, just show the URL\n          alert(`Share this link on Instagram: ${url}`);\n        });\n      }\n    }, 2000);\n  } else {\n    // Desktop fallback - copy to clipboard\n    navigator.clipboard.writeText(`${text} ${url}`).then(() => {\n      alert('Text and link copied to clipboard. Open Instagram on your mobile device and paste in your post or story.');\n    }).catch(() => {\n      // If clipboard fails, just show the URL\n      alert(`Share this link on Instagram: ${url}`);\n    });\n  }\n};\n\n// Unified social media sharing function with confirmation feedback\nconst shareToSocialMedia = (platform) => {\n  const budgetStatus = effectiveBudgetSurplus.value > 0 ? \n    `Surplus: $${formatCurrency(effectiveBudgetSurplus.value)}B` : \n    `Deficit: $${formatCurrency(Math.abs(effectiveBudgetSurplus.value))}B`;\n  \n  const title = `Check out my Canadian federal budget (${budgetStatus})`;\n  const description = `I created this budget with the Canadian Tax Calculator. ${budgetStatus} with my custom revenue and spending choices.`;\n  const url = props.shareUrl || window.location.href;\n  \n  const urls = {\n    twitter: `https://x.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,\n    facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(description)}`,\n    linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}&summary=${encodeURIComponent(description)}`,\n    instagram: `https://www.instagram.com/?url=${encodeURIComponent(url)}`\n  };\n  \n  if (platform === 'instagram') {\n    // For Instagram, we need a different approach since they don't support direct web sharing\n    handleInstagramShare();\n  } else {\n    window.open(urls[platform], '_blank', 'width=600,height=400');\n  }\n  \n  sharedPlatform.value = platform;\n  setTimeout(() => sharedPlatform.value = null, 2000);\n};\n\n// Copy link to clipboard function\nconst copyLink = async () => {\n  try {\n    const url = props.shareUrl || window.location.href;\n    await navigator.clipboard.writeText(url);\n    linkCopied.value = true;\n    setTimeout(() => linkCopied.value = false, 2000);\n  } catch (err) {\n    handleError(err, (msg) => errorMessage.value = msg);\n    // Fallback for browsers that don't support clipboard API\n    const textArea = document.createElement('textarea');\n    textArea.value = props.shareUrl || window.location.href;\n    textArea.style.position = 'fixed';\n    document.body.appendChild(textArea);\n    textArea.focus();\n    textArea.select();\n    try {\n      document.execCommand('copy');\n      linkCopied.value = true;\n      setTimeout(() => linkCopied.value = false, 2000);\n    } catch (err) {\n      console.error('Fallback: Failed to copy link:', err);\n    }\n    document.body.removeChild(textArea);\n  }\n};\n\n// Calculate percentage with safety check\n// eslint-disable-next-line no-unused-vars\nconst getPercentage = (amount, total) => {\n  if (!total || total === 0) return 0;\n  return (amount / total) * 100;\n};\n\n// Get random color for categories without colors\n// eslint-disable-next-line no-unused-vars\nconst getRandomColor = (seed) => {\n  const colors = [\n    '#4299E1', // blue\n    '#48BB78', // green\n    '#F6AD55', // orange\n    '#9F7AEA', // purple\n    '#F56565', // red\n    '#38B2AC', // teal\n    '#ED8936', // orange-dark\n    '#667EEA', // indigo\n    '#D53F8C', // pink\n    '#718096'  // gray\n  ];\n  \n  return colors[seed % colors.length];\n};\n\n// Image generation and download\nconst generateImage = async () => {\n  if (!socialCardRef.value) return null;\n  \n  try {\n    isGenerating.value = true;\n    \n    const canvas = await html2canvas(socialCardRef.value, {\n      scale: 2, \n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: '#ffffff'\n    });\n    return canvas;\n  } catch (error) {\n    handleError(error, (msg) => errorMessage.value = msg);\n    return null;\n  } finally {\n    isGenerating.value = false;\n  }\n};\n\nconst downloadImage = async () => {\n  const canvas = await generateImage();\n  if (!canvas) return;\n  \n  const link = document.createElement('a');\n  link.download = 'my-budget.png';\n  link.href = canvas.toDataURL('image/png');\n  link.click();\n};\n\nconst copyImage = async () => {\n  try {\n    const canvas = await generateImage();\n    if (!canvas) {\n      console.error('Failed to generate image');\n      return;\n    }\n    \n    canvas.toBlob(async (blob) => {\n      try {\n        const clipboardData = new ClipboardItem({ 'image/png': blob });\n        await navigator.clipboard.write([clipboardData]);\n        alert('Image copied to clipboard!'); \n      } catch (error) {\n        handleError(error, (msg) => errorMessage.value = msg);\n        alert('Failed to copy image to clipboard. Your browser may not support this feature.');\n      }\n    }, 'image/png');\n  } catch (error) {\n    handleError(error, (msg) => errorMessage.value = msg);\n    alert('Failed to copy image to clipboard. Your browser may not support this feature.');\n  }\n};\n\n// Computed property for revenue chart data\n// eslint-disable-next-line no-unused-vars\nconst revenueChartData = computed(() => {\n  const sources = getFilteredSources(budgetStore.revenueSources);\n  return sources.map(source => ({\n    name: source.name,\n    value: parseFloat(source.adjustedAmount.toFixed(1))\n  }));\n});\n\n// Computed property for spending chart data\n// eslint-disable-next-line no-unused-vars\nconst spendingChartData = computed(() => {\n  const categories = getFilteredCategories();\n  return categories.map(category => ({\n    name: category.name,\n    value: parseFloat(category.amount.toFixed(1))\n  }));\n});\n\n// Get filtered categories function\nfunction getFilteredCategories() {\n  if (!budgetStore.spendingCategories) {\n    return getFallbackCategories();\n  }\n  \n  try {\n    // Filter out group categories and very small allocations\n    const filtered = Object.entries(budgetStore.spendingCategories)\n      .filter(([, cat]) => !cat.isGroup && cat.amount > 0)\n      .map(([id, cat]) => ({\n        id,\n        name: cat.name || id,\n        amount: cat.amount,\n        color: cat.color\n      }))\n      .sort((a, b) => b.amount - a.amount)\n      .slice(0, 6); // Take top 6 categories for visibility\n    \n    if (filtered.length === 0) {\n      return getFallbackCategories();\n    }\n    \n    return filtered;\n  } catch (error) {\n    console.error(\"Error filtering spending categories:\", error);\n    return getFallbackCategories();\n  }\n}\n\n// Provide fallback categories when data is missing\nfunction getFallbackCategories() {\n  return [\n    { id: 'healthcare', name: 'Healthcare', amount: 25, color: '#4299E1' },\n    { id: 'education', name: 'Education', amount: 20, color: '#48BB78' },\n    { id: 'defense', name: 'Defense', amount: 15, color: '#F56565' },\n    { id: 'infrastructure', name: 'Infrastructure', amount: 10, color: '#ED8936' },\n    { id: 'socialServices', name: 'Social Services', amount: 18, color: '#9F7AEA' }\n  ];\n}\n\n// Get filtered sources (only sources with significant amounts)\nfunction getFilteredSources(sources) {\n  if (!sources || Object.keys(sources).length === 0) {\n    return getFallbackSources();\n  }\n  \n  try {\n    // Filter and sort revenue sources by amount\n    const filtered = Object.entries(sources)\n      .filter(([, source]) => source.adjustedAmount > 0)\n      .map(([id, source]) => ({\n        id,\n        name: source.name || id,\n        adjustedAmount: source.adjustedAmount,\n        color: source.color\n      }))\n      .sort((a, b) => b.adjustedAmount - a.adjustedAmount)\n      .slice(0, 6); // Take top 6 sources for visibility\n    \n    if (filtered.length === 0) {\n      return getFallbackSources();\n    }\n    \n    return filtered;\n  } catch (error) {\n    console.error(\"Error filtering revenue sources:\", error);\n    return getFallbackSources();\n  }\n}\n\n// Provide fallback revenue sources when data is missing\nfunction getFallbackSources() {\n  return [\n    { id: 'fallbackPIT', name: 'Personal Income Tax', adjustedAmount: 210, color: '#4299E1' },\n    { id: 'fallbackCIT', name: 'Corporate Income Tax', adjustedAmount: 80, color: '#48BB78' },\n    { id: 'fallbackGST', name: 'GST', adjustedAmount: 60, color: '#F56565' },\n    { id: 'fallbackCustoms', name: 'Customs & Duties', adjustedAmount: 30, color: '#ED8936' },\n    { id: 'fallbackOther', name: 'Other Revenue', adjustedAmount: 40, color: '#9F7AEA' }\n  ];\n}\n\nconst errorMessage = ref('');\n</script>\n\n<style scoped>\n:root {\n  --z-modal-backdrop: 9000;\n  --z-modal-content: 9500;\n  --z-debug-info: 10000;\n}\n\n.social-share-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  --color-twitter: #000000;\n  --twitter-hover: #333333;\n  --color-facebook: #4267B2;\n  --facebook-hover: #365899;\n  --color-linkedin: #0077b5;\n  --linkedin-hover: #00669c;\n  --color-instagram-start: #833ab4;\n  --color-instagram-middle: #fd1d1d;\n  --color-instagram-end: #fcb045;\n}\n\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n  backdrop-filter: blur(2px);\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-radius: 50%;\n  border-top-color: var(--color-primary, #2563eb);\n  animation: spin 1s linear infinite;\n  margin-bottom: 16px;\n}\n\n.loading-text {\n  font-size: 1rem;\n  font-weight: 500;\n  color: var(--color-primary, #2563eb);\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Desktop (scale + fade + subtle rise) */\n@media (min-width: 768px) {\n  .modal-enter-active, .modal-leave-active {\n    transition: opacity 240ms ease-out, transform 240ms ease-out;\n  }\n  .modal-enter-from {\n    opacity: 0;\n    transform: scale(0.95) translateY(20px);\n  }\n  .modal-enter-to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n  .modal-leave-to {\n    opacity: 0;\n    transform: scale(0.96) translateY(10px);\n  }\n}\n\n/* Mobile (slide-up only) */\n@media (max-width: 767px) {\n  .modal-enter-active, .modal-leave-active {\n    transition: transform 260ms ease-out, opacity 180ms ease-out;\n  }\n  .modal-enter-from {\n    opacity: 0;\n    transform: translateY(40px);\n  }\n  .modal-enter-to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  .modal-leave-to {\n    opacity: 0;\n    transform: translateY(25px);\n  }\n}\n\n@keyframes pop {\n  0%   { transform: scale(0.8); opacity: 0; }\n  50%  { transform: scale(1.1); opacity: 1; }\n  100% { transform: scale(1); }\n}\n.animate-pop {\n  animation: pop 300ms ease-out;\n}\n\n/* Link preview styles */\n.link-preview-container {\n  width: 100%;\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.link-preview {\n  width: 100%;\n  max-width: 600px;\n  margin: 0 auto;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  background-color: white;\n  transition: all 0.2s ease;\n}\n\n.link-preview:hover {\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n  transform: translateY(-2px);\n}\n\n.link-preview-header {\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  background: linear-gradient(to right, #2563eb, #3b82f6);\n  color: white;\n}\n\n.link-preview-icon {\n  width: 32px;\n  height: 32px;\n  margin-right: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.link-preview-title {\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.link-preview-content {\n  padding: 16px;\n}\n\n.link-preview-metrics {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  flex-wrap: wrap;\n  gap: 12px;\n}\n\n.metric {\n  flex: 1;\n  min-width: 100px;\n  background-color: #f9fafb;\n  padding: 12px;\n  border-radius: 8px;\n  text-align: center;\n}\n\n.metric-label {\n  font-size: 14px;\n  color: #6b7280;\n  margin-bottom: 4px;\n}\n\n.metric-value {\n  font-size: 20px;\n  font-weight: 700;\n  color: #111827;\n}\n\n.metric-value.positive {\n  color: #059669;\n}\n\n.metric-value.negative {\n  color: #dc2626;\n}\n\n.link-preview-badges {\n  margin-bottom: 16px;\n  background-color: #f9fafb;\n  padding: 12px;\n  border-radius: 8px;\n}\n\n.badges-label {\n  font-size: 14px;\n  color: #6b7280;\n  margin-bottom: 8px;\n}\n\n.badges-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.badge-pill {\n  display: flex;\n  align-items: center;\n  background-color: #e0f2fe;\n  padding: 6px 12px;\n  border-radius: 9999px;\n  font-size: 14px;\n}\n\n.badge-icon {\n  margin-right: 6px;\n}\n\n.link-preview-url {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  background-color: #f3f4f6;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #4b5563;\n}\n\n.link-preview-url svg {\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n  color: #6b7280;\n}\n\n.link-preview-description {\n  text-align: center;\n  color: #6b7280;\n  font-size: 14px;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n/* Dark mode support */\n.dark .social-card-container {\n  background-color: #1f2937;\n  border: 1px solid #4b5563;\n}\n\n/* Modal backdrop */\n.modal-backdrop {\n  position: fixed;\n  inset: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.75);\n  backdrop-filter: blur(4px);\n  z-index: var(--z-modal-backdrop);\n}\n\n/* Modal container */\n.modal-container {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: var(--z-modal-content);\n  background-color: white;\n  border-radius: 1rem;\n  border: 1px solid #e5e7eb;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n  max-height: 95vh;\n  height: auto;\n}\n\n.dark .modal-container {\n  background-color: #1f2937;\n  border-color: #4b5563;\n}\n\n/* Social card wrapper */\n.social-card-wrapper {\n  background-color: #f9fafb;\n  border-radius: 0.5rem;\n  padding: 2rem;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  position: relative;\n  min-height: 500px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.dark .social-card-wrapper {\n  background-color: #374151;\n}\n\n\n\n.budget-charts-container {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 15px;\n  background-color: #f8fafc;\n  border-radius: 8px;\n  margin-bottom: 15px;\n}\n\n.revenue-chart,\n.spending-chart {\n  margin-bottom: 15px;\n}\n\n.chart-title {\n  font-size: 14px;\n  font-weight: 600;\n  margin-bottom: 8px;\n  color: #334155;\n}\n\n.chart-bar {\n  display: flex;\n  height: 24px;\n  width: 100%;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.chart-segment {\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  font-size: 10px;\n  overflow: hidden;\n  white-space: nowrap;\n  min-width: 3px;\n}\n\n.segment-label {\n  font-size: 10px;\n  font-weight: 500;\n  text-shadow: 0 0 2px rgba(0,0,0,0.5);\n}\n\n.chart-legend {\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin-top: 8px;\n  gap: 8px;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  margin-right: 8px;\n  margin-bottom: 4px;\n}\n\n.legend-color {\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  margin-right: 4px;\n}\n\n.legend-text {\n  font-size: 10px;\n  color: #475569;\n}\n\n.card-type-toggle {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n\n.toggle-btn {\n  padding: 8px 16px;\n  border: 1px solid #ccc;\n  background: #f5f5f5;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 14px;\n}\n\n.toggle-btn:first-child {\n  border-radius: 4px 0 0 4px;\n}\n\n.toggle-btn:last-child {\n  border-radius: 0 4px 4px 0;\n}\n\n.toggle-btn.active {\n  background: #4285f4;\n  color: white;\n  border-color: #4285f4;\n}\n\n.chart-fallback {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100px;\n  background-color: #f9fafb;\n  border-radius: 8px;\n  color: #6b7280;\n  text-align: center;\n  padding: 1rem;\n  font-size: 0.875rem;\n}\n/* Debug styles */\n.debug-backdrop {\n  border: 5px solid red !important;\n}\n\n.debug-card {\n  border: 5px solid blue !important;\n}\n\n/* Social media icon size fix */\n.modal-container svg {\n  width: 18px;\n  height: 18px;\n}\n\n.debug-container {\n  border: 5px solid green !important;\n}\n\n.debug-info {\n  font-family: monospace;\n  font-size: 12px;\n  line-height: 1.4;\n  max-width: 300px;\n  overflow: auto;\n}\n\n/* Compact sentiment and badge preview styles */\n.compact-preview {\n  padding: 12px 16px;\n  border-bottom: 1px solid #f3f4f6;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.compact-segments {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.compact-segment {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 8px;\n  border-radius: 16px;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n\n.compact-segment.positive {\n  background-color: rgba(16, 185, 129, 0.1);\n  color: #047857;\n}\n\n.compact-segment.negative {\n  background-color: rgba(239, 68, 68, 0.1);\n  color: #b91c1c;\n}\n\n.compact-segment .material-icons {\n  font-size: 1rem;\n}\n\n.compact-badges {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.compact-badge {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background-color: var(--color-badge-bg);\n  color: var(--color-badge-text);\n  padding: 0.25rem 0.5rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  margin-right: 0.5rem;\n  margin-bottom: 0.25rem;\n}\n\n.badge-icon {\n  font-size: 0.875rem;\n}\n\n.badge-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 6rem;\n}\n\n/* Detailed card styles */\n.link-preview-detailed-card {\n  margin-top: 1rem;\n  padding: 1rem;\n  border-top: 1px solid var(--color-border);\n  background-color: var(--color-card-bg, #f9fafb);\n  border-radius: 0.5rem;\n}\n\n.link-preview-detailed-card h3 {\n  color: var(--color-heading, #111827);\n  margin-bottom: 0.75rem;\n}\n</style>\n","import script from \"./SocialShareModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SocialShareModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SocialShareModal.vue?vue&type=style&index=0&id=00c9e110&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00c9e110\"]])\n\nexport default __exports__"],"names":["t","useI18n","previewBudgetData","computed","sentiment","budgetStore","sentimentAnalysis","overall","surplus","effectiveBudgetSurplus","value","revenue","effectiveTotalRevenue","debt","effectiveDebtToGdpRatio","badges","props","earnedBadges","effectiveBadges","slice","positiveSegments","sentimentScores","getSentimentSegments","mostPositiveSegments","negativeSegments","mostNegativeSegments","fiscalChaos","isPositive","allSegments","provinces","Object","entries","forEach","name","score","push","category","demographics","formattedName","replace","str","toUpperCase","trim","sectors","sort","a","b","filter","segment","useBudgetSimulatorStore","__props","socialCardRef","ref","windowWidth","window","innerWidth","windowHeight","innerHeight","isMobile","sharedPlatform","linkCopied","modalMaxHeight","isGenerating","width","height","budgetSurplus","debtToGdpRatio","fiscalIndicators","totalRevenue","totalSpending","validateSegments","segments","Array","isArray","map","seg","isNaN","safeHostUrl","location","host","formatCurrency","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","handleResize","onMounted","addEventListener","onUnmounted","removeEventListener","handleInstagramShare","shareUrl","URL","origin","searchParams","set","Number","toFixed","revenueSources","key","source","rate","spendingCategories","factor","length","badgeNames","badge","join","positiveData","encodeURIComponent","negativeData","shareText","Math","abs","navigator","share","title","text","url","toString","then","setTimeout","catch","error","handleError","msg","errorMessage","openInstagramWithUrl","isIOS","test","userAgent","isAndroid","href","document","hidden","console","log","clipboard","writeText","alert","shareToSocialMedia","platform","budgetStatus","description","urls","twitter","facebook","linkedin","instagram","open","copyLink","async","err","textArea","createElement","style","position","body","appendChild","focus","select","execCommand","removeChild","generateImage","canvas","html2canvas","scale","useCORS","allowTaint","backgroundColor","downloadImage","link","download","toDataURL","click","copyImage","toBlob","clipboardData","ClipboardItem","blob","write","sources","getFilteredSources","parseFloat","adjustedAmount","categories","getFilteredCategories","amount","getFallbackCategories","filtered","cat","isGroup","id","color","keys","getFallbackSources","__exports__"],"sourceRoot":""}