"use strict";(self["webpackChunkTaxCalculator"]=self["webpackChunkTaxCalculator"]||[]).push([[8282],{81540:function(e,t,a){a.d(t,{_:function(){return n}});const n=[{title:"Fiscal Hawk",icon:"ðŸ¦…",tier:"fiscal",explanation:"You balanced the books with minimal tax adjustments.",presetMatch:"balancedBudget",conditions:e=>Math.abs(e.surplus)<=60&&e.totalSpending<=2*e.totalRevenue&&!0},{title:"Austerity Champion",icon:"âœ‚ï¸",tier:"fiscal",explanation:"You cut spending significantly while keeping the budget lean.",presetMatch:"austerityPlan",conditions:e=>e.surplus>1&&e.budgetItems.healthcare<162&&e.budgetItems.childrenAndFamilies<54},{title:"Surplus Architect",icon:"ðŸ’°",tier:"fiscal",explanation:"You generated a surplus through careful fiscal management.",conditions:e=>e.surplus>=1},{title:"Stimulus Commander",icon:"âš¡",tier:"fiscal",explanation:"You ran a deficit to stimulate economic growth.",presetMatch:"progressiveExpansion",conditions:e=>e.surplus<0},{title:"Green Growth Strategist",icon:"ðŸŒ¿",tier:"environmental",explanation:"You prioritized green investment and innovation for a sustainable future.",presetMatch:"progressiveExpansion",conditions:e=>e.budgetItems.environmentAndClimateChange>1.05&&e.surplus<0},{title:"Tax Loophole Closer",icon:"ðŸ”",tier:"fiscal",explanation:"You tightened tax loopholes to secure revenue.",conditions:e=>e.taxExpenditures.deferrals?.adjustmentPercent>=0&&e.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent>=0&&e.surplus>=0},{title:"Equity Champion",icon:"ðŸ¥",tier:"social",explanation:"You prioritized healthcare, education, and family support.",presetMatch:"greenGrowthStimulus",conditions:[e=>e.budgetItems.healthcare>10,e=>e.budgetItems.education>6,e=>e.budgetItems.childrenAndFamilies>6],conditionsType:"or"},{title:"Social Safety Weaver",icon:"ðŸ§¶",tier:"social",explanation:"You strengthened the safety net with targeted investments.",presetMatch:"greenGrowthStimulus",conditions:[e=>e.budgetItems.supportForSeniors>6,e=>e.budgetItems.childrenAndFamilies>3],conditionsType:"or"},{title:"Family Champion",icon:"ðŸ‘¶",tier:"social",explanation:"You provided enhanced support to families.",presetMatch:"greenGrowthStimulus",conditions:e=>e.budgetItems.childrenAndFamilies>3},{title:"Senior Ally",icon:"ðŸ‘µ",tier:"social",explanation:"You protected the welfare of older citizens.",presetMatch:"progressiveExpansion",conditions:e=>e.budgetItems.supportForSeniors>=8&&e.budgetItems.healthcare>=6},{title:"Reconciliation Leader",icon:"ðŸ‘£",tier:"social",explanation:"You prioritized support for Indigenous communities.",conditions:e=>e.budgetItems.indigenousServices>=2&&e.budgetItems.indigenousOps>=.2},{title:"Welfare Architect",icon:"ðŸ˜ï¸",tier:"social",explanation:"You expanded social programs with balanced tax policies.",presetMatch:["socialSafetyNet","progressiveExpansion"],conditions:e=>e.budgetItems.childrenAndFamilies>4&&e.budgetItems.supportForSeniors>6&&e.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent>=0},{title:"Corporate Catalyst",icon:"ðŸ¢",tier:"economic",explanation:"You reduced corporate taxes to boost business investment and growth.",presetMatch:"businessFriendly",conditions:e=>e.revenueMix.corporateTax<14},{title:"Tax Reformer",icon:"ðŸ§¾",tier:"economic",explanation:"You restructured tax incentives for better economic outcomes.",conditions:e=>e.taxExpenditures.personalIncomeTaxCredits?.adjustmentPercent>=.8&&e.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent>=.8&&e.revenueMix.personalIncomeTax>3.6&&e.revenueMix.gst>=.8},{title:"Stimulus Engineer",icon:"ðŸš€",tier:"economic",explanation:"You used strategic tax credits to stimulate investment.",conditions:e=>e.taxExpenditures.deferrals?.adjustmentPercent<=.2*-3&&e.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent<=.2*-3&&e.surplus<-3},{title:"Innovation Powerhouse",icon:"ðŸ”¬",tier:"economic",explanation:"You fostered innovation and digital transformation.",presetMatch:"infrastructureBuilder",conditions:e=>e.budgetItems.research>=2&&e.budgetItems.digitalGovernment>=1},{title:"Infrastructure Visionary",icon:"ðŸ—ï¸",tier:"economic",explanation:"You invested in the nationâ€™s infrastructure for future growth.",presetMatch:"infrastructureBuilder",conditions:e=>e.budgetItems.infrastructure>1.2},{title:"Green Growth Carbon Champion",icon:"ðŸŒŽ",tier:"environmental",explanation:"You set an ambitious carbon tax rate to drive green innovation. This is celebrated in some regions but controversial in others.",conditions:e=>e.revenueMix?.carbonTax>=.4},{title:"National Security Guardian",icon:"ðŸ›¡ï¸",tier:"diplomatic",explanation:"You prioritized defense and public safety above all.",presetMatch:"securityFirst",conditions:e=>e.budgetItems.defense>1.05},{title:"Centrist Pragmatist",icon:"âš–ï¸",tier:"balanced",explanation:"You maintained a balanced approach to fiscal policy.",presetMatch:"balancedBudget",conditions:e=>Math.abs(e.surplus)<=54&&Object.values(e.taxExpenditures).every((e=>Math.abs(e.adjustmentPercent)<=72))},{title:"Progressive Moderate",icon:"ðŸ”„",tier:"balanced",explanation:"You balanced social investments with fiscal restraint.",presetMatch:"progressiveExpansion",conditions:e=>e.budgetItems.healthcare>=5&&e.budgetItems.education>=2&&Math.abs(e.surplus)<=90}]},17099:function(e,t,a){a.d(t,{Wp:function(){return r}});var n=a(6934),o=a(94621);a(20561);const s=Symbol("budget-store-override");function r(){const e=(0,n.WQ)(s,null);return e||(0,o.W)()}},94621:function(e,t,a){a.d(t,{W:function(){return R}});a(44114),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698);var n=a(10810),o=a(81540),s=a(14171),r=a(6934);const i=(0,r.KR)(""),u=1.6;function c(e,t){return{...e,surplus:e.surplus*t,totalRevenue:e.totalRevenue*t,totalSpending:e.totalSpending*t,revenueMix:{...e.revenueMix},taxExpenditures:Object.fromEntries(Object.entries(e.taxExpenditures).map((([e,a])=>[e,{...a,adjustmentPercent:"number"===typeof a.adjustmentPercent?a.adjustmentPercent*t:a.adjustmentPercent}]))),budgetItems:Object.fromEntries(Object.entries(e.budgetItems).map((([e,a])=>[e,"number"===typeof a?a*t:a])))}}function l(e,t=null,a=5){const n=JSON.stringify({budget:e,activePreset:t});if(window._badgeCache?.hash===n)return window._badgeCache.result;console.log("%c[BADGE DEBUG] getBudgetBadges called","background: #3498db; color: white; padding: 2px 5px; border-radius: 3px;"),console.log("Budget data for badges:",e),console.log("Active preset:",t,typeof t),console.log("Max badges:",a),console.log("Available badges in config:",o._.length),console.log("Badge config:",o._.map((e=>({title:e.title,tier:e.tier,presetMatch:e.presetMatch})))),t&&console.log("%c[BADGE DEBUG] GUARANTEE MODE: Ensuring preset badge appears for:","background: #e74c3c; color: white; font-weight: bold; padding: 2px 5px; border-radius: 3px;",t);const r=c(e,u);window._badgeCache=window._badgeCache||{};const l=o._.filter((e=>{try{console.log(`%c[BADGE EVAL] Evaluating badge: ${e.title} (${e.tier})`,"color: #9b59b6;");const t=e.conditions.toString();if(t.includes("childrenAndFamilies")&&console.log("  - childrenAndFamilies value:",r.budgetItems.childrenAndFamilies),t.includes("supportForSeniors")&&console.log("  - supportForSeniors value:",r.budgetItems.supportForSeniors),Array.isArray(e.conditions)){if("or"===e.conditionsType){const t=e.conditions.map((e=>{try{return e(r)}catch(t){return(0,s.H4)(t,(e=>i.value=e)),!1}})),a=t.some((e=>e));return console.log("  - OR conditions result:",a,t),a}{const t=e.conditions.map((e=>{try{return e(r)}catch(t){return(0,s.H4)(t,(e=>i.value=e)),!1}})),a=t.every((e=>e));return console.log("  - AND conditions result:",a,t),a}}const a="fallback"!==e.tier&&e.conditions(r);return console.log("  - Condition result:",a),a}catch(t){return(0,s.H4)(t,(e=>i.value=e)),!1}}));if(console.log("%c[BADGE DEBUG] Regular badges that match conditions:","background: #2ecc71; color: white; padding: 2px 5px; border-radius: 3px;",l.map((e=>e.title))),l.length>0){const e=["fiscal","economic","social","environmental","diplomatic","balanced"];if(t){console.log("%c[BADGE DEBUG] Prioritizing preset matches with activePreset:","background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;",t);const s=o._.filter((e=>!!e.presetMatch&&(Array.isArray(e.presetMatch)?e.presetMatch.includes(t):e.presetMatch===t)));console.log("%c[BADGE DEBUG] All badges matching preset:","color: #3498db;",s.map((e=>e.title))),s.length>0&&(console.log("%c[BADGE DEBUG] GUARANTEE MODE: Adding ALL preset badges:","background: #e74c3c; color: white; font-weight: bold;",s.map((e=>e.title))),s.forEach((e=>{l.some((t=>t.title===e.title))||(console.log(`  - Adding guaranteed preset badge: ${e.title}`),l.push(e))})));const r=l.filter((e=>{if(console.log(`Checking badge ${e.title} for preset match:`,e.presetMatch),!e.presetMatch)return console.log(`  - No presetMatch for ${e.title}`),!1;if(Array.isArray(e.presetMatch)){const a=e.presetMatch.includes(t);return console.log(`  - Array presetMatch for ${e.title}:`,e.presetMatch,"includes",t,"?",a),a}const a=e.presetMatch===t;return console.log(`  - String presetMatch for ${e.title}:`,e.presetMatch,"===",t,"?",a),a}));if(console.log("%c[BADGE DEBUG] Preset-matching badges:","background: #f39c12; color: white; padding: 2px 5px; border-radius: 3px;",r.map((e=>e.title))),r.length>0){console.log("Found preset-matching badges, prioritizing them");const t=[...r].sort(((t,a)=>e.indexOf(t.tier)-e.indexOf(a.tier))),o=l.filter((e=>!r.includes(e)));console.log("Other non-matching badges:",o.map((e=>e.title)));const s=[...o].sort(((t,a)=>e.indexOf(t.tier)-e.indexOf(a.tier))),i=[...t,...s];console.log("Combined badges (preset matches first):",i.map((e=>e.title)));const u=a?i.slice(0,a):i;return window._badgeCache={hash:n,result:u},u}}const s=l.sort(((t,a)=>e.indexOf(t.tier)-e.indexOf(a.tier))),r=a?s.slice(0,a):s;return console.log("Returning regular badges:",r.map((e=>e.title))),r}return console.log("No regular badges found, returning empty array"),[]}var d=a(71345),p=a(80223),m=a(63963),g=a(19607),h=a(62948);const v=(e,t="spending")=>(0,h.Mx)(e,t),b={REVENUE:"revenue",SPENDING:"spending",TAX_EXPENDITURE:"tax_expenditure",PRESET:"preset",RESET:"reset",AUTO_BALANCE:"auto_balance"},f={INCOME_TAXES:"Income Taxes",CONSUMPTION_TAXES:"Consumption Taxes",OTHER_REVENUE:"Other Revenue",MAIN_SPENDING:"Main Spending",LOANS_INVESTMENTS:"Loans & Investments",GOVERNMENT_OPS:"Government Operations",TAX_CREDITS:"Tax Credits & Deductions",SYSTEM_ACTIONS:"System Actions"},T={personalIncomeTax:f.INCOME_TAXES,corporateIncomeTax:f.INCOME_TAXES,gst:f.CONSUMPTION_TAXES,exciseTaxes:f.CONSUMPTION_TAXES,carbonPricing:f.CONSUMPTION_TAXES,customsDuties:f.CONSUMPTION_TAXES,eiPremiums:f.OTHER_REVENUE,crownProfits:f.OTHER_REVENUE,resourceRoyalties:f.OTHER_REVENUE,nonTaxRevenue:f.OTHER_REVENUE},x={healthcare:f.MAIN_SPENDING,education:f.MAIN_SPENDING,seniors:f.MAIN_SPENDING,childrenFamilies:f.MAIN_SPENDING,indigenousServices:f.MAIN_SPENDING,employmentInsurance:f.MAIN_SPENDING,defensePublicSafety:f.MAIN_SPENDING,studentLoans:f.LOANS_INVESTMENTS,agricultureLoans:f.LOANS_INVESTMENTS,internationalDevelopment:f.LOANS_INVESTMENTS,businessInnovation:f.LOANS_INVESTMENTS,defenseSector:f.LOANS_INVESTMENTS,economicDevelopment:f.LOANS_INVESTMENTS,transportationInfrastructure:f.GOVERNMENT_OPS,environmentalPrograms:f.GOVERNMENT_OPS,publicSafetyEmergency:f.GOVERNMENT_OPS,governmentBuildings:f.GOVERNMENT_OPS,researchInnovation:f.GOVERNMENT_OPS,digitalGovernment:f.GOVERNMENT_OPS,federalEmployeeSalaries:f.GOVERNMENT_OPS,legalJusticeSystem:f.GOVERNMENT_OPS,indigenousServicesOps:f.GOVERNMENT_OPS,culturalHeritage:f.GOVERNMENT_OPS,scientificResearch:f.GOVERNMENT_OPS,diplomaticRepresentation:f.GOVERNMENT_OPS};class S{constructor(e,t,a,n,o,s,r=null,i=null){this.id=`change_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.type=e,this.category=t,this.itemId=a,this.itemName=n,this.oldValue=o,this.newValue=s,this.amount=s-o,this.dollarImpact=i||0,this.timestamp=Date.now(),this.description=r||this.generateDescription()}generateDescription(){const e=this.amount>0?"increased":"decreased";return this.type===b.REVENUE?`${this.itemName} rate ${e} by ${Math.abs(this.amount).toFixed(1)}%`:this.type===b.SPENDING?`${this.itemName} ${e} by ${Math.abs(this.amount).toFixed(1)}%`:this.type===b.TAX_EXPENDITURE?`${this.itemName} adjustment ${e} by ${Math.abs(this.amount).toFixed(1)}%`:`${this.itemName} ${e}`}getDisplayAmount(){return void 0!==this.dollarImpact&&null!==this.dollarImpact?this.dollarImpact:this.amount}getChangeIcon(){const e=this.getDisplayAmount();return e>0?"trending_up":e<0?"trending_down":"remove"}getChangeColor(){const e=this.getDisplayAmount();return e>0?"#27ae60":e<0?"#e74c3c":"#95a5a6"}}const y=(e,...t)=>{0},A=(e,...t)=>{0},E=(0,r.KR)(""),R=(0,n.nY)("budgetSimulator",{state:()=>({isBatchUpdateInProgress:!1,stateVersion:0,_reactiveUpdates:!0,_batchUpdateDepth:0,_pendingUpdates:new Set,_computedCache:new Map,_cacheVersion:0,isUpdating:!1,isCalculating:!1,isSaving:!1,isLoading:!1,sentimentUpdateRequired:!1,badges:[],lastBadgeUpdate:Date.now(),lastSentimentUpdate:Date.now(),activePreset:null,autoBalanceActive:!1,simpleAutoBalanceActive:!1,autoBalanceConfig:{revenueToSpendingRatio:.5,minSpendingFactor:.1,maxSpendingFactor:2,prioritizePIT:!0},_isRecalculating:!1,revenueSources:{personalIncomeTax:{id:"personalIncomeTax",name:v("personalIncomeTax","revenue"),rate:21,base:10,amount:210,adjustedAmount:210,rateByYear:{2022:20,2023:20.5,2024:21,2025:21.5,2026:22},minRate:0,maxRate:50,description:"Controls the average effective personal income tax rate across all brackets.",note:"Personal income tax is the largest source of federal revenue.",linkedExpenditures:["personalTaxCredits","taxDeferrals"],expenditureImpact:0,color:"#4299E1"},corporateIncomeTax:{id:"corporateIncomeTax",name:v("corporateIncomeTax","revenue"),rate:15,base:5.33,amount:80,adjustedAmount:80,rateByYear:{2022:14,2023:14.5,2024:15,2025:15.5,2026:16},minRate:0,maxRate:40,description:"Reflects business contributions via corporate taxes.",note:"Corporate income tax is levied on business profits.",linkedExpenditures:["corporateTaxExpenditures"],expenditureImpact:0,color:"#48BB78"},gst:{id:"gst",name:v("gstHst","revenue"),rate:5,base:10,amount:50,adjustedAmount:50,rateByYear:{2022:5,2023:5,2024:5,2025:5,2026:5},minRate:0,maxRate:25,description:"Consumption-based tax, commonly 5% in Canada.",note:"The Goods and Services Tax (GST) is a 5% federal sales tax.",linkedExpenditures:["gstExpenditures"],expenditureImpact:0,color:"#ED8936"},exciseTaxes:{id:"exciseTaxes",name:v("exciseTaxes","revenue"),rate:2.5,base:4.8,amount:12,adjustedAmount:12,rateByYear:{2022:2.3,2023:2.4,2024:2.5,2025:2.6,2026:2.7},minRate:0,maxRate:25,description:"Fuel, tobacco, and alcohol excise.",note:"Fuel, tobacco, and alcohol taxes.",color:"#9F7AEA"},carbonPricing:{id:"carbonPricing",name:v("carbonPricing","revenue"),rate:1,base:8,amount:8,adjustedAmount:8,rateByYear:{2022:.8,2023:.9,2024:1,2025:1.1,2026:1.2},minRate:0,maxRate:10,description:"Levy on carbon emissions.",note:"Levy on carbon emissions.",color:"#38B2AC"},eiPremiums:{id:"eiPremiums",name:v("employmentInsurancePremiums","revenue"),rate:1.35,base:20,amount:27,adjustedAmount:27,rateByYear:{2022:1.3,2023:1.32,2024:1.35,2025:1.38,2026:1.4},minRate:0,maxRate:10,description:"Payroll contributions from employers and employees.",note:"Contributions from employers and employees.",color:"#667EEA"},customsDuties:{id:"customsDuties",name:v("customsAndImportDuties","revenue"),rate:1,base:6,amount:6,adjustedAmount:6,rateByYear:{2022:.9,2023:.95,2024:1,2025:1.05,2026:1.1},minRate:0,maxRate:20,description:"Tariffs on imported goods.",note:"Tariffs on imported goods.",color:"#F56565"},crownProfits:{id:"crownProfits",name:v("crownCorporationProfits","revenue"),rate:2.5,base:2.4,amount:6,adjustedAmount:6,rateByYear:{2022:2.3,2023:2.4,2024:2.5,2025:2.6,2026:2.7},minRate:0,maxRate:10,description:"Annual profits from corporations like Canada Post and EDC.",note:"Profits from entities like Canada Post or EDC.",color:"#F687B3"},nonTaxRevenue:{id:"nonTaxRevenue",name:v("otherNonTaxRevenues","revenue"),rate:3,base:10,amount:30,adjustedAmount:30,rateByYear:{2022:2.8,2023:2.9,2024:3,2025:3.1,2026:3.2},minRate:0,maxRate:20,description:"Licenses, fees, and investment income.",note:"Income from licenses, fees, and investments.",color:"#FC8181"},resourceRoyalties:{id:"resourceRoyalties",name:v("resourceRoyalties","revenue"),rate:1,base:5,amount:5,adjustedAmount:5,rateByYear:{2022:.8,2023:.9,2024:1,2025:1.1,2026:1.2},minRate:0,maxRate:10,description:"Oil, gas, and mineral royalties.",note:"Oil, gas, and mineral royalties (volatile).",color:"#B794F4"}},spendingCategories:{healthcare:{id:"healthcare",name:v("healthcareCht","spending"),baseAmount:50.4,adjustmentFactor:1,description:"Canada Health Transfer to provinces and territories for healthcare services.",color:"#F56565"},education:{id:"education",name:v("education","spending"),baseAmount:12,adjustmentFactor:1,description:"Federal education supports including transfers, grants, and learning programs.",color:"#3182CE"},seniors:{id:"seniors",name:v("supportForSeniors","spending"),baseAmount:76,adjustmentFactor:1,description:"Old Age Security, Guaranteed Income Supplement, and other senior support programs.",color:"#4299E1"},childrenFamilies:{id:"childrenFamilies",name:v("childrenAndFamilies","spending"),baseAmount:26.3,adjustmentFactor:1,description:"Canada Child Benefit and other family support programs.",color:"#48BB78"},indigenousServices:{id:"indigenousServices",name:v("indigenousServices","spending"),baseAmount:35.5,adjustmentFactor:1,description:"Services, infrastructure, and reconciliation efforts for Indigenous communities.",color:"#ED8936"},employmentInsurance:{id:"employmentInsurance",name:v("employmentInsurance","spending"),baseAmount:23.1,adjustmentFactor:1,description:"Benefits for unemployed workers, parental leave, and skills training.",color:"#9F7AEA"},defensePublicSafety:{id:"defensePublicSafety",name:v("defensePublicSafety","spending"),baseAmount:32.6,adjustmentFactor:1,description:"Military, RCMP, border services, and other security agencies.",color:"#38B2AC"},loansInvestments:{id:"loansInvestments",name:v("loansInvestmentsAdvances","spending"),isGroup:!0,isExpanded:!1,color:"#ECC94B",children:{studentLoans:{id:"studentLoans",name:v("studentLoans","spending.subcategories"),baseAmount:24,adjustmentFactor:1,description:"Financial assistance for post-secondary education.",color:"#ECC94B"},agricultureLoans:{id:"agricultureLoans",name:v("agricultureLoans","spending.subcategories"),baseAmount:.162,adjustmentFactor:1,description:"Support for farmers and agricultural businesses.",color:"#ECC94B"},internationalDevelopment:{id:"internationalDevelopment",name:v("internationalDevelopment","spending.subcategories"),baseAmount:53,adjustmentFactor:1,description:"Foreign aid and development assistance.",color:"#ECC94B"},businessInnovation:{id:"businessInnovation",name:v("businessInnovation","spending.subcategories"),baseAmount:.6,adjustmentFactor:1,description:"Loans and investments to support business growth and innovation.",color:"#ED64A6"},defenseSector:{id:"defenseSector",name:v("defenseSector","spending.subcategories"),baseAmount:1.45,adjustmentFactor:1,description:"Investments in defense equipment and technology.",color:"#ECC94B"},economicDevelopment:{id:"economicDevelopment",name:v("economicDevelopment","spending.subcategories"),baseAmount:.5,adjustmentFactor:1,description:"Regional development programs and initiatives.",color:"#ECC94B"}}},governmentOperations:{id:"governmentOperations",name:v("governmentOperations","spending"),isGroup:!0,isExpanded:!1,color:"#ED64A6",children:{transportationInfrastructure:{id:"transportationInfrastructure",name:v("transportationInfrastructure","spending.subcategories"),baseAmount:15,adjustmentFactor:1,description:"Investments in national transportation infrastructure, including roadways, bridges, ports, and rail systems.",color:"#ED64A6"},environmentalPrograms:{id:"environmentalPrograms",name:v("environmentalPrograms","spending.subcategories"),baseAmount:8,adjustmentFactor:1,description:"Funds dedicated to climate change initiatives, conservation efforts, and environmental protection.",color:"#ED64A6"},publicSafetyEmergency:{id:"publicSafetyEmergency",name:v("publicSafetyAndEmergencyPreparedness","spending.subcategories"),baseAmount:9,adjustmentFactor:1,description:"Funding for national security agencies to respond to emergencies and public safety threats.",color:"#ED64A6"},governmentBuildings:{id:"governmentBuildings",name:v("governmentBuildingsAndProperties","spending.subcategories"),baseAmount:7,adjustmentFactor:1,description:"Maintenance and construction of government buildings for essential services.",color:"#ED64A6"},researchInnovation:{id:"researchInnovation",name:v("researchAndInnovation","spending.subcategories"),baseAmount:10,adjustmentFactor:1,description:"Investments in research and development across sectors for scientific advances.",color:"#ED64A6"},digitalGovernment:{id:"digitalGovernment",name:v("digitalGovernmentAndItInfrastructure","spending.subcategories"),baseAmount:5,adjustmentFactor:1,description:"Modernizing federal digital services and IT infrastructure.",color:"#ED64A6"},federalEmployeeSalaries:{id:"federalEmployeeSalaries",name:v("federalEmployeeSalariesAndBenefits","spending.subcategories"),baseAmount:35,adjustmentFactor:1,description:"Salaries, pensions, and benefits for federal employees.",color:"#ED64A6"},legalJusticeSystem:{id:"legalJusticeSystem",name:v("legalAndJusticeSystem","spending.subcategories"),baseAmount:5,adjustmentFactor:1,description:"Supports the national legal and justice system.",color:"#ED64A6"},indigenousServicesOps:{id:"indigenousServicesOps",name:v("indigenousServicesOperationalExpenses","spending.subcategories"),baseAmount:4,adjustmentFactor:1,description:"Operational costs for Indigenous Services Canada.",color:"#ED64A6"},culturalHeritage:{id:"culturalHeritage",name:v("culturalAndHeritagePrograms","spending.subcategories"),baseAmount:2,adjustmentFactor:1,description:"Funding for national cultural institutions and heritage preservation.",color:"#ED64A6"},scientificResearch:{id:"scientificResearch",name:v("scientificResearchDevelopment","spending.subcategories"),baseAmount:5,adjustmentFactor:1,description:"Funding for scientific research across various sectors.",color:"#ED64A6"},diplomaticRepresentation:{id:"diplomaticRepresentation",name:v("diplomaticAndInternationalRepresentation","spending.subcategories"),baseAmount:5,adjustmentFactor:1,description:"Operational costs of Global Affairs Canada and diplomatic missions.",color:"#ED64A6"}}}},fixedCosts:{debtServicing:{id:"debtServicing",name:v("debtServicing","spending"),amount:47.3,description:"Interest payments on the federal debt (fixed cost).",color:"#667EEA"}},taxExpenditures:{personalTaxCredits:{id:"personalTaxCredits",name:v("personalIncomeTaxCredits","spending"),baseAmount:120,netAmount:102,interactionFactor:.85,adjustmentFactor:0,minAdjustment:-100,maxAdjustment:100,description:"Tax credits and deductions for individuals, including the basic personal amount and charitable donations.",linkedRevenueSource:"personalIncomeTax",tooltip:"Reducing personal tax credits increases revenue; increasing credits reduces revenue.",color:"#3182CE"},corporateTaxExpenditures:{id:"corporateTaxExpenditures",name:v("corporateTaxExpenditures","spending"),baseAmount:25,netAmount:23.75,interactionFactor:.95,adjustmentFactor:0,minAdjustment:-100,maxAdjustment:100,description:"Tax credits and deductions for businesses, including R&D credits and small business deductions.",linkedRevenueSource:"corporateIncomeTax",tooltip:"Reducing corporate tax expenditures increases revenue; increasing them reduces revenue.",color:"#2C7A7B"},gstExpenditures:{id:"gstExpenditures",name:v("gstHstExpenditures","taxExpenditures"),baseAmount:22,netAmount:22,interactionFactor:1,adjustmentFactor:0,minAdjustment:-100,maxAdjustment:100,description:"GST/HST exemptions and zero-rated items including basic groceries and prescription drugs.",linkedRevenueSource:"gst",tooltip:"Reducing GST/HST expenditures increases revenue; increasing them reduces revenue.",color:"#DD6B20"},taxDeferrals:{id:"taxDeferrals",name:v("deferralsRrspRppTfsa","taxExpenditures"),baseAmount:33,netAmount:24,interactionFactor:.73,adjustmentFactor:0,minAdjustment:-100,maxAdjustment:100,description:"Tax-advantaged savings accounts including RRSPs, Registered Pension Plans, and TFSA.",linkedRevenueSource:"personalIncomeTax",tooltip:"Reducing tax deferrals increases short-term revenue; increasing them reduces current revenue.",color:"#805AD5"}},budgetGoals:{enabled:!0,revenueTarget:400,deficitTarget:30},goalStatus:{revenue:{status:"",icon:"",text:"",message:""},deficit:{status:"",icon:"",text:"",message:""}},currentYear:2024,lastSpendingUpdate:Date.now(),lastTaxExpenditureUpdate:Date.now(),lastRevenueSourceUpdate:Date.now(),lastUpdate:0,expandedGroups:{incomeTaxes:!0,consumptionTaxes:!0,otherRevenues:!0,mainCategories:!0,otherCategories:!1,governmentOperations:!1,taxExpenditures:!0},fiscalIndicators:{gdp:2500,debt:1173},_debouncedRecalculate:null,_lastRecalculationTime:0,changeHistory:[],changeHistoryVersion:0,maxChangeHistorySize:50}),getters:{formattedFiscalYear(){return`${this.currentYear-1}-${this.currentYear}`},availableFiscalYears(){return Object.keys(this.revenueSources.personalIncomeTax.rateByYear).map((e=>parseInt(e))).sort().map((e=>({value:e,label:`${e-1}-${e}`})))},currentDebt(){const e=this.fiscalIndicators?.debt||0,t=this.surplus<0?Math.abs(this.surplus):0;return e+t},debtToGdpRatio(){const e=this.fiscalIndicators?.gdp||0,t=this.currentDebt||0;return e&&e>0?t/e*100:0},budgetData(){const e=`budgetData_${this.stateVersion}_${this.lastUpdate}_${this._cacheVersion}`;if(this._computedCache.has(e))return this._computedCache.get(e);try{const t=this.budgetDataForBadges;return this._computedCache.set(e,(0,r.IG)(t)),t}catch(t){(0,s.H4)(t,(e=>E.value=e));const a={totalRevenue:0,totalSpending:0,surplus:0,revenueMix:{personalIncomeTax:this.revenueSources.personalIncomeTax?.rate??21,personalIncomeTaxAmount:this.revenueSources.personalIncomeTax?.adjustedAmount??210,corporateIncomeTax:this.revenueSources.corporateIncomeTax?.rate??15,corporateIncomeTaxAmount:this.revenueSources.corporateIncomeTax?.adjustedAmount??80,gst:this.revenueSources.gst?.rate??5,gstAmount:this.revenueSources.gst?.adjustedAmount??50,carbonPricing:this.revenueSources.carbonPricing?.rate??1,carbonPricingAmount:this.revenueSources.carbonPricing?.adjustedAmount??10,exciseTaxes:this.revenueSources.exciseTaxes?.rate??2.5,exciseTaxesAmount:this.revenueSources.exciseTaxes?.adjustedAmount??25,eiPremiums:this.revenueSources.eiPremiums?.rate??1.35,eiPremiumsAmount:this.revenueSources.eiPremiums?.adjustedAmount??13.5,customsDuties:this.revenueSources.customsDuties?.rate??1,customsDutiesAmount:this.revenueSources.customsDuties?.adjustedAmount??10,crownProfits:this.revenueSources.crownProfits?.rate??2.5,crownProfitsAmount:this.revenueSources.crownProfits?.adjustedAmount??25,nonTaxRevenue:this.revenueSources.nonTaxRevenue?.rate??3,nonTaxRevenueAmount:this.revenueSources.nonTaxRevenue?.adjustedAmount??30,resourceRoyalties:this.revenueSources.resourceRoyalties?.rate??1,resourceRoyaltiesAmount:this.revenueSources.resourceRoyalties?.adjustedAmount??10},taxExpenditures:{},budgetItems:{}};return this._computedCache.set(e,(0,r.IG)(a)),a}},baselineRevenue(){const e={personalIncomeTax:21,corporateIncomeTax:15,gst:5,exciseTaxes:2.5,carbonPricing:1,eiPremiums:1.35,customsDuties:1,crownProfits:2.5,nonTaxRevenue:3,resourceRoyalties:1};return Object.entries(this.revenueSources).reduce(((t,[a,n])=>t+n.base*(e[a]||n.rate)),0)},additionalRevenue(){return this.totalRevenue-this.baselineRevenue},surplus(){return this.totalRevenue-this.totalSpending},incomeTaxTotal(){const e=Number(this.revenueSources.personalIncomeTax?.adjustedAmount)||0,t=Number(this.revenueSources.corporateIncomeTax?.adjustedAmount)||0;return e+t},consumptionTaxTotal(){const e=Number(this.revenueSources.gst?.adjustedAmount)||0,t=Number(this.revenueSources.exciseTaxes?.adjustedAmount)||0,a=Number(this.revenueSources.carbonPricing?.adjustedAmount)||0,n=Number(this.revenueSources.customsDuties?.adjustedAmount)||0;return e+t+a+n},otherRevenueTotal(){const e=Number(this.revenueSources.eiPremiums?.adjustedAmount)||0,t=Number(this.revenueSources.crownProfits?.adjustedAmount)||0,a=Number(this.revenueSources.resourceRoyalties?.adjustedAmount)||0,n=Number(this.revenueSources.nonTaxRevenue?.adjustedAmount)||0;return e+t+a+n},totalRevenue(){return this.incomeTaxTotal+this.consumptionTaxTotal+this.otherRevenueTotal},mainCategoriesSpending(){const e=Object.values(this.spendingCategories).filter((e=>!e.isGroup));return e.reduce(((e,t)=>e+t.baseAmount*t.adjustmentFactor),0)},loansInvestmentsSpending(){const e=this.spendingCategories.loansInvestments.children;return Object.values(e).reduce(((e,t)=>e+t.baseAmount*t.adjustmentFactor),0)},governmentOperationsSpending(){const e=this.spendingCategories.governmentOperations.children;return Object.values(e).reduce(((e,t)=>e+t.baseAmount*t.adjustmentFactor),0)},otherCategoriesTotal(){return this.loansInvestmentsSpending+this.governmentOperationsSpending},totalSpending(){return this.mainCategoriesSpending+this.otherCategoriesTotal+this.fixedCostsTotal},fixedCostsTotal(){return Object.values(this.fixedCosts).reduce(((e,t)=>e+t.amount),0)},debtServicing(){return this.fixedCosts.debtServicing?.amount||0},revenueGoalStatus(){return this.budgetGoals.enabled&&this.budgetGoals.targetRevenue?this.goalStatus.revenue:null},deficitGoalStatus(){return this.budgetGoals.enabled&&null!==this.budgetGoals.targetDeficit?this.goalStatus.deficit:null},isGroupExpanded(){return e=>{const t=Object.values(this.spendingCategories).find((t=>t.id===e));return!(!t||!t.isGroup)&&t.isExpanded}},getGroupChildren(){return e=>{const t=Object.values(this.spendingCategories).find((t=>t.id===e));return t&&t.isGroup?Object.values(t.children):[]}},getGroupTotal(){return e=>{const t=this.getGroupChildren(e);return t.reduce(((e,t)=>e+t.baseAmount*t.adjustmentFactor),0)}},getGroupBaseTotal(){return e=>{const t=this.getGroupChildren(e);return t.reduce(((e,t)=>e+t.baseAmount),0)}},getGroupFactor(){return e=>{const t=this.getGroupChildren(e);if(0===t.length)return 1;const a=t.reduce(((e,t)=>e+t.baseAmount),0),n=t.reduce(((e,t)=>e+t.baseAmount*t.adjustmentFactor),0);return a>0?n/a:1}},budgetDataForBadges(){y("[KEY MAPPING] Store spending categories:",Object.keys(this.spendingCategories));const e={totalRevenue:this.totalRevenue,totalSpending:this.totalSpending,surplus:this.surplus,debtServicing:this.debtServicing,revenueMix:{personalIncomeTax:this.revenueSources.personalIncomeTax?.rate??21,personalIncomeTaxAmount:this.revenueSources.personalIncomeTax?.adjustedAmount??210,corporateIncomeTax:this.revenueSources.corporateIncomeTax?.rate??15,corporateIncomeTaxAmount:this.revenueSources.corporateIncomeTax?.adjustedAmount??80,gst:this.revenueSources.gst?.rate??5,gstAmount:this.revenueSources.gst?.adjustedAmount??50,hst:this.revenueSources.gst?.rate??5,hstAmount:this.revenueSources.gst?.adjustedAmount??50,exciseTaxes:this.revenueSources.exciseTaxes?.rate??2.5,exciseTaxesAmount:this.revenueSources.exciseTaxes?.adjustedAmount??25,carbonPricing:this.revenueSources.carbonPricing?.rate??1,carbonPricingAmount:this.revenueSources.carbonPricing?.adjustedAmount??10,eiPremiums:this.revenueSources.eiPremiums?.rate??1.35,eiPremiumsAmount:this.revenueSources.eiPremiums?.adjustedAmount??13.5,customsDuties:this.revenueSources.customsDuties?.rate??1,customsDutiesAmount:this.revenueSources.customsDuties?.adjustedAmount??10,crownProfits:this.revenueSources.crownProfits?.rate??2.5,crownProfitsAmount:this.revenueSources.crownProfits?.adjustedAmount??25,nonTaxRevenue:this.revenueSources.nonTaxRevenue?.rate??3,nonTaxRevenueAmount:this.revenueSources.nonTaxRevenue?.adjustedAmount??30,resourceRoyalties:this.revenueSources.resourceRoyalties?.rate??1,resourceRoyaltiesAmount:this.revenueSources.resourceRoyalties?.adjustedAmount??10},taxExpenditures:{personalIncomeTaxCredits:this.taxExpenditures.personalTaxCredits||{adjustmentPercent:0},corporateTaxExpenditures:this.taxExpenditures.corporateTaxExpenditures||{adjustmentPercent:0},gstExpenditures:this.taxExpenditures.gstExpenditures||{adjustmentPercent:0},deferrals:this.taxExpenditures.taxDeferrals||{adjustmentPercent:0}},budgetItems:{healthcare:this.spendingCategories.healthcare?.adjustedAmount??0,education:this.spendingCategories.education?.adjustedAmount??0,childrenAndFamilies:this.spendingCategories.childrenFamilies?.adjustedAmount??0,supportForSeniors:this.spendingCategories.seniors?.adjustedAmount??0,indigenousServices:this.spendingCategories.indigenousServices?.adjustedAmount??0,defense:this.spendingCategories.defense?.adjustedAmount??0,scienceAndInnovation:this.spendingCategories.scienceAndInnovation?.adjustedAmount??0,infrastructure:this.spendingCategories.infrastructure?.adjustedAmount??0,digitalGovernment:this.spendingCategories.digitalGovernment?.adjustedAmount??0,environmentAndClimateChange:this.spendingCategories.environmentAndClimateChange?.adjustedAmount??0,carbonPricing:this.spendingCategories.carbonPricing?.adjustedAmount??0,agriculture:this.spendingCategories.agriculture?.adjustedAmount??0,internationalDevelopment:this.spendingCategories.internationalDevelopment?.adjustedAmount??0,culturalPrograms:this.spendingCategories.culturalPrograms?.adjustedAmount??0,transit:this.spendingCategories.transit?.adjustedAmount??0,economicDevelopment:this.spendingCategories.economicDevelopment?.adjustedAmount??0,indigenousOperations:this.spendingCategories.indigenousOperations?.adjustedAmount??0,diplomaticRepresentation:this.spendingCategories.diplomaticRepresentation?.adjustedAmount??0}};return y("[KEY MAPPING] Mapped budget data for badges:",{revenueKeyCount:Object.keys(e.revenueMix).length,expenditureKeyCount:Object.keys(e.taxExpenditures).length,spendingCategoryKeyCount:Object.keys(e.budgetItems).length}),e},earnedBadges(){return this.badges},optimizedRevenueSources(){return this._reactiveUpdates?this.revenueSources:(0,r.IG)(this.revenueSources)}},actions:{setSentimentUpdateRequired(e=!0){this.sentimentUpdateRequired=e},clearSentimentDirty(){this.sentimentUpdateRequired=!1},triggerSentimentUpdate(){this.lastSentimentUpdate=Date.now(),console.log("[STORE] Triggered sentiment update:",this.lastSentimentUpdate)},beginBatchUpdate(){return this.isBatchUpdateInProgress?(console.warn("[STORE] Batch update already in progress"),!1):(this._batchUpdateDepth++,this.isBatchUpdateInProgress=!0,this._reactiveUpdates=!1,this._pendingUpdates.clear(),console.log("[STORE] Beginning batch update"),this.setSentimentUpdateRequired(!1),!0)},completeBatchUpdate(){return this.isBatchUpdateInProgress?(this._batchUpdateDepth--,0===this._batchUpdateDepth&&(console.log("[STORE] Completing batch update"),this.recalculateTotals(),this._computedCache.clear(),this._cacheVersion++,this.stateVersion++,console.log(`[STORE] State version updated to ${this.stateVersion}`),this._reactiveUpdates=!0,this.setSentimentUpdateRequired(!0),this.triggerSentimentUpdate(),this.syncToLocalStorage(),this.isBatchUpdateInProgress=!1),!0):(console.warn("[STORE] No batch update in progress"),!1)},initializeStore(){if(!this.loadFromLocalStorage()){const e={};for(const a in this.revenueSources){const t=this.revenueSources[a];e[a]={...t,amount:t.base*t.rate,adjustedAmount:t.base*t.rate,expenditureImpact:0}}this.revenueSources=e;const t={};for(const a in this.taxExpenditures){const e=this.taxExpenditures[a];t[a]={...e,adjustment:e.baseAdjustment||0,revenueImpact:0}}this.taxExpenditures=t;for(const a in this.revenueSources)this.updateRevenueSourceAdjustedAmount(a);this.syncToLocalStorage()}this.changeHistory=[],this.changeHistoryVersion=0,this.lastUpdate=Date.now(),this._debouncedRecalculate=(0,g.sg1)((()=>{this._performRecalculation()}),150)},loadFromLocalStorage(){try{const e=localStorage.getItem("budgetSimulator");if(e){const t=JSON.parse(e);return this.activePreset=t.activePreset||null,t.fixedCosts&&(this.fixedCosts={...this.fixedCosts,...t.fixedCosts}),console.log("Loaded budget from localStorage:",t),!0}return!1}catch(e){return console.error("Error loading budget from localStorage:",e),!1}},setCurrentYear(e){const t={};for(const a in this.revenueSources){const n=this.revenueSources[a];n.rateByYear&&void 0!==n.rateByYear[e]?t[a]={...n,rate:n.rateByYear[e],amount:n.base*n.rateByYear[e],adjustedAmount:n.base*n.rateByYear[e]}:t[a]=n}this.currentYear=e,this.revenueSources=t;for(const a in this.revenueSources)this.updateRevenueSourceAdjustedAmount(a);this.lastUpdate=Date.now()},toggleGroupExpansion(e){const t=Object.values(this.spendingCategories).find((t=>t.id===e));t&&t.isGroup&&(t.isExpanded=!t.isExpanded),this.expandedGroups={...this.expandedGroups,[e]:!!t&&t.isExpanded}},setRevenueRate(e,t){const a=this.revenueSources[e];if(!a)return A(`Revenue source not found: ${e}`),!1;let n=t;if(void 0!==a.minRate&&(n=Math.max(a.minRate,n)),void 0!==a.maxRate&&(n=Math.min(a.maxRate,n)),Math.abs(a.rate-n)<.001)return console.log("%c[CHANGE DEBUG] Rate change too small, skipping:","background: #f39c12; color: white; padding: 2px 5px;",{sourceId:e,oldRate:a.rate,newRate:n,diff:Math.abs(a.rate-n),threshold:.001}),!0;console.log("%c[CHANGE DEBUG] setRevenueRate processing:","background: #27ae60; color: white; padding: 2px 5px;",{sourceId:e,oldRate:a.rate,newRate:n,diff:Math.abs(a.rate-n),isBatchMode:this.isBatchUpdateInProgress});const o=a.rate,s={...a};return s.rate=n,s.amount=s.base*s.rate,y("carbonPricing"===e?`[CARBON TAX] Updating rate from ${a.rate} to ${n}, batch mode: ${this.isBatchUpdateInProgress}`:`Updating revenue source ${e} rate from ${a.rate} to ${n}`),s.rateByYear&&(s.rateByYear={...s.rateByYear},s.rateByYear[this.currentYear]=n),this.revenueSources={...this.revenueSources,[e]:s},this.updateRevenueSourceAdjustedAmount(e),this.trackRevenueChange(e,o,n),this.isBatchUpdateInProgress||(this.recalculateTotals(),this.lastRevenueSourceUpdate=Date.now(),this.lastUpdate=Date.now(),this.setSentimentUpdateRequired(!0),this.debouncedSyncToLocalStorage(),y(`Updated revenue source ${e} rate to ${n}%, amount: ${this.revenueSources[e].amount.toFixed(2)}B, adjusted: ${this.revenueSources[e].adjustedAmount?.toFixed(2)}B`)),!0},updateRevenueRate(e,t){const a=this.revenueSources[e]?.rate;if(a===t)return!0;this.isBatchUpdateInProgress&&this._pendingUpdates.add(`revenue_${e}`),this.isUpdating=!0;try{const a=this.setRevenueRate(e,t);return this.debouncedSyncToLocalStorage(),a}finally{this.isUpdating=!1}},debouncedUpdateRevenueRate:(0,g.sg1)((function(e,t){this.updateRevenueRate(e,t)}),100),clearCache(){this._computedCache.clear(),this._cacheVersion++},recalculateTotals(){!this.isBatchUpdateInProgress&&this._debouncedRecalculate?this._debouncedRecalculate():this._performRecalculation()},updateSpendingFactor(e,t){let a=!1,n=1;Object.values(this.spendingCategories).forEach((o=>{o.id!==e||o.isGroup||(n=o.adjustmentFactor,a=!0,o.adjustmentFactor=t)})),a||Object.values(this.spendingCategories).filter((e=>e.isGroup&&e.children)).forEach((o=>{const s=Object.values(o.children).find((t=>t.id===e));s&&(n=s.adjustmentFactor,a=!0,s.adjustmentFactor=t)})),a?Math.abs((n||0)-(t||0))<1e-4?y(`[Spending] No-op change for ${e}; old=${n}, new=${t}`):(this.trackSpendingChange(e,n,t),this.isBatchUpdateInProgress||(this.lastUpdate=Date.now(),this.setSentimentUpdateRequired(!0),this.recalculateTotals())):console.warn("[STORE] updateSpendingFactor: category not found, skipping tracking:",e)},updateGroupSpendingFactor(e,t){const a=Object.values(this.spendingCategories).find((t=>t.id===e));a&&a.isGroup&&a.children&&(Object.values(a.children).forEach((e=>{e.adjustmentFactor=t})),this.isBatchUpdateInProgress||(this.lastUpdate=Date.now(),this.setSentimentUpdateRequired(!0),this.recalculateTotals()))},updateBudgetGoals(e){void 0!==e.enabled&&(this.budgetGoals.enabled=e.enabled),void 0!==e.revenueTarget&&(this.budgetGoals.revenueTarget=e.revenueTarget),void 0!==e.deficitTarget&&(this.budgetGoals.deficitTarget=e.deficitTarget)},updateGoalStatus(e={}){const t=this.budgetGoals.revenueTarget||0,a=this.totalRevenue||0,n=t>0?a/t*100:100,o=this.budgetGoals.deficitTarget||0,s=this.surplus<0?Math.abs(this.surplus):0,r=o>0?s<=o?100:o/s*100:0===s?100:0;this.goalStatus={revenue:e.revenue||n,deficit:e.deficit||r}},autoBalanceBudget(){if(this._isRecalculating)console.log("Avoiding recursive auto-balance call");else try{this._isRecalculating=!0;const e=this.totalSpending-this.totalRevenue;if(e<=0)return void console.log("Budget already balanced or in surplus");console.log(`Attempting to balance budget. Current deficit: $${e.toFixed(1)}B`);const t=["personalIncomeTax","corporateIncomeTax","gst","carbonPricing","exciseTaxes","customsDuties","resourceRoyalties","nonTaxRevenue"],a=t.map((e=>({id:e,...this.revenueSources[e]}))).filter((e=>e&&e.base>0&&e.rate<(e.maxRate||100)));if(0===a.length)return void console.log("No adjustable revenue sources found");let n=e,o=[];for(const s of a){const e=s.amount,t=s.base*(s.maxRate||100),a=t-e;if(a>=.7*n){const e=n/s.base,t=Math.min(s.rate+e,s.maxRate||100);console.log(`Adjusting ${s.name} rate from ${s.rate.toFixed(1)}% to ${t.toFixed(1)}%`),this.setRevenueRate(s.id,t),o.push(s.name),n=0;break}}if(n>0){a.sort(((e,t)=>{const a=e.base*((e.maxRate||100)-e.rate),n=t.base*((t.maxRate||100)-t.rate);return n-a}));for(const e of a){if(o.includes(e.name))continue;const t=e.amount,a=e.base*(e.maxRate||100),s=a-t;if(s>0){const t=Math.min(n,s),a=t/e.base,r=Math.min(e.rate+a,e.maxRate||100);if(console.log(`Adjusting ${e.name} rate from ${e.rate.toFixed(1)}% to ${r.toFixed(1)}%`),this.setRevenueRate(e.id,r),o.push(e.name),n-=t,n<=.1)break}}}this.lastUpdate=Date.now(),o.length>0?(console.log(`Budget auto-balanced by adjusting ${o.length} revenue source(s): ${o.join(", ")}`),this.trackAutoBalance()):console.log("Could not auto-balance the budget with available revenue sources")}catch(e){console.error("Error in autoBalanceBudget:",e)}finally{this._isRecalculating=!1}},toggleAutoBalance(e){if(this.autoBalanceActive=e,console.log("[AutoBalance] toggleAutoBalance called with:",{active:e,goalsEnabled:this.budgetGoals.enabled,targetDeficit:this.budgetGoals.targetDeficit}),e&&!this.budgetGoals.enabled&&(this.budgetGoals.enabled=!0),this.autoBalanceActive)if(!this.budgetGoals.enabled||null!==this.budgetGoals.targetDeficit&&void 0!==this.budgetGoals.targetDeficit||(console.log("[AutoBalance] budgetGoals.targetDeficit was not set; defaulting to 0"),this.budgetGoals.targetDeficit=0),this.budgetGoals.enabled&&null!==this.budgetGoals.targetDeficit&&void 0!==this.budgetGoals.targetDeficit){console.log("[AutoBalance] Using goal-based auto-balance (target deficit mode)");const e=this.autoBalanceBudgetForGoal();e&&e.message&&console.log(`[AutoBalance] Result: ${e.message}`)}else console.log("[AutoBalance] Using standard auto-balance (no target deficit)"),this.autoBalanceBudget()},toggleSimpleAutoBalance(e){this.simpleAutoBalanceActive=e,console.log("[SimpleAutoBalance] toggleSimpleAutoBalance called with:",{active:e,currentDeficit:this.totalSpending-this.totalRevenue,totalRevenue:this.totalRevenue,totalSpending:this.totalSpending}),this.simpleAutoBalanceActive&&(console.log("[SimpleAutoBalance] Using direct auto-balance (no goals)"),console.log(`[SimpleAutoBalance] Current state: Revenue=${this.totalRevenue}B, Spending=${this.totalSpending}B, Deficit=${this.totalSpending-this.totalRevenue}B`),this.autoBalanceBudget())},autoBalanceBudgetForGoal(){const e={success:!1,message:"",achieved:!1,deficitGap:0,revenueGap:0};try{this.beginBatchUpdate(),this.budgetGoals.enabled=!0,null!==this.budgetGoals.targetDeficit&&void 0!==this.budgetGoals.targetDeficit||(this.budgetGoals.targetDeficit=0);let t=0;null!==this.budgetGoals.targetRevenue&&void 0!==this.budgetGoals.targetRevenue&&(t=this.budgetGoals.targetRevenue-this.totalRevenue,e.revenueGap=Math.abs(t));const a=this.budgetGoals.targetDeficit,n=this.totalSpending-this.totalRevenue,o=n-a;e.deficitGap=Math.abs(o);const s=null!==this.budgetGoals.targetRevenue?t:o;if(y(`Need to adjust revenue by $${s.toFixed(1)}B to reach target`),Math.abs(s)<.1)return y("Already at target, no adjustment needed"),e.success=!0,e.achieved=!0,e.message="Already at target",e;const r=["personalIncomeTax","corporateIncomeTax","gst","exciseTaxes","carbonPricing","eiPremiums","customsDuties"],i=r.map((e=>({id:e,...this.revenueSources[e]}))).filter((e=>e&&e.base>0));if(0===i.length)return e.success=!1,e.message="No adjustable revenue sources found",e;const u=this.adjustRevenueProportionally(s,i);if(!u.success)return e.success=!1,e.message=u.message||"Failed to adjust revenue sources",e;const c=this.totalRevenue,l=this.totalSpending-c;if(null!==this.budgetGoals.targetRevenue){const t=Math.abs(c-this.budgetGoals.targetRevenue),a=.05*this.budgetGoals.targetRevenue;e.achieved=t<=a,e.achieved?(e.success=!0,e.message="Auto-balance succeeded in reaching revenue target."):(e.success=!1,e.message=`Auto-balance could not reach the revenue target (off by $${t.toFixed(2)}B). Some sliders may be at their min/max bounds.`,A(`[AutoBalance] Could not reach revenue target. Gap: $${t.toFixed(2)}B`))}else{const t=Math.abs(l-a),n=.5;e.achieved=t<=n,e.achieved?(e.success=!0,e.message="Auto-balance succeeded in reaching deficit target."):(e.success=!1,e.message=`Auto-balance could not reach the deficit target (off by $${t.toFixed(2)}B). Some sliders may be at their min/max bounds.`,A(`[AutoBalance] Could not reach deficit target. Gap: $${t.toFixed(2)}B`))}return e}catch(t){return e.success=!1,e.message=`Error in autoBalanceBudgetForGoal: ${t.message||t}`,console.error(e.message),e}finally{this.completeBatchUpdate()}},adjustRevenueProportionally(e,t){if(Math.abs(e)<.01)return{success:!0,changes:{},message:"No adjustment needed"};const a={success:!0,changes:{},actualAdjustment:0,message:""};if(!Array.isArray(t)||0===t.length)return{success:!1,changes:{},message:"No adjustable revenue sources available"};try{let n=e;if(this.autoBalanceConfig.prioritizePIT){const o=t.find((e=>"personalIncomeTax"===e.id));if(o){const t=o.rate,s=o.base,r=void 0!==o.maxRate?o.maxRate:100,i=void 0!==o.minRate?o.minRate:0,u=.5*e;let c=u/s,l=Math.min(Math.max(t+c,i),r);c=l-t;const d=c*s;a.changes[o.id]={oldRate:t,newRate:l,amountChange:d},n-=d,a.actualAdjustment+=d,this.setRevenueRate(o.id,l),y(`[AutoBalance] PIT: ${t.toFixed(3)} â†’ ${l.toFixed(3)} | Î”$${d.toFixed(2)}B`)}}if(Math.abs(n)>.01){const e=this.autoBalanceConfig.prioritizePIT?t.filter((e=>"personalIncomeTax"!==e.id)):t;if(0===e.length)y("[AutoBalance] No other adjustable sources found for remaining adjustment");else{const t=e.reduce(((e,t)=>e+t.base),0);t<=0?y("[AutoBalance] Warning: Total base for remaining sources is zero or negative"):e.forEach((e=>{const o=e.rate,s=e.base,r=void 0!==e.maxRate?e.maxRate:100,i=void 0!==e.minRate?e.minRate:0,u=s/t;let c=n*u,l=c/s,d=Math.min(Math.max(o+l,i),r);l=d-o;const p=l*s;a.changes[e.id]={oldRate:o,newRate:d,amountChange:p},a.actualAdjustment+=p,this.setRevenueRate(e.id,d),y(`[AutoBalance] ${e.name||e.id}: ${o.toFixed(3)} â†’ ${d.toFixed(3)} | Î”$${p.toFixed(2)}B`)}))}}const o=Math.abs(a.actualAdjustment/e);return a.success=o>=.8,a.success||(a.message=`Revenue adjustment achieved only ${(100*o).toFixed(1)}% of target`),a}catch(n){return A("[AutoBalance] Error in adjustRevenueProportionally:",n),{success:!1,changes:{},message:`Error adjusting revenue: ${n.message||n}`}}},adjustSpendingProportionally(e){if(Math.abs(e)<.01)return{success:!0,changes:{},message:"No adjustment needed"};const t={success:!0,changes:{},actualAdjustment:0,message:""};try{const a=Object.entries(this.spendingCategories).filter((([e,t])=>!t.isGroup&&t.baseAmount>0)).map((([e,t])=>({id:e,category:t})));if(0===a.length)return{success:!1,changes:{},message:"No adjustable spending categories available"};const n=a.reduce(((e,t)=>e+t.category.baseAmount),0);if(n<=0)return{success:!1,changes:{},message:"Total base amount for spending categories is zero or negative"};a.forEach((a=>{const o=a.category.adjustmentFactor||1,s=a.category.baseAmount,r=s/n,i=e*r;let u=i/s,c=o+u;c=Math.max(this.autoBalanceConfig.minSpendingFactor,Math.min(this.autoBalanceConfig.maxSpendingFactor,c)),u=c-o;const l=u*s;t.changes[a.id]={oldFactor:o,newFactor:c,amountChange:l},t.actualAdjustment+=l,y(`[AutoBalance] Spending ${a.id}: ${o.toFixed(3)} â†’ ${c.toFixed(3)} | Î”$${l.toFixed(2)}B`)}));const o=Math.abs(t.actualAdjustment/e);return t.success=o>=.8,t.success||(t.message=`Spending adjustment achieved only ${(100*o).toFixed(1)}% of target`),t}catch(a){return A("[AutoBalance] Error in adjustSpendingProportionally:",a),{success:!1,changes:{},message:`Error adjusting spending: ${a.message||a}`}}},resetBudget(){y("Starting budget reset..."),this.trackBudgetReset();const e=this.autoBalanceActive;e&&y("Auto-Balance was active - disabling it for reset"),this.autoBalanceActive=!1,this.activePreset=null,this.badges=[],this.currentYear||(this.currentYear=2024),this._isRecalculating=!0;try{const e={personalIncomeTax:{rate:21,amount:210,adjustedAmount:210},corporateIncomeTax:{rate:15,amount:80,adjustedAmount:80},gst:{rate:5,amount:50,adjustedAmount:50},exciseTaxes:{rate:2.5,amount:12,adjustedAmount:12},carbonPricing:{rate:1,amount:8,adjustedAmount:8},customsDuties:{rate:1,amount:6,adjustedAmount:6},eiPremiums:{rate:1.35,amount:27,adjustedAmount:27},crownProfits:{rate:2.5,amount:6,adjustedAmount:6},resourceRoyalties:{rate:1,amount:5,adjustedAmount:5},nonTaxRevenue:{rate:3,amount:30,adjustedAmount:30}},t=Object.values(e).reduce(((e,t)=>e+t.amount),0);y(`Expected total revenue after reset: ${t}B`);const a={...this.revenueSources};Object.keys(e).forEach((t=>{if(a[t]){const n=e[t];a[t]={...a[t],rate:n.rate,amount:n.amount,adjustedAmount:n.adjustedAmount,expenditureImpact:0},y(`Reset ${t} to rate: ${n.rate}, amount: ${n.amount}B`)}else A(`Revenue source ${t} does not exist and cannot be reset`)})),this.revenueSources=a;const n={};for(const r in this.spendingCategories){const e=this.spendingCategories[r];if(e.isGroup){if(e.children){const t={};for(const a in e.children)t[a]={...e.children[a],adjustmentFactor:1};n[r]={...e,children:t}}}else n[r]={...e,adjustmentFactor:1}}this.spendingCategories=n,this.expandedGroups={incomeTaxes:!0,consumptionTaxes:!0,otherRevenues:!0,mainCategories:!0,otherCategories:!1,governmentOperations:!1,taxExpenditures:!0},this.revenueSources.cppPremiums&&(y("CPP Premiums found in store but not in defaults - setting to zero"),this.revenueSources={...this.revenueSources,cppPremiums:{...this.revenueSources.cppPremiums,rate:0,amount:0,adjustedAmount:0,expenditureImpact:0}}),this.recalculateTotals();const o=this.totalRevenue;y(`Total revenue after reset: ${o}B (expected: ${t}B)`),this.badges=[],this.lastBadgeUpdate=Date.now(),this.lastRevenueSourceUpdate=Date.now(),this.autoBalanceActive&&(A("Auto-balance was re-enabled during reset - forcing it off again"),this.autoBalanceActive=!1);const s=this.totalRevenue;if(Math.abs(s-t)>.5){A(`Final revenue check: ${s}B doesn't match expected ${t}B`);const e=t-s;this.revenueSources={...this.revenueSources,personalIncomeTax:{...this.revenueSources.personalIncomeTax,amount:this.revenueSources.personalIncomeTax.amount+e,adjustedAmount:this.revenueSources.personalIncomeTax.adjustedAmount+e,rate:(this.revenueSources.personalIncomeTax.amount+e)/this.revenueSources.personalIncomeTax.base}},y(`Applied final correction of ${e}B to personal income tax`)}}finally{this._isRecalculating=!1}this.lastUpdate=Date.now(),this.syncToLocalStorage(),console.log("Budget reset to initial state with badges cleared"),console.log("Total Revenue after reset:",this.totalRevenue)},syncToLocalStorage(){try{this.isSaving=!0;const e={revenueSources:{},spendingCategories:{},taxExpenditures:{},fixedCosts:this.fixedCosts,expandedGroups:this.expandedGroups,currentYear:this.currentYear,budgetGoals:this.budgetGoals,goalStatus:this.goalStatus,badges:this.badges,lastBadgeUpdate:this.lastBadgeUpdate,activePreset:this.activePreset};for(const t in this.revenueSources)e.revenueSources[t]={rate:this.revenueSources[t].rate};for(const t in this.spendingCategories)e.spendingCategories[t]={adjustmentFactor:this.spendingCategories[t].adjustmentFactor};for(const t in this.taxExpenditures)e.taxExpenditures[t]={adjustmentFactor:this.taxExpenditures[t].adjustmentFactor};d.D8.save(e),console.log("Successfully saved budget to localStorage using enhanced persistence")}catch(e){console.error("Error saving budget to localStorage:",e)}finally{this.isSaving=!1}},autoSaveState(){try{const e={revenueSources:this.revenueSources,spendingCategories:this.spendingCategories,taxExpenditures:this.taxExpenditures,currentYear:this.currentYear,expandedGroups:this.expandedGroups,badges:this.badges,activePreset:this.activePreset,lastUpdate:Date.now()};d.D8.autoSave(e)}catch(e){console.error("[BudgetStore] Failed to auto-save state:",e)}},async initializeBudget(){this.isLoading=!0;try{const e=d.D8.load();e?this.restoreFromSavedState(e):this.initializeWithDefaults(),this.recalculateTotals()}catch(e){console.error("[BudgetStore] Failed to initialize budget:",e),this.initializeWithDefaults()}finally{this.isLoading=!1}},restoreFromSavedState(e){e.revenueSources&&Object.keys(e.revenueSources).forEach((t=>{this.revenueSources[t]&&(this.revenueSources[t].rate=e.revenueSources[t].rate)})),e.spendingCategories&&Object.keys(e.spendingCategories).forEach((t=>{this.spendingCategories[t]&&(this.spendingCategories[t].adjustmentFactor=e.spendingCategories[t].adjustmentFactor)})),e.currentYear&&(this.currentYear=e.currentYear),e.expandedGroups&&(this.expandedGroups={...this.expandedGroups,...e.expandedGroups}),e.badges&&(this.badges=e.badges),e.activePreset&&(this.activePreset=e.activePreset)},initializeWithDefaults(){const e={};for(const a in this.revenueSources){const t=this.revenueSources[a];e[a]={...t,amount:t.base*t.rate,adjustedAmount:t.base*t.rate,expenditureImpact:0}}this.revenueSources=e;const t={};for(const a in this.taxExpenditures){const e=this.taxExpenditures[a];t[a]={...e,adjustment:e.baseAdjustment||0,revenueImpact:0}}this.taxExpenditures=t;for(const a in this.revenueSources)this.updateRevenueSourceAdjustedAmount(a);this.syncToLocalStorage()},getDefaultRate(e){const t=this.revenueSources[e];if(t&&t.rateByYear&&void 0!==t.rateByYear[this.currentYear])return t.rateByYear[this.currentYear];switch(e){case"personalIncomeTax":return 21;case"corporateIncomeTax":return 15;case"gst":return 5;case"exciseTaxes":return 2.5;case"carbonPricing":return 1;case"eiPremiums":return 1.35;case"customsDuties":return 1;case"crownProfits":return 2.5;case"nonTaxRevenue":return 3;case"resourceRoyalties":return 1;default:return 0}},updateTaxExpenditureAdjustment:(0,m.Oo)((function(e,t){try{const a=this.taxExpenditures[e];if(!a)return;const n=Number(t)||0,o=Math.max(-100,Math.min(100,n)),s=a.adjustmentFactor||0,r=Number(a.netAmount)||0,i=-1*r*(o/100);console.log(`Updating tax expenditure ${e} to ${o}%, impact: ${i}B, batch mode: ${this.isBatchUpdateInProgress}`),this.taxExpenditures={...this.taxExpenditures,[e]:{...a,adjustmentFactor:o,revenueImpact:isNaN(i)?0:i}},a.linkedRevenueSource&&this.updateRevenueSourceAdjustedAmount(a.linkedRevenueSource),this.trackTaxExpenditureChange(e,s,o),this.isBatchUpdateInProgress||(this.lastUpdate=Date.now(),this.lastTaxExpenditureUpdate=Date.now(),this.setSentimentUpdateRequired(!0),this.syncToLocalStorage())}catch(a){console.error(`Error updating tax expenditure ${e}:`,a)}}),p.JE.taxExpenditureAdjustment,"updateTaxExpenditureAdjustment"),updateLinkedRevenueSource(e){try{const t=this.taxExpenditures[e];if(!t)return void console.error(`Tax expenditure not found: ${e}`);t.linkedRevenueSource&&this.updateRevenueSourceAdjustedAmount(t.linkedRevenueSource)}catch(t){console.error(`Error updating linked revenue source for ${e}:`,t)}},updateRevenueSourceAdjustedAmount(e){try{const t=this.revenueSources[e];if(!t)return void console.error(`Revenue source not found: ${e}`);let a=0;Object.values(this.taxExpenditures).forEach((t=>{if(t.linkedRevenueSource===e&&void 0!==t.adjustmentFactor){const e=Number(t.netAmount)||0,n=Number(t.adjustmentFactor)||0,o=-1*e*(n/100);a+=isNaN(o)?0:o}}));const n=Number(t.amount)||0,o=Math.max(0,n+a);this.revenueSources={...this.revenueSources,[e]:{...t,adjustedAmount:isNaN(o)?n:o,expenditureImpact:isNaN(a)?0:a}},this.lastUpdate=Date.now(),console.log(`Updated revenue source ${e}: base amount ${n}B, tax impact ${a}B, adjusted ${o}B`)}catch(t){console.error(`Error updating revenue source ${e}:`,t)}},updateRevenueSourceAmount:(0,m.Oo)((function(e,t){try{const a=this.revenueSources[e];if(!a)return void console.error(`Revenue source not found: ${e}`);const n=Number(t);if(isNaN(n))return void console.error(`Invalid amount provided for ${e}: ${t}`);const o={...a,amount:n,adjustedAmount:n};if(a.base){const e=Number(a.base)||1;o.rate=n/e}this.revenueSources={...this.revenueSources,[e]:o},this.updateRevenueSourceAdjustedAmount(e),this.lastUpdate=Date.now(),this.syncToLocalStorage(),console.log(`Updated revenue source ${e} amount to ${n}B`)}catch(a){console.error(`Error updating revenue source amount for ${e}:`,a)}}),p.JE.revenueSourceAmount,"updateRevenueSourceAmount"),updateRevenueSourceRate(e,t){return this.setRevenueRate(e,t)},resetTaxExpenditures(){const e={};for(const t in this.taxExpenditures){const a=this.taxExpenditures[t];e[t]={...a,adjustmentFactor:0,revenueImpact:0,adjustmentPercent:0,adjustedAmount:a.baseAmount}}this.taxExpenditures=e,this.lastTaxExpenditureUpdate=Date.now();for(const t in this.revenueSources)this.updateRevenueSourceAdjustedAmount(t);this.lastUpdate=Date.now(),this.recalculateTotals(),this.updateBadges(),console.log("Reset all tax expenditures to 0")},updateBadges(){const e=this.budgetDataForBadges;console.log("%c[STORE DEBUG] updateBadges called","background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;"),console.log("Active preset in store:",this.activePreset),console.log("Budget data for badges:",e);const t=this.activePreset||null;console.log("%c[STORE DEBUG] Calling getBudgetBadges with preset:","color: #e67e22;",t);const a=l(e,t);console.log("%c[STORE DEBUG] Earned badges:","color: #2ecc71;",a.map((e=>e.title))),this.badges=[...a],this.lastBadgeUpdate=Date.now(),this.$patch({lastBadgeUpdate:Date.now()}),this.syncToLocalStorage()},_performRecalculation(){if(!this._isRecalculating){this._isRecalculating=!0,this._lastRecalculationTime=Date.now();try{Object.keys(this.revenueSources).forEach((e=>{this.updateRevenueSourceAdjustedAmount(e)})),this.lastTaxExpenditureUpdate=Date.now(),this.lastRevenueSourceUpdate=Date.now(),this.budgetGoals.enabled&&this.updateGoalStatus(),this.updateBadges(),this.autoBalanceActive&&(this.budgetGoals.enabled&&null!==this.budgetGoals.targetDeficit?this.autoBalanceBudgetForGoal():this.autoBalanceBudget());const e=this.surplus;e>50?console.warn(`Surplus exceeds $50B limit: $${e.toFixed(1)}B`):e<-50&&console.warn(`Deficit exceeds $50B limit: $${-e.toFixed(1)}B`)}finally{this._isRecalculating=!1}}},addBudgetChange(e,t,a,n,o,s,r=null,i=null){console.log("%c[CHANGE DEBUG] addBudgetChange called:","background: #2ecc71; color: white; padding: 2px 5px;",{type:e,category:t,itemId:a,itemName:n,oldValue:o,newValue:s,dollarImpact:i,changeHistoryLength:this.changeHistory.length});const u=this.changeHistory.findIndex((t=>t.type===e&&t.itemId===a));-1!==u&&(console.log("%c[CHANGE DEBUG] Dedup: removing existing change for same item","background: #f1c40f; color: black; padding: 2px 5px;",{removedId:this.changeHistory[u]?.id,removedType:this.changeHistory[u]?.type,removedItemId:this.changeHistory[u]?.itemId}),this.changeHistory.splice(u,1));const c=new S(e,t,a,n,o,s,r,i);console.log("%c[CHANGE DEBUG] Created ChangeRecord:","background: #9b59b6; color: white; padding: 2px 5px;",{id:c.id,type:c.type,category:c.category,description:c.description,amount:c.amount,dollarImpact:c.dollarImpact,hasGetDisplayAmount:"function"===typeof c.getDisplayAmount}),this.changeHistory.unshift(c),this.changeHistory.length>this.maxChangeHistorySize&&(this.changeHistory=this.changeHistory.slice(0,this.maxChangeHistorySize)),this.changeHistoryVersion++,console.log("%c[CHANGE DEBUG] Change added to history:","background: #34495e; color: white; padding: 2px 5px;",{newHistoryLength:this.changeHistory.length,newHistoryVersion:this.changeHistoryVersion}),y(`Added budget change: ${c.description}`)},trackRevenueChange(e,t,a){console.log("%c[CHANGE DEBUG] trackRevenueChange called:","background: #e74c3c; color: white; padding: 2px 5px;",{sourceId:e,oldRate:t,newRate:a,rateDiff:a-t,threshold:.001,willTrack:Math.abs(a-t)>=.001});const n=this.revenueSources[e];if(!n)return void console.warn("%c[CHANGE DEBUG] Revenue source not found:","background: #e67e22; color: white; padding: 2px 5px;",e);const o=T[e]||f.OTHER_REVENUE,s=n.base*(a-t);console.log("%c[CHANGE DEBUG] Revenue change details:","background: #3498db; color: white; padding: 2px 5px;",{sourceName:n.name,category:o,base:n.base,dollarImpact:s,isBatchMode:this.isBatchUpdateInProgress,REVENUE_CATEGORY_MAP:T[e]}),this.addBudgetChange(b.REVENUE,o,e,n.name,t,a,null,s)},trackSpendingChange(e,t,a){let n="Unknown Category",o=f.MAIN_SPENDING,s=0;Object.values(this.spendingCategories).forEach((t=>{t.id!==e||t.isGroup||(n=t.name,s=t.baseAmount||0,o=x[e]||f.MAIN_SPENDING)})),Object.values(this.spendingCategories).filter((e=>e.isGroup&&e.children)).forEach((t=>{const a=Object.values(t.children).find((t=>t.id===e));a&&(n=a.name,s=a.baseAmount||0,o=x[e]||f.MAIN_SPENDING)}));const r=s*(a-t);this.addBudgetChange(b.SPENDING,o,e,n,100*t,100*a,null,r)},trackTaxExpenditureChange(e,t,a){const n=this.taxExpenditures[e];if(!n)return;const o=(a||0)-(t||0),s=Number(n.netAmount)||0,r=-1*s*(o/100);this.addBudgetChange(b.TAX_EXPENDITURE,f.TAX_CREDITS,e,n.name,t,a,null,r)},trackPresetApplication(e,t){this.addBudgetChange(b.PRESET,f.SYSTEM_ACTIONS,e,`Applied Preset: ${t}`,0,0,`Applied "${t}" preset configuration`)},trackAutoBalance(){this.addBudgetChange(b.AUTO_BALANCE,f.SYSTEM_ACTIONS,"auto_balance","Auto-Balance Applied",0,0,"Budget automatically balanced")},trackBudgetReset(){this.addBudgetChange(b.RESET,f.SYSTEM_ACTIONS,"budget_reset","Budget Reset",0,0,"Budget reset to default values")},clearChangeHistory(){this.changeHistory=[],this.changeHistoryVersion++,y("Cleared change history")},getChangesByCategory(){console.log("%c[CHANGE DEBUG] getChangesByCategory called:","background: #16a085; color: white; padding: 2px 5px;",{totalChanges:this.changeHistory.length,historyVersion:this.changeHistoryVersion});const e={};return this.changeHistory.forEach((t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)})),console.log("%c[CHANGE DEBUG] Changes grouped by category:","background: #8e44ad; color: white; padding: 2px 5px;",{categories:Object.keys(e),categoryCounts:Object.entries(e).map((([e,t])=>({category:e,count:t.length})))}),e},getRecentChanges(e=10){return this.changeHistory.slice(0,e)},getChangesByType(e){return this.changeHistory.filter((t=>t.type===e))},getChangesSummary(){const e=this.getChangesByType(b.REVENUE),t=this.getChangesByType(b.SPENDING),a=this.getChangesByType(b.TAX_EXPENDITURE);return{totalRevenueChange:e.reduce(((e,t)=>e+(t.dollarImpact||0)),0),totalSpendingChange:t.reduce(((e,t)=>e+(t.dollarImpact||0)),0),totalTaxExpenditureChange:a.reduce(((e,t)=>e+t.amount),0),changeCount:this.changeHistory.length,lastChange:this.changeHistory[0]||null}},debouncedSyncToLocalStorage:(0,g.sg1)((function(){this.syncToLocalStorage()}),500)}})},20561:function(e,t,a){a.d(t,{J:function(){return s},o:function(){return o}});a(44114);var n=a(14171);function o(e){const t=t=>e instanceof URLSearchParams?e.get(t):e[t],a=t=>e instanceof URLSearchParams?e.has(t):t in e&&null!=e[t],o=()=>e instanceof URLSearchParams?Array.from(e.entries()):Object.entries(e);try{const e=Number(t("surplus")||0),n=Number(t("revenue")||0),s=Number(t("debt")||0),r={};for(const[t,a]of o())t.startsWith("r_")&&(r[t.substring(2)]=Number(a));const i={};for(const[t,a]of o())t.startsWith("s_")&&(i[t.substring(2)]=Number(a));let u=[];a("badges")&&(u=t("badges").split(",").filter(Boolean));const c=e=>{const n=[];let o=0;while(a(`${e}${o}_name`)&&a(`${e}${o}_score`))n.push({name:t(`${e}${o}_name`),score:Number(t(`${e}${o}_score`))}),o++;return n},l=c("pos"),d=c("neg"),p=t("title")||"",m=t("description")||"",g=t("partyId")||null,h=t("partyColor")||"";let v=[];return a("highlights")&&(v=t("highlights").split("|").filter(Boolean)),{surplus:e,revenue:n,debt:s,revenueSources:r,spendingCategories:i,badges:u,positiveSegments:l,negativeSegments:d,title:p,description:m,partyId:g,partyColor:h,highlights:v}}catch(s){return(0,n.H4)(s,(e=>alert(e))),{}}}async function s(e,t){try{for(const[a,n]of Object.entries(e.revenueSources||{}))t.revenueSources[a]&&t.updateRevenueRate(a,n);for(const[a,n]of Object.entries(e.spendingCategories||{}))t.spendingCategories[a]&&t.updateSpendingFactor(a,n)}catch(a){(0,n.H4)(a,(e=>alert(e)))}}},57161:function(e,t,a){a.d(t,{AA:function(){return i},AP:function(){return c},Dg:function(){return m},Ei:function(){return r},Em:function(){return T},FF:function(){return s},H8:function(){return l},KF:function(){return A},KU:function(){return E},LF:function(){return x},LU:function(){return y},Mh:function(){return o},RJ:function(){return v},Rx:function(){return n},Sw:function(){return S},YG:function(){return b},Yl:function(){return h},d0:function(){return f},p8:function(){return d},tY:function(){return u},wK:function(){return p},wZ:function(){return g}});const n=[{label:"Annual",value:"Annual",periodMultiplier:1},{label:"Monthly",value:"Monthly",periodMultiplier:12},{label:"Bi-weekly",value:"Bi-weekly",periodMultiplier:26},{label:"Weekly",value:"Weekly",periodMultiplier:52},{label:"Daily",value:"Daily",periodMultiplier:260},{label:"Hourly",value:"Hourly",periodMultiplier:2080}],o={basicPersonalAmount:15705,spouseAmount:15705,ageAmount:8396,disabilityAmount:9428,caregiverAmount:7999,pensionIncomeAmount:2e3,employmentAmount:1433,homeBuyersAmount:5e3,digitalNewsSubscriptionMax:500,volunteerFirefightersAmount:3e3,adoptionExpensesMax:17131,medicalExpensesThreshold:2479,charitableDonationsThreshold:200,charitableDonationsHighIncomeThreshold:253214},s={basicPersonalAmount:16129,spouseAmount:16129,ageAmount:8396,disabilityAmount:9428,caregiverAmount:7999,pensionIncomeAmount:2e3,employmentAmount:1368,homeBuyersAmount:5e3,digitalNewsSubscriptionMax:500,volunteerFirefightersAmount:3e3,adoptionExpensesMax:17131,medicalExpensesThreshold:2479,charitableDonationsThreshold:200,charitableDonationsHighIncomeThreshold:253214},r=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan","Northwest Territories","Nunavut","Yukon"],i=14398,u=15e3,c=15705,l=16129,d={AB:19369,BC:11302,MB:10145,NB:10917,NL:9802,NS:8481,NT:15609,NU:16593,ON:11041,PE:11050,QC:16143,SK:16415,YT:14398},p={AB:21103,BC:11581,MB:10355,NB:11220,NL:10082,NS:8481,NT:15936,NU:16967,ON:11141,PE:11350,QC:16593,SK:16861,YT:15e3},m={AB:21503,BC:11809,MB:10582,NB:11458,NL:10293,NS:8659,NT:16267,NU:17321,ON:11365,PE:11581,QC:18056,SK:17206,YT:15705},g={AB:21885,BC:11302,MB:15e3,NB:12458,NL:10382,NS:8481,NT:16593,NU:16862,ON:12747,PE:14250,QC:18571,SK:17661,YT:16129},h=[{rate:.15,upTo:50197},{rate:.205,upTo:100392},{rate:.26,upTo:155625},{rate:.29,upTo:221708},{rate:.33,upTo:1/0}],v=[{rate:.15,upTo:53359},{rate:.205,upTo:106717},{rate:.26,upTo:165430},{rate:.29,upTo:235675},{rate:.33,upTo:1/0}],b=[{rate:.15,upTo:55867},{rate:.205,upTo:111733},{rate:.26,upTo:173205},{rate:.29,upTo:246752},{rate:.33,upTo:1/0}],f=[{rate:.15,upTo:57375},{rate:.205,upTo:114750},{rate:.26,upTo:177882},{rate:.29,upTo:253414},{rate:.33,upTo:1/0}],T={AB:[{rate:.1,upTo:131220},{rate:.12,upTo:157464},{rate:.13,upTo:209952},{rate:.14,upTo:314928},{rate:.15,upTo:1/0}],BC:[{rate:.0506,upTo:45654},{rate:.077,upTo:91310},{rate:.105,upTo:104835},{rate:.1229,upTo:127299},{rate:.147,upTo:172602},{rate:.168,upTo:240716},{rate:.205,upTo:1/0}],MB:[{rate:.108,upTo:34431},{rate:.1275,upTo:74416},{rate:.174,upTo:1/0}],NB:[{rate:.094,upTo:47715},{rate:.14,upTo:95431},{rate:.16,upTo:176756},{rate:.195,upTo:1/0}],NL:[{rate:.087,upTo:39147},{rate:.145,upTo:78294},{rate:.158,upTo:139780},{rate:.173,upTo:195693},{rate:.183,upTo:25e4},{rate:.208,upTo:5e5},{rate:.213,upTo:1e6},{rate:.218,upTo:1/0}],NS:[{rate:.0879,upTo:29590},{rate:.1495,upTo:59180},{rate:.1667,upTo:93e3},{rate:.175,upTo:15e4},{rate:.21,upTo:1/0}],ON:[{rate:.0505,upTo:46226},{rate:.0915,upTo:92454},{rate:.1116,upTo:15e4},{rate:.1216,upTo:22e4},{rate:.1316,upTo:1/0}],PE:[{rate:.098,upTo:31984},{rate:.138,upTo:63969},{rate:.167,upTo:1/0}],QC:[{rate:.15,upTo:46295},{rate:.2,upTo:92580},{rate:.24,upTo:112655},{rate:.2575,upTo:1/0}],SK:[{rate:.105,upTo:45677},{rate:.125,upTo:130506},{rate:.145,upTo:1/0}],NT:[{rate:.059,upTo:44396},{rate:.086,upTo:88796},{rate:.122,upTo:144362},{rate:.1405,upTo:1/0}],NU:[{rate:.04,upTo:44437},{rate:.07,upTo:88874},{rate:.09,upTo:144362},{rate:.115,upTo:1/0}],YT:[{rate:.064,upTo:49020},{rate:.09,upTo:98040},{rate:.109,upTo:151978},{rate:.128,upTo:5e5},{rate:.15,upTo:1/0}]},x={AB:[{rate:.1,upTo:142292},{rate:.12,upTo:170751},{rate:.13,upTo:227668},{rate:.14,upTo:341502},{rate:.15,upTo:1/0}],BC:[{rate:.0506,upTo:43070},{rate:.077,upTo:86141},{rate:.105,upTo:98901},{rate:.1229,upTo:120094},{rate:.147,upTo:162832},{rate:.168,upTo:227091},{rate:.205,upTo:1/0}],MB:[{rate:.108,upTo:33723},{rate:.1275,upTo:72885},{rate:.174,upTo:1/0}],NB:[{rate:.0968,upTo:43835},{rate:.1482,upTo:87671},{rate:.1652,upTo:142534},{rate:.1784,upTo:162383},{rate:.203,upTo:1/0}],NL:[{rate:.087,upTo:39157},{rate:.145,upTo:78315},{rate:.158,upTo:139780},{rate:.173,upTo:195693},{rate:.183,upTo:1/0}],NS:[{rate:.0879,upTo:29590},{rate:.1495,upTo:59180},{rate:.1667,upTo:93e3},{rate:.175,upTo:15e4},{rate:.21,upTo:1/0}],ON:[{rate:.0505,upTo:46226},{rate:.0915,upTo:92454},{rate:.1116,upTo:15e4},{rate:.1216,upTo:22e4},{rate:.1316,upTo:1/0}],PE:[{rate:.0985,upTo:31984},{rate:.138,upTo:63969},{rate:.167,upTo:1/0}],QC:[{rate:.15,upTo:45545},{rate:.2,upTo:91105},{rate:.24,upTo:112655},{rate:.2575,upTo:1/0}],SK:[{rate:.105,upTo:47677},{rate:.125,upTo:136385},{rate:.145,upTo:1/0}],NT:[{rate:.059,upTo:44437},{rate:.086,upTo:88874},{rate:.122,upTo:144362},{rate:.1405,upTo:1/0}],NU:[{rate:.04,upTo:45462},{rate:.07,upTo:90925},{rate:.09,upTo:147692},{rate:.115,upTo:1/0}],YT:[{rate:.064,upTo:50197},{rate:.09,upTo:100392},{rate:.109,upTo:155625},{rate:.128,upTo:5e5},{rate:.15,upTo:1/0}]},S={AB:[{rate:.1,upTo:148269},{rate:.12,upTo:177922},{rate:.13,upTo:237230},{rate:.14,upTo:355845},{rate:.15,upTo:1/0}],BC:[{rate:.0506,upTo:45654},{rate:.077,upTo:91310},{rate:.105,upTo:104835},{rate:.1229,upTo:127299},{rate:.147,upTo:172602},{rate:.168,upTo:240716},{rate:.205,upTo:1/0}],MB:[{rate:.108,upTo:34431},{rate:.1275,upTo:74416},{rate:.174,upTo:1/0}],NB:[{rate:.094,upTo:47715},{rate:.14,upTo:95431},{rate:.16,upTo:176756},{rate:.195,upTo:1/0}],NL:[{rate:.087,upTo:39147},{rate:.145,upTo:78294},{rate:.158,upTo:139780},{rate:.173,upTo:195693},{rate:.183,upTo:25e4},{rate:.208,upTo:5e5},{rate:.213,upTo:1e6},{rate:.218,upTo:1/0}],NS:[{rate:.0879,upTo:29590},{rate:.1495,upTo:59180},{rate:.1667,upTo:93e3},{rate:.175,upTo:15e4},{rate:.21,upTo:1/0}],ON:[{rate:.0505,upTo:46226},{rate:.0915,upTo:92454},{rate:.1116,upTo:15e4},{rate:.1216,upTo:22e4},{rate:.1316,upTo:1/0}],PE:[{rate:.098,upTo:31984},{rate:.138,upTo:63969},{rate:.167,upTo:1/0}],QC:[{rate:.14,upTo:51780},{rate:.2,upTo:103545},{rate:.24,upTo:126e3},{rate:.2575,upTo:1/0}],SK:[{rate:.105,upTo:45677},{rate:.125,upTo:130506},{rate:.145,upTo:1/0}],NT:[{rate:.059,upTo:44396},{rate:.086,upTo:88796},{rate:.122,upTo:144362},{rate:.1405,upTo:1/0}],NU:[{rate:.04,upTo:44437},{rate:.07,upTo:88874},{rate:.09,upTo:144362},{rate:.115,upTo:1/0}],YT:[{rate:.064,upTo:49020},{rate:.09,upTo:98040},{rate:.109,upTo:151978},{rate:.128,upTo:5e5},{rate:.15,upTo:1/0}]},y={AB:[{rate:.1,upTo:151234},{rate:.12,upTo:181481},{rate:.13,upTo:241974},{rate:.14,upTo:362961},{rate:.15,upTo:1/0}],BC:[{rate:.0506,upTo:49279},{rate:.077,upTo:98560},{rate:.105,upTo:113158},{rate:.1229,upTo:137407},{rate:.147,upTo:186306},{rate:.168,upTo:259829},{rate:.205,upTo:1/0}],MB:[{rate:.108,upTo:47564},{rate:.1275,upTo:101200},{rate:.174,upTo:1/0}],NB:[{rate:.094,upTo:51306},{rate:.14,upTo:102614},{rate:.16,upTo:190060},{rate:.195,upTo:1/0}],NL:[{rate:.087,upTo:44192},{rate:.145,upTo:88382},{rate:.158,upTo:157792},{rate:.178,upTo:220910},{rate:.198,upTo:282214},{rate:.208,upTo:564429},{rate:.213,upTo:1128858},{rate:.218,upTo:1/0}],NS:[{rate:.0879,upTo:30507},{rate:.1495,upTo:61015},{rate:.1667,upTo:95883},{rate:.175,upTo:154650},{rate:.21,upTo:1/0}],ON:[{rate:.0505,upTo:52886},{rate:.0915,upTo:105775},{rate:.1116,upTo:15e4},{rate:.1216,upTo:22e4},{rate:.1316,upTo:1/0}],PE:[{rate:.095,upTo:33328},{rate:.1347,upTo:64656},{rate:.166,upTo:105e3},{rate:.1762,upTo:14e4},{rate:.19,upTo:1/0}],QC:[{rate:.14,upTo:53295},{rate:.19,upTo:106585},{rate:.24,upTo:129275},{rate:.2575,upTo:1/0}],SK:[{rate:.105,upTo:53463},{rate:.125,upTo:152750},{rate:.145,upTo:1/0}],NT:[{rate:.059,upTo:51964},{rate:.086,upTo:103930},{rate:.122,upTo:168967},{rate:.1405,upTo:1/0}],NU:[{rate:.04,upTo:54707},{rate:.07,upTo:109413},{rate:.09,upTo:177881},{rate:.115,upTo:1/0}],YT:[{rate:.064,upTo:57375},{rate:.09,upTo:114750},{rate:.109,upTo:177882},{rate:.128,upTo:5e5},{rate:.15,upTo:1/0}]},A=[{id:1,key:"healthcare",name:"Healthcare (Canada Health Transfer)",amount:582e8,description:"Funding for healthcare systems across Canada, including medical and technical aid, healthcare professionals training, and public health initiatives."},{id:2,key:"childrenAndFamilies",name:"Children and Families",amount:269e8,description:"Support for families with children, including the Canada Child Benefit (CCB), childcare initiatives, and family support programs."},{id:3,key:"indigenousServices",name:"Indigenous Services",amount:398e8,description:"Funding for Indigenous communities, including healthcare, education, infrastructure, and community development."},{id:4,key:"employmentInsuranceAndBenefits",name:"Employment Insurance and Benefits",amount:356e8,description:"Employment insurance benefits and related employment programs."},{id:5,key:"supportForSeniors",name:"Support for Seniors",amount:691e8,description:"Old Age Security, Guaranteed Income Supplement, and other senior support programs."},{id:6,key:"defense",name:"Defense",amount:364e8,description:"National defense spending, including military procurement, operations, and personnel costs."},{id:7,key:"publicSafetyAndEmergencyPreparedness",name:"Public Safety and Emergency Preparedness",amount:116e8,description:"Funding for police, border security, corrections, and emergency management."},{id:8,key:"internationalAffairsAndDevelopment",name:"International Affairs and Development",amount:98e8,description:"International aid, diplomacy, and global development initiatives."},{id:9,key:"publicDebtCharges",name:"Public Debt Charges",amount:427e8,description:"Interest payments on the federal debt."},{id:10,key:"loansInvestmentsAndAdvances",name:"Loans, Investments, and Advances",amount:1e10,description:"Government loans, investments, and financial advances."},{id:11,key:"otherGovernmentOperations",name:"Other Government Operations",amount:242e9,description:"Various government operations including General Public Services ($40B), Social Protection Programs ($30B), Economic Affairs ($12B), and other departments and agencies."}],E=[{id:1,key:"healthcareCanadaHealthTransfer",name:"Healthcare (Canada Health Transfer)",amount:504e8,description:"The federal government supports provincial and territorial healthcare systems through the Canada Health Transfer (CHT). This funding assists in delivering universal healthcare, including hospitals, healthcare professionals, and public health initiatives. Healthcare expenditures represent approximately 10% of total federal spending."},{id:2,key:"supportForSeniors",name:"Support for Seniors",amount:76e9,description:"This allocation funds programs like Old Age Security (OAS) and the Guaranteed Income Supplement (GIS), providing basic income support to seniors. Driven by Canada's aging population, these programs account for around 14% of total federal spending."},{id:3,key:"childrenAndFamilies",name:"Children and Families",amount:263e8,description:"The Canada Child Benefit (CCB) offers income support to low- and middle-income families to assist with child-rearing costs. This initiative plays a crucial role in reducing child poverty and constitutes about 6% of federal spending."},{id:4,key:"indigenousServicesAndReconciliation",name:"Indigenous Services and Reconciliation",amount:355e8,description:"This funding supports Indigenous communities through initiatives in healthcare, education, infrastructure, and reconciliation efforts, including land claim settlements. Indigenous services represent around 7% of the total federal budget."},{id:5,key:"employmentInsuranceAndOtherBenefits",name:"Employment Insurance and Other Benefits",amount:231e8,description:"Funding for Employment Insurance (EI) provides income support to temporarily unemployed workers, new parents, and seasonal employees. This category also includes retraining and skill development programs, making up around 5% of federal spending."},{id:6,key:"defenseAndPublicSafety",name:"Defense and Public Safety",amount:326e8,description:"Expenditures cover the Canadian Armed Forces, military procurement (e.g., ships, aircraft), and public safety programs like border security and cybersecurity. This reflects Canada's defense commitments and represents about 6% of the total budget."},{id:7,key:"debtServicingPublicDebtCharges",name:"Debt Servicing (Public Debt Charges)",amount:473e8,description:"Payments for interest on Canada's national debt, which totaled $1.173 trillion by the end of the fiscal year. Rising interest rates have increased debt servicing costs, accounting for around 9% of total spending."},{id:8,key:"loansInvestmentsAndAdvances",name:"Loans, Investments, and Advances",amount:1e10,description:"This category encompasses various financial assistance programs including Student Loans ($24B total portfolio), Agriculture Loans ($162M), International Development and Loans ($53B total), Business and Innovation Loans ($600M), Defense Sector Loans ($1.45B), and Economic Development Loans."},{id:9,key:"otherGovernmentOperations",name:"Other Government Operations",amount:14e10,description:"This category includes Transportation Infrastructure ($15B), Environmental Programs ($8B), Public Safety ($9B), Government Buildings ($7B), Research and Innovation ($10B), Digital Government ($5B), Federal Employee Salaries ($35B), Legal and Justice System ($5B), Indigenous Services Operations ($4B), Cultural Programs ($2B), Scientific R&D ($5B), and Diplomatic Representation ($5B)."}]},57284:function(e,t,a){a.d(t,{r:function(){return i}});var n=a(10810),o=a(6934),s=a(57161),r=a(63963);const i=(0,n.nY)("salary",(()=>{const e=(0,o.KR)("Annual"),t=(0,r.$C)("salary","selectedSalaryRate",(function(t){e.value=t})),a=(0,o.EW)((()=>{if(!s.Rx)return 1;const t=s.Rx.find((t=>t.value===e.value));return t?t.periodMultiplier:1}));return{selectedSalaryRate:e,selectSalaryRate:t,periodMultiplier:a}}))},21775:function(e,t,a){a.d(t,{U:function(){return r}});var n=a(10810),o=a(6934),s=a(63963);const r=(0,n.nY)("year",(()=>{const e=[{id:"2023",label:"2022-2023"},{id:"2024",label:"2023-2024"},{id:"2025",label:"2024-2025"}],t=(0,o.KR)("2025"),a=(0,o.EW)((()=>"2024"===t.value?"2023-2024":"2022-2023")),n=(0,s.$C)("year","selectedTaxYear",(function(e){t.value=e}));return{taxYears:e,selectedTaxYear:t,budgetYear:a,setSelectedTaxYear:n}}))},26796:function(e,t,a){a.r(t),a.d(t,{default:function(){return Le}});var n=a(6934),o=a.p+"img/email-icon.6436b412.svg";const s={id:"app"},r={key:1},i={class:"main-container"},u={class:"logo-container"},c=["src","alt"],l={class:"main-title main-title--highlight"},d={class:"header-actions"},p={class:"main-navigation"},m={href:"https://www.canada.ca/en/revenue-agency.html",target:"_blank",rel:"noopener noreferrer",class:"nav-link"},g=["aria-label"],h=["onClick"],v={class:"subtitle subtitle--highlight"},b={class:"year-selector-section"},f={class:"year-selector-container"},T={class:"year-selector-title"},x={class:"year-selector"},S=["onClick"],y={class:"year-selector-note"},A={class:"calculator-wrapper"},E={class:"section-title section-title--highlight"},R={class:"section-description section-description--highlight"},C={class:"section-header"},B={class:"section-title"},I={key:0},k={class:"section-description"},w={class:"section-header"},N={class:"section-title"},j={key:0},P={class:"section-title"},F={class:"resources-description"},D={class:"resources-links"},_={href:"https://www.canada.ca/en/revenue-agency.html",target:"_blank",rel:"noopener noreferrer",class:"resource-link"},G={href:"https://www.canada.ca/en/department-finance.html",target:"_blank",rel:"noopener noreferrer",class:"resource-link"},$={href:"https://www.budget.canada.ca/2024/home-accueil-en.html",target:"_blank",rel:"noopener noreferrer",class:"resource-link"},M={href:"https://www.tpsgc-pwgsc.gc.ca/recgen/cpc-pac/index-eng.html",target:"_blank",rel:"noopener noreferrer",class:"resource-link"},O={class:"site-footer"},L={class:"footer-content"},U={class:"footer-section"},Y={class:"footer-section"},V={class:"social-links"},H={href:"mailto:fiscal-insights@outlook.com",class:"social-link"},K=["alt"],W={href:"https://www.instagram.com/fiscal_insights1/",target:"_blank",rel:"noopener noreferrer",class:"social-link"},X=["alt"],z={href:"https://www.linkedin.com/company/fiscal-insights-canada/?viewAsMember=true",target:"_blank",rel:"noopener noreferrer",class:"social-link"},Q=["alt"],q={class:"footer-section"},J={class:"legal-links"},Z={class:"footer-bottom"},ee={href:"https://forms.gle/Yofdxnr1iLZ5fRJ8A",target:"_blank",rel:"noopener noreferrer",class:"beta-button"};function te(e,t,a,te,ae,ne){const oe=(0,n.g2)("router-view"),se=(0,n.g2)("router-link"),re=(0,n.g2)("SalaryRateSelector"),ie=(0,n.g2)("ErrorBoundary"),ue=(0,n.g2)("CalculatorView"),ce=(0,n.g2)("ResultView"),le=(0,n.g2)("FederalBudgetView"),de=(0,n.g2)("BudgetCategoriesView"),pe=(0,n.g2)("FAQSection"),me=(0,n.g2)("Tabs");return(0,n.uX)(),(0,n.Wv)(ie,{"component-name":"App"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",s,["/"!==e.$route.path?((0,n.uX)(),(0,n.Wv)(oe,{key:0})):(0,n.Q3)("",!0),"/"===e.$route.path?((0,n.uX)(),(0,n.CE)("main",r,[(0,n.Lk)("div",i,[(0,n.Lk)("header",null,[(0,n.Lk)("div",u,[(0,n.Lk)("img",{src:te.logoUrl,alt:te.t("home.alt.logo"),class:"site-logo"},null,8,c)]),(0,n.Lk)("h1",l,(0,n.v_)(te.t("home.header.title")),1),(0,n.Lk)("div",d,[(0,n.Lk)("nav",p,[(0,n.bF)(se,{to:"/welcome",class:"nav-link"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(te.t("home.nav.home")),1)])),_:1}),(0,n.bF)(se,{to:"/how-it-works",class:"nav-link"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(te.t("home.nav.howItWorks")),1)])),_:1}),(0,n.bF)(se,{to:"/simulator",class:"nav-link simulator-link"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(te.t("home.nav.simulator")),1)])),_:1}),(0,n.Lk)("a",m,(0,n.v_)(te.t("home.nav.cra")),1)]),(0,n.Lk)("div",{class:"language-switcher",role:"group","aria-label":te.t("home.language.switchLabel")},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(te.locales,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e.code,type:"button",class:(0,n.C4)(["language-button",{active:te.currentLocale===e.code}]),onClick:t=>te.setLocale(e.code)},(0,n.v_)(te.t(e.labelKey)),11,h)))),128))],8,g)]),(0,n.Lk)("p",v,(0,n.v_)(te.t("home.header.subtitle")),1)]),(0,n.Lk)("section",b,[(0,n.Lk)("div",f,[(0,n.Lk)("h3",T,(0,n.v_)(te.t("home.year.title")),1),(0,n.Lk)("div",x,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(te.yearStore.taxYears,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,class:(0,n.C4)(["year-button",{active:te.yearStore.selectedTaxYear===e.id}]),onClick:t=>te.yearStore.setSelectedTaxYear(e.id)},(0,n.v_)(e.label),11,S)))),128))]),(0,n.Lk)("p",y,(0,n.v_)(te.yearSelectorNote),1)])]),(0,n.bF)(ie,{"component-name":"SalaryRateSelector"},{default:(0,n.k6)((()=>[(0,n.bF)(re)])),_:1}),(0,n.bF)(me,{class:"calculator-tabs",variant:"primary",items:te.tabItems,modelValue:te.activeTab,"onUpdate:modelValue":t[2]||(t[2]=e=>te.activeTab=e)},{default:(0,n.k6)((({activeTab:e,getPanelProps:a})=>[(0,n.bo)((0,n.Lk)("section",(0,n.v6)(a("calculator"),{class:"calculator-section budget-simulator"}),[(0,n.Lk)("div",A,[(0,n.bF)(ie,{"component-name":"CalculatorView"},{default:(0,n.k6)((()=>[(0,n.bF)(ue)])),_:1}),(0,n.bF)(ie,{"component-name":"ResultView"},{default:(0,n.k6)((()=>[(0,n.bF)(ce)])),_:1})])],16),[[n.aG,"calculator"===e]]),(0,n.bo)((0,n.Lk)("section",(0,n.v6)(a("breakdown"),{class:"income-section"}),[(0,n.Lk)("h2",E,(0,n.v_)(te.t("home.sections.breakdown.title")),1),(0,n.Lk)("p",R,(0,n.v_)(te.t("home.sections.breakdown.description")),1),(0,n.bF)(ie,{"component-name":"FederalBudgetView"},{default:(0,n.k6)((()=>[(0,n.bF)(le)])),_:1})],16),[[n.aG,"breakdown"===e]]),(0,n.bo)((0,n.Lk)("section",(0,n.v6)(a("categories"),{class:"budget-categories-section expenses-section"}),[(0,n.Lk)("div",C,[(0,n.Lk)("h2",B,(0,n.v_)(te.t("home.sections.categories.title")),1),(0,n.Lk)("button",{class:"toggle-section-button",onClick:t[0]||(t[0]=(...e)=>te.toggleBudgetCategories&&te.toggleBudgetCategories(...e))},(0,n.v_)(te.t(te.showBudgetCategories?"home.actions.hide":"home.actions.show")),1)]),(0,n.bF)(n.eB,{name:"fade"},{default:(0,n.k6)((()=>[te.showBudgetCategories?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("p",k,["2023"===te.yearStore.selectedTaxYear?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)((0,n.v_)(te.t("home.sections.categories.description.2023")),1)],64)):"2024"===te.yearStore.selectedTaxYear?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,n.v_)(te.t("home.sections.categories.description.2024")),1)],64)):"2025"===te.yearStore.selectedTaxYear?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,n.v_)(te.t("home.sections.categories.description.2025")),1)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:3},[(0,n.eW)((0,n.v_)(te.t("home.sections.categories.description.fallback")),1)],64))]),(0,n.bF)(ie,{"component-name":"BudgetCategoriesView"},{default:(0,n.k6)((()=>[(0,n.bF)(de)])),_:1})])):(0,n.Q3)("",!0)])),_:1})],16),[[n.aG,"categories"===e]]),(0,n.bo)((0,n.Lk)("section",(0,n.v6)(a("faqs"),{class:"faq-section summary-section"}),[(0,n.Lk)("div",w,[(0,n.Lk)("h2",N,(0,n.v_)(te.t("home.sections.faqs.title")),1),(0,n.Lk)("button",{class:"toggle-section-button",onClick:t[1]||(t[1]=(...e)=>te.toggleFAQs&&te.toggleFAQs(...e))},(0,n.v_)(te.t(te.showFAQs?"home.actions.hide":"home.actions.show")),1)]),(0,n.bF)(n.eB,{name:"fade"},{default:(0,n.k6)((()=>[te.showFAQs?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.bF)(ie,{"component-name":"FAQSection"},{default:(0,n.k6)((()=>[(0,n.bF)(pe)])),_:1})])):(0,n.Q3)("",!0)])),_:1})],16),[[n.aG,"faqs"===e]]),(0,n.bo)((0,n.Lk)("section",(0,n.v6)(a("resources"),{class:"resources-section"}),[(0,n.Lk)("h2",P,(0,n.v_)(te.t("home.sections.resources.title")),1),(0,n.Lk)("p",F,(0,n.v_)(te.t("home.sections.resources.description")),1),(0,n.Lk)("div",D,[(0,n.bF)(se,{to:"/how-it-works",class:"resource-link"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(te.t("home.sections.resources.links.howItWorks")),1)])),_:1}),(0,n.Lk)("a",_,(0,n.v_)(te.t("home.sections.resources.links.cra")),1),(0,n.Lk)("a",G,(0,n.v_)(te.t("home.sections.resources.links.finance")),1),(0,n.Lk)("a",$,(0,n.v_)(te.t("home.sections.resources.links.budget")),1),(0,n.Lk)("a",M,(0,n.v_)(te.t("home.sections.resources.links.publicAccounts")),1)])],16),[[n.aG,"resources"===e]])])),_:1},8,["items","modelValue"])])])):(0,n.Q3)("",!0),(0,n.Lk)("footer",O,[(0,n.Lk)("div",L,[(0,n.Lk)("div",U,[(0,n.Lk)("h3",null,(0,n.v_)(te.t("home.footer.about.title")),1),(0,n.Lk)("p",null,(0,n.v_)(te.t("home.footer.about.body")),1)]),(0,n.Lk)("div",Y,[(0,n.Lk)("h3",null,(0,n.v_)(te.t("home.footer.connect.title")),1),(0,n.Lk)("div",V,[(0,n.Lk)("a",H,[(0,n.Lk)("img",{src:o,alt:te.t("home.alt.email"),class:"social-icon"},null,8,K),(0,n.eW)(" "+(0,n.v_)(te.t("home.footer.connect.contact")),1)]),(0,n.Lk)("a",W,[(0,n.Lk)("img",{src:"https://cdn-icons-png.flaticon.com/512/87/87390.png",alt:te.t("home.alt.instagram"),class:"social-icon"},null,8,X),(0,n.eW)(" "+(0,n.v_)(te.t("home.footer.social.instagram")),1)]),(0,n.Lk)("a",z,[(0,n.Lk)("img",{src:"https://cdn-icons-png.flaticon.com/512/174/174857.png",alt:te.t("home.alt.linkedin"),class:"social-icon"},null,8,Q),(0,n.eW)(" "+(0,n.v_)(te.t("home.footer.social.linkedin")),1)])])]),(0,n.Lk)("div",q,[(0,n.Lk)("h3",null,(0,n.v_)(te.t("home.footer.legal.title")),1),(0,n.Lk)("div",J,[(0,n.bF)(se,{to:"/terms-of-service",class:"legal-link"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(te.t("home.footer.legal.terms")),1)])),_:1})])])]),(0,n.Lk)("div",Z,[(0,n.Lk)("p",null,[(0,n.eW)((0,n.v_)(te.t("home.footer.bottom.contact"))+" ",1),t[3]||(t[3]=(0,n.Lk)("a",{href:"mailto:fiscal-insights@outlook.com",class:"text-blue-600 hover:text-blue-800"},"fiscal-insights@outlook.com",-1))]),(0,n.Lk)("p",null,"Â© "+(0,n.v_)((new Date).getFullYear())+" "+(0,n.v_)(te.t("home.footer.bottom.copy")),1)])]),(0,n.Lk)("a",ee,[(0,n.Lk)("span",null,(0,n.v_)(te.t("home.beta.cta")),1)])])])),_:1})}var ae=a(21775),ne=a(14171);const oe={key:0,class:"error-boundary"},se={class:"error-content"},re={class:"error-message"},ie={key:0,class:"error-details"},ue={class:"error-stack"},ce={class:"error-context"},le={class:"error-context"};var de={__name:"ErrorBoundary",props:{componentName:{type:String,default:"Unknown Component"},fallback:{type:Function,default:null}},setup(e){const t=e,a=(0,n.KR)(null),o=(0,n.KR)(null),s=(0,n.KR)(!1);(0,n.Gt)("errorBoundary",{reportError:e=>{a.value=e,o.value=(new Date).toISOString()}}),(0,n.qG)(((e,n,s)=>(console.error(`[ErrorBoundary] Error in ${t.componentName}:`,e,s),("ChunkLoadError"===e.name||e.message?.includes("Loading chunk"))&&(console.error(`[ErrorBoundary] Chunk loading error in ${t.componentName}:`,e),setTimeout((()=>{window.location&&window.location.reload()}),2e3)),(0,ne.H4)(e,(e=>{console.error(`[ErrorBoundary] ${e}`)})),a.value=e,o.value=(new Date).toISOString(),!1)));const r=()=>{a.value=null,o.value=null,s.value=!1},i=()=>{console.error("[ErrorBoundary] Reporting error:",{error:a.value,component:t.componentName,timestamp:o.value,userAgent:navigator.userAgent,url:window.location.href}),s.value=!0};return(t,u)=>a.value?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.Lk)("div",se,[u[1]||(u[1]=(0,n.Lk)("span",{class:"material-icons error-icon"},"error_outline",-1)),u[2]||(u[2]=(0,n.Lk)("h3",{class:"error-title"},"Something went wrong",-1)),(0,n.Lk)("p",re,(0,n.v_)(a.value.message||"An unexpected error occurred"),1),(0,n.Lk)("div",{class:"error-actions"},[(0,n.Lk)("button",{class:"error-button primary",onClick:r},"Try Again"),(0,n.Lk)("button",{class:"error-button secondary",onClick:i},"Report Issue")]),s.value?((0,n.uX)(),(0,n.CE)("details",ie,[u[0]||(u[0]=(0,n.Lk)("summary",null,"Technical Details",-1)),(0,n.Lk)("pre",ue,(0,n.v_)(a.value.stack),1),(0,n.Lk)("p",ce,"Component: "+(0,n.v_)(e.componentName),1),(0,n.Lk)("p",le,"Timestamp: "+(0,n.v_)(o.value),1)])):(0,n.Q3)("",!0)])])):(0,n.RG)(t.$slots,"default",{key:1})}},pe=a(66262);const me=(0,pe.A)(de,[["__scopeId","data-v-6666b916"]]);var ge=me;const he=["aria-orientation"],ve=["id","aria-selected","aria-controls","tabindex","onClick","onKeydown"],be={class:"tabs__label"},fe={class:"tabs__panels"};var Te=Object.assign({name:"TabsComponent"},{__name:"Tabs",props:{items:{type:Array,required:!0,validator:e=>Array.isArray(e)&&e.every((e=>e&&"string"===typeof e.id&&"string"===typeof e.label))},modelValue:{type:String,default:""},variant:{type:String,default:"default"},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=e,o=t,s=`tabs-${Math.random().toString(36).slice(2,10)}`,r=(0,n.KR)([]),i=(0,n.EW)((()=>a.items.map((e=>({...e,panelId:e.panelId||`${s}-panel-${e.id}`}))))),u=(0,n.KR)(""),c=()=>i.value[0]?.id||"",l=(e,{emitChange:t=!1}={})=>{const a=e??"",n=a!==u.value;n?(u.value=a,o("update:modelValue",a),t&&o("change",a)):t&&o("change",a)};(0,n.wB)(i,(e=>{if(!e.length)return u.value="",void o("update:modelValue","");const t=e.some((e=>e.id===u.value));if(!t){const t=a.modelValue&&e.some((e=>e.id===a.modelValue))?a.modelValue:c();l(t,{emitChange:!1})}}),{immediate:!0,deep:!0}),(0,n.wB)((()=>a.modelValue),(e=>{e?e!==u.value&&l(e,{emitChange:!1}):!u.value&&i.value.length&&l(c(),{emitChange:!1})})),(0,n.Ic)((()=>{r.value=[]}));const d=(0,n.EW)((()=>["tabs",`tabs--${a.variant}`].filter(Boolean))),p=e=>`${s}-tab-${e}`,m=e=>{const t=i.value.find((t=>t.id===e));return t?t.panelId:`${s}-panel-${e}`},g=e=>({id:m(e),role:"tabpanel",tabindex:u.value===e?0:-1,"aria-labelledby":p(e),"aria-hidden":u.value===e?"false":"true"}),h=e=>{const t=r.value[e];t&&t.focus()},v=e=>{const t=i.value[e];t&&(l(t.id,{emitChange:!0}),h(e))},b=(e,t)=>{const{key:n}=e,o=i.value.length;if(!o)return;const s="horizontal"===a.orientation,r=s?"ArrowLeft":"ArrowUp",u=s?"ArrowRight":"ArrowDown";if(n===u){e.preventDefault();const a=(t+1)%o;v(a)}else if(n===r){e.preventDefault();const a=(t-1+o)%o;v(a)}else if("Home"===n)e.preventDefault(),v(0);else if("End"===n)e.preventDefault(),v(o-1);else if("Enter"===n||" "===n){e.preventDefault();const a=i.value[t];a&&l(a.id,{emitChange:!0})}},f=e=>{e!==u.value&&l(e,{emitChange:!0})},T=(e,t)=>{e&&(r.value[t]=e)},x=(0,n.EW)((()=>({activeTab:u.value,getPanelProps:g,getPanelId:m,getTabId:p})));return(t,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,n.C4)(d.value)},[(0,n.Lk)("div",{class:"tabs__list",role:"tablist","aria-orientation":e.orientation},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,((e,t)=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,type:"button",class:(0,n.C4)(["tabs__tab",{"is-active":e.id===u.value}]),id:p(e.id),role:"tab","aria-selected":e.id===u.value,"aria-controls":e.panelId,tabindex:e.id===u.value?0:-1,onClick:t=>f(e.id),onKeydown:e=>b(e,t),ref_for:!0,ref:e=>T(e,t)},[(0,n.Lk)("span",be,(0,n.v_)(e.label),1)],42,ve)))),128))],8,he),(0,n.Lk)("div",fe,[(0,n.RG)(t.$slots,"default",(0,n._B)((0,n.Ng)(x.value)))])],2))}});const xe=(0,pe.A)(Te,[["__scopeId","data-v-7d38301f"]]);var Se=xe,ye=a(62948),Ae=a(57284),Ee=a(57161),Re=a(10810);const Ce={class:"salary-selector-section"},Be={class:"section-title"},Ie={class:"salary-selector-wrapper"},ke={class:"salary-selector"},we=["aria-pressed","aria-label","onClick","onKeydown"];var Ne={__name:"SalaryRateSelector",setup(e){const t=(0,Ae.r)(),{selectSalaryRate:a}=t,{selectedSalaryRate:o}=(0,Re.bP)(t),{t:s}=(0,ye.s9)(),r={Annual:"annual",Monthly:"monthly","Bi-weekly":"biweekly",Weekly:"weekly",Daily:"daily",Hourly:"hourly"},i=(0,n.EW)((()=>Ee.Rx.map((e=>({...e,key:r[e.value]||e.value.toLowerCase()})))));return(e,t)=>((0,n.uX)(),(0,n.CE)("section",Ce,[(0,n.Lk)("h3",Be,(0,n.v_)((0,n.R1)(s)("calculator.salary.title")),1),(0,n.Lk)("div",Ie,[(0,n.Lk)("div",ke,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.value,class:(0,n.C4)(["salary-option",{active:(0,n.R1)(o)===e.value}]),role:"button",tabindex:"0","aria-pressed":(0,n.R1)(o)===e.value,"aria-label":(0,n.R1)(s)("calculator.salary.aria",{label:(0,n.R1)(s)(`calculator.salary.options.${e.key}`)}),onClick:t=>(0,n.R1)(a)(e.value),onKeydown:[(0,n.jR)((0,n.D$)((t=>(0,n.R1)(a)(e.value)),["prevent"]),["enter"]),(0,n.jR)((0,n.D$)((t=>(0,n.R1)(a)(e.value)),["prevent"]),["space"])]},(0,n.v_)((0,n.R1)(s)(`calculator.salary.options.${e.key}`)),43,we)))),128))])])]))}};const je=(0,pe.A)(Ne,[["__scopeId","data-v-fad92c84"]]);var Pe=je;const Fe=(0,n.$V)({loader:()=>Promise.all([a.e(1175),a.e(1367),a.e(9050),a.e(1847),a.e(3113),a.e(5550),a.e(9466),a.e(1802),a.e(9758),a.e(3323),a.e(7024),a.e(9345),a.e(4697),a.e(2893),a.e(5613)]).then(a.bind(a,25613)),loadingComponent:{template:'<div class="loading-view">Loading calculator...</div>'},errorComponent:{template:'<div class="error-view">Failed to load calculator</div>'},delay:200,timeout:1e4}),De=(0,n.$V)({loader:()=>Promise.all([a.e(3755),a.e(5757),a.e(5292),a.e(7742),a.e(2051),a.e(8524),a.e(1175),a.e(1367),a.e(9050),a.e(1847),a.e(3113),a.e(5550),a.e(9466),a.e(1802),a.e(9758),a.e(3323),a.e(7024),a.e(9345),a.e(4697),a.e(2893),a.e(6275)]).then(a.bind(a,56275)),loadingComponent:{template:'<div class="loading-view">Loading results...</div>'},errorComponent:{template:'<div class="error-view">Failed to load results</div>'},delay:200,timeout:1e4}),_e=(0,n.$V)({loader:()=>Promise.all([a.e(3755),a.e(5757),a.e(1175),a.e(1367),a.e(9050),a.e(1847),a.e(3113),a.e(5550),a.e(9466),a.e(1802),a.e(9758),a.e(3323),a.e(7024),a.e(9345),a.e(4697),a.e(2893),a.e(5684)]).then(a.bind(a,65684)),loadingComponent:{template:'<div class="loading-view">Loading budget view...</div>'},errorComponent:{template:'<div class="error-view">Failed to load budget view</div>'},delay:200,timeout:1e4}),Ge=(0,n.$V)({loader:()=>Promise.all([a.e(1175),a.e(1367),a.e(9050),a.e(1847),a.e(3113),a.e(5550),a.e(9466),a.e(1802),a.e(9758),a.e(3323),a.e(7024),a.e(9345),a.e(4697),a.e(2893),a.e(926)]).then(a.bind(a,926)),loadingComponent:{template:'<div class="loading-view">Loading budget categories...</div>'},errorComponent:{template:'<div class="error-view">Failed to load budget categories</div>'},delay:200,timeout:1e4}),$e=(0,n.$V)({loader:()=>a.e(6862).then(a.bind(a,26862)),loadingComponent:{template:'<div class="loading-view">Loading FAQ...</div>'},errorComponent:{template:'<div class="error-view">Failed to load FAQ</div>'},delay:200,timeout:1e4});var Me={name:"App",components:{Tabs:Se,CalculatorView:Fe,ResultView:De,FederalBudgetView:_e,BudgetCategoriesView:Ge,FAQSection:$e,SalaryRateSelector:Pe,ErrorBoundary:ge},setup(){const e=(0,ae.U)(),{t:t,locale:o}=(0,ye.s9)(),s=[{code:"en",labelKey:"home.language.english"},{code:"fr",labelKey:"home.language.french"}],r=(0,n.EW)((()=>o.value)),i=e=>{o.value!==e&&(o.value=e,"undefined"!==typeof window&&window.localStorage.setItem("locale",e))},u=(0,n.KR)(!1),c=(0,n.KR)(!1),l=(0,n.KR)("calculator"),d=(0,n.EW)((()=>[{id:"calculator",label:t("home.tabs.calculator"),panelId:"calculator-panel"},{id:"breakdown",label:t("home.tabs.breakdown"),panelId:"how-it-works"},{id:"categories",label:t("home.tabs.categories"),panelId:"budget-categories-section"},{id:"faqs",label:t("home.tabs.faqs"),panelId:"faq-section"},{id:"resources",label:t("home.tabs.resources"),panelId:"resources-section"}])),p=(0,n.EW)((()=>new URL(a(8977),a.b).href)),m=()=>{u.value=!u.value},g=()=>{c.value=!c.value},h=(0,n.EW)((()=>"2024"===e.selectedTaxYear?t("home.year.note.2024"):"2025"===e.selectedTaxYear?t("home.year.note.2025"):t("home.year.note.default",{year:e.selectedTaxYear})));(0,n.wB)(l,(e=>{"categories"!==e||u.value||(u.value=!0),"faqs"!==e||c.value||(c.value=!0)}));const v=e=>{const t=e.detail?.tab;if(!t)return;const a=d.value.find((e=>e.id===t));a&&(l.value=a.id)};return(0,n.sV)((()=>{window.addEventListener("tax-tabs:navigate",v)})),(0,n.xo)((()=>{window.removeEventListener("tax-tabs:navigate",v)})),{yearStore:e,showBudgetCategories:u,showFAQs:c,activeTab:l,tabItems:d,logoUrl:p,locales:s,currentLocale:r,setLocale:i,yearSelectorNote:h,t:t,toggleBudgetCategories:m,toggleFAQs:g}}};const Oe=(0,pe.A)(Me,[["render",te]]);var Le=Oe},8977:function(e,t,a){e.exports=a.p+"img/fiscal-insights-logo.895ddaf6.webp"}}]);
//# sourceMappingURL=app-42f9d7e6.c4d8c254.js.map