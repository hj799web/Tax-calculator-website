"use strict";(self["webpackChunkTaxCalculator"]=self["webpackChunkTaxCalculator"]||[]).push([[4697],{16166:function(e,o,t){t.d(o,{v:function(){return a}});var n=t(10810),r=t(6934),s=t(14171),i=t(63963);const a=(0,n.nY)("sentimentSettings",(()=>{const e=(0,r.KR)({overall:1,regions:1,demographics:1,sectors:1}),o=(0,r.KR)({warning:.3,critical:.7}),t=(0,r.KR)(1e3),n=(0,r.KR)(Date.now()),a=(0,r.EW)((()=>Date.now()-n.value>t.value)),c=(0,r.EW)((()=>Math.abs(e.value.overall)>o.value.warning)),l=(0,r.EW)((()=>Math.abs(e.value.overall)>o.value.critical)),u=(0,i.$C)("sentiment","sensitivity",(function(o,t){if(Object.prototype.hasOwnProperty.call(e.value,o)){e.value[o]=Math.max(0,Math.min(2,t));try{m()}catch(n){(0,s.H4)(n,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to save sensitivity settings: ${e}`)}))}}else(0,s.H4)(new Error(`Invalid sensitivity category: ${o}`),(e=>{console.warn(`[SENTIMENT SETTINGS] ${e}`)}))})),g=(0,i.$C)("sentiment","thresholds",(function(e,t){if(Object.prototype.hasOwnProperty.call(o.value,e)){o.value[e]=Math.max(0,Math.min(1,t));try{m()}catch(n){(0,s.H4)(n,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to save threshold settings: ${e}`)}))}}else(0,s.H4)(new Error(`Invalid threshold level: ${e}`),(e=>{console.warn(`[SENTIMENT SETTINGS] ${e}`)}))})),d=(0,i.$C)("sentiment","updateFrequency",(function(e){t.value=Math.max(100,Math.min(5e3,e));try{m()}catch(o){(0,s.H4)(o,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to save update frequency: ${e}`)}))}})),h=()=>{e.value={overall:1,regions:1,demographics:1,sectors:1},o.value={warning:.3,critical:.7},t.value=1e3;try{m()}catch(n){(0,s.H4)(n,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to save reset settings: ${e}`)}))}},p=()=>{if("undefined"!==typeof window)try{const r=localStorage.getItem("sentimentSettings");if(r)try{const n=JSON.parse(r);e.value=n.sensitivity||e.value,o.value=n.thresholds||o.value,t.value=n.updateFrequency||t.value}catch(n){(0,s.H4)(n,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to parse saved settings: ${e}`)}))}}catch(r){(0,s.H4)(r,(e=>{console.warn(`[SENTIMENT SETTINGS] Failed to access localStorage: ${e}`)}))}},m=()=>{if("undefined"!==typeof window)try{const n={sensitivity:e.value,thresholds:o.value,updateFrequency:t.value};localStorage.setItem("sentimentSettings",JSON.stringify(n))}catch(n){(0,s.H4)(n,(e=>{throw new Error(`Failed to save sentiment settings: ${e}`)}))}};return p(),{sensitivity:e,thresholds:o,updateFrequency:t,lastUpdate:n,shouldUpdate:a,isWarningLevel:c,isCriticalLevel:l,setSensitivity:u,setThreshold:g,setUpdateFrequency:d,resetAll:h,loadFromLocalStorage:p,saveToLocalStorage:m}}))},9516:function(e,o,t){t.d(o,{aS:function(){return f},HS:function(){return S},G1:function(){return A},UG:function(){return C}});t(44114),t(17642),t(58004),t(33853),t(45876),t(32475),t(15024),t(31698);var n=t(29766),r=t(17035),s=t(60029);const i={liberal:{ontario:.15,quebec:.25,newBrunswick:.3,novaScotia:.3,pei:.25,newfoundland:.25,manitoba:.05,saskatchewan:-.15,alberta:-.25,britishColumbia:.15,yukon:.2,northwest:.2,nunavut:.2},conservative:{ontario:.1,quebec:-.15,newBrunswick:.05,novaScotia:-.05,pei:-.1,newfoundland:-.15,manitoba:.25,saskatchewan:.55,alberta:.6,britishColumbia:.2,yukon:.1,northwest:0,nunavut:-.1},ndp:{ontario:.1,quebec:.1,newBrunswick:0,novaScotia:.1,pei:0,newfoundland:.1,manitoba:.2,saskatchewan:-.3,alberta:-.35,britishColumbia:.35,yukon:.1,northwest:.2,nunavut:.2}},a={liberal:{middleClass:.25,upperMiddleClass:.3,wealthy:.15,seniors:.2,workingFamilies:.2,ruralCommunities:-.15,urbanDwellers:.3,youngAdults:.2,immigrants:.3,indigenousPeoples:.2},conservative:{middleClass:.1,upperMiddleClass:.2,wealthy:.3,seniors:.25,workingFamilies:.1,ruralCommunities:.3,urbanDwellers:-.15,youngAdults:-.15,immigrants:-.05,indigenousPeoples:-.1},ndp:{middleClass:.1,upperMiddleClass:.05,wealthy:-.3,seniors:.1,workingFamilies:.3,ruralCommunities:.1,urbanDwellers:.2,youngAdults:.3,immigrants:.2,indigenousPeoples:.3}},c={liberal:{healthcare:.3,education:.3,infrastructure:.3,energy:.1,manufacturing:.1,technology:.3,agriculture:.1,naturalResources:.1,publicServices:.2,finance:.2,tourism:.1,smallBusiness:.1},conservative:{healthcare:.05,education:-.05,infrastructure:.2,energy:.3,manufacturing:.2,technology:.1,agriculture:.3,naturalResources:.3,publicServices:-.1,finance:.3,tourism:.1,smallBusiness:.2},ndp:{healthcare:.3,education:.3,infrastructure:.2,energy:-.1,manufacturing:.2,technology:.1,agriculture:.1,naturalResources:-.1,publicServices:.3,finance:-.2,tourism:.1,smallBusiness:.2}},l={liberal:{highCorporateTax:.1,highPersonalTax:-.1,carbonPricing:.2,highDeficit:0,defenseSpending:.1,socialPrograms:.2,infrastructureSpending:.3},conservative:{highCorporateTax:-.3,highPersonalTax:-.3,carbonPricing:-.3,highDeficit:-.3,defenseSpending:.3,socialPrograms:-.1,infrastructureSpending:.2},ndp:{highCorporateTax:.3,highPersonalTax:.1,carbonPricing:.3,highDeficit:.1,defenseSpending:-.2,socialPrograms:.3,infrastructureSpending:.2}};function u(e,o){const t=l[o]||{},n={},{revenueMix:r={},spendingMix:s={}}=e,i=e.totalSpending-e.totalRevenue,a=r.corporateIncomeTax;void 0!==a&&(n.corporateTaxAlign=a>17?t.highCorporateTax:a<13?-t.highCorporateTax:0);const c=r.personalIncomeTax;void 0!==c&&(n.personalTaxAlign=c>22?t.highPersonalTax:c<20?-t.highPersonalTax:0);const u=r.carbonPricing;void 0!==u&&(n.carbonPricingAlign=u>1.2?t.carbonPricing:u<.5?-t.carbonPricing:0),n.deficitAlign=i>40?t.highDeficit:i<10?-t.highDeficit:0;const g=s.defense;void 0!==g&&(n.defenseAlign=g>1.1?t.defenseSpending:g<.9?-t.defenseSpending:0);const d=["healthcare","childrenAndFamilies","supportForSeniors","indigenousServices"].map((e=>s[e])).filter((e=>"number"===typeof e));if(d.length){const e=d.reduce(((e,o)=>e+o),0)/d.length;n.socialProgramsAlign=e>1.1?t.socialPrograms:e<.9?-t.socialPrograms:0}return n}function g(e,o,t){const n={provinces:i,demographics:a,sectors:c};return n[o]?.[e]?.[t]??0}function d(e,o,t,n){if(!o||!Object.keys(o).length)return e;const r={provinces:{corporateTaxAlign:{alberta:.8,ontario:.6,quebec:.4},carbonPricingAlign:{alberta:1,saskatchewan:.8,britishColumbia:.7}},demographics:{socialProgramsAlign:{workingFamilies:.9,seniors:.8,youngAdults:.7}},sectors:{corporateTaxAlign:{finance:1,manufacturing:.8,technology:.7}}}[t]||{};let s=0,i=0;for(const[c,l]of Object.entries(o)){const e=r[c]?.[n]??.5;s+=l*e,i+=e}if(!i)return e;const a=s/i*10;return Math.max(0,Math.min(100,e+a))}var h=t(16166),p=t(12964);const m={personalIncomeTaxAmount:{min:90,max:315},corporateIncomeTaxAmount:{min:36,max:135},gstAmount:{min:27,max:90}};function v(e){return Math.max(-n.uL,Math.min(n.uL,e))}function f(e,o=[],t=null,i=null){console.log("âš™ï¸ revenueMix:",e?.revenueMix);const a=t?.startsWith("party-")?t.replace("party-",""):null;t&&(console.log(`[PRESET][DEBUG] Sentiment recomputation triggered by preset: ${t}`),a&&console.log(`[PARTY][DEBUG] Party-specific sentiment modifiers will be applied for: ${a}`));const c=i||{overall:1,regions:1,demographics:1,sectors:1};if(!e||!e.revenueMix)return console.warn("[Sentiment] Missing or invalid budget or budget.revenueMix"),{provinces:{},demographics:{},sectors:{},overall:3,fiscalChaos:!1};let l=!1;console.log("Computing sentiment with updated configuration:",(new Date).toISOString());const h={provinces:{},demographics:{},sectors:{}},p={provinces:n.oX.provinces,demographics:n.oX.demographics,sectors:n.oX.sectors},v={personalIncomeTax:21,corporateIncomeTax:15,gst:5,carbonPricing:1,exciseTaxes:2.5,eiPremiums:1.35,customsDuties:1,crownProfits:2.5,nonTaxRevenue:3,resourceRoyalties:1},f={personalIncomeTaxAmount:210,corporateIncomeTaxAmount:80,gstAmount:50,carbonPricingAmount:10,exciseTaxesAmount:25,eiPremiumsAmount:13.5,customsDutiesAmount:10,crownProfitsAmount:25,nonTaxRevenueAmount:30,resourceRoyaltiesAmount:10},T={};for(const n in v)T[n]="number"===typeof e.revenueMix?.[n]?e.revenueMix[n]:v[n];for(const n in f)T[n]="number"===typeof e.revenueMix?.[n]?e.revenueMix[n]:f[n];let b=0,E=0;for(const[n,r]of Object.entries(m)){const e=T[n];"number"===typeof e?(E++,console.log(`[FiscalChaos] Checking ${n}: amount=${e}B, bounds=($${r.min}B, $${r.max}B)`),(e<.7*r.min||e>1.3*r.max)&&(b++,console.log(`[FiscalChaos] ${n} is out of bounds: $${e}B is outside ($${r.min}B, $${r.max}B)`))):console.warn(`[FiscalChaos] Skipping ${n}: no amount found in revenueMix`)}b>=1&&b/E>=.3&&(l=!0,console.log(`[FiscalChaos] Triggered: ${b}/${E} revenue sources are more than 30% out of bounds`)),l&&(M(h,b/E),console.log(`[FiscalChaos] Applied severe penalties to all sentiment scores due to ${b} extreme revenue sources`));const C=c.overall??1,S=c.regions??1,A=c.demographics??1,P=c.sectors??1;console.log(`[SENSITIVITY] Using multipliers - Overall: ${C}, Regions: ${S}, Demographics: ${A}, Sectors: ${P}`);const I=(e,o=1)=>{const t={};for(const[n,r]of Object.entries(e)){const e=r-3,s=C*o,i=e*s;t[n]=Math.max(1,Math.min(5,3+i))}return t},R=e?.fiscalIndicators?.deficit||0,N=e?.fiscalIndicators?.debtToGdpRatio||0,k=R>50,B=N>45,D={provinces:new Set,demographics:new Set,sectors:new Set},O=e?.fiscalIndicators?.surplus>5e10||e?.fiscalIndicators?.deficit<-5e10;for(const[n,r]of Object.entries(p))for(const[o,t]of Object.entries(r)){let r;if(void 0!==t.baselineScore)r=t.baselineScore,t.deficitSensitivity&&k&&(r-=t.deficitSensitivity*(R-50)/20),t.debtRatioSensitivity&&B&&(r-=t.debtRatioSensitivity*(N-45)/10);else{let s={};"provinces"===n&&(s.province=o),"demographics"===n&&(s.demographic=o),"sectors"===n&&(s.sector=o);const a=x(t.triggers,e,s,i);r=a.score,h.activeTriggersByGroup||(h.activeTriggersByGroup={}),h.activeTriggersByGroup[n]||(h.activeTriggersByGroup[n]={}),h.activeTriggersByGroup[n][o]=a.activeTriggers||[],a.hasPrecedence&&(D[n].add(o),console.log(`[PRECEDENCE] ${n}.${o} has active precedence rules`))}O&&r>3&&(r=3);let s={};"provinces"===n&&(s.province=o),"demographics"===n&&(s.demographic=o),"sectors"===n&&(s.sector=o);const a=x(t.triggers,e,s,i),c=a.score;h.activeTriggersByGroup||(h.activeTriggersByGroup={}),h.activeTriggersByGroup[n]||(h.activeTriggersByGroup[n]={}),h.activeTriggersByGroup[n][o]=a.activeTriggers||[],a.hasPrecedence?(D[n].add(o),console.log(`[PRECEDENCE] ${n}.${o} has active precedence rules`),r=c):void 0!==t.baselineScore&&(r=.4*r+.6*c),r=Math.max(1,Math.min(5,r));const l=["revenueMix.personalIncomeTax","revenueMix.gst","revenueMix.hst","taxExpenditures.personalIncomeTaxCredits.adjustmentPercent"];let u=!1;if(t&&t.triggers)for(const o of l){const n=t.triggers[o];if(n){const t=$(e,o);if(void 0!==n.min&&t>=n.min||void 0!==n.max&&t<=n.max){u=!0;break}}}u?(h[n][o]=1.5,D[n].add(o),console.log(`[SENTIMENT OVERRIDE] ${n}:${o} forcibly set to 1.5 due to tax trigger`)):h[n][o]=w(r)}if(t&&s.m[t]){const e=s.m[t];for(const o of Object.keys(h)){if("overall"===o)continue;const t=e[o];if(t)for(const[e,n]of Object.entries(h[o]))void 0!==t[e]&&(h[o][e]=Math.max(1,Math.min(5,n+.4*t[e])))}}if(a){console.log(`[PARTY][DEBUG] Applying ${a} party sentiment modifiers`);const o=u(e,a);console.log("[PARTY][DEBUG] Policy alignment scores:",o);for(const[e,t]of Object.entries(h.provinces||{})){const n=g(a,"provinces",e),r=t+10*n*c.regions,s=d(r,o,"provinces",e);h.provinces[e]=Math.max(1,Math.min(5,s)),Math.abs(h.provinces[e]-t)>.5&&console.log(`[PARTY][DEBUG] ${e} sentiment adjusted from ${t.toFixed(1)} to ${h.provinces[e].toFixed(1)} due to ${a} party alignment`)}for(const[e,t]of Object.entries(h.demographics||{})){const n=g(a,"demographics",e),r=t+10*n*c.demographics,s=d(r,o,"demographics",e);h.demographics[e]=Math.max(1,Math.min(5,s)),Math.abs(h.demographics[e]-t)>.5&&console.log(`[PARTY][DEBUG] ${e} sentiment adjusted from ${t.toFixed(1)} to ${h.demographics[e].toFixed(1)} due to ${a} party alignment`)}for(const[e,t]of Object.entries(h.sectors||{})){const n=g(a,"sectors",e),r=t+10*n*c.sectors,s=d(r,o,"sectors",e);h.sectors[e]=Math.max(1,Math.min(5,s)),Math.abs(h.sectors[e]-t)>.5&&console.log(`[PARTY][DEBUG] ${e} sentiment adjusted from ${t.toFixed(1)} to ${h.sectors[e].toFixed(1)} due to ${a} party alignment`)}}if(o&&o.length>0){const e=D||{provinces:new Set,demographics:new Set,sectors:new Set};for(const t of Object.keys(h))if("overall"!==t){e[t]||(e[t]=new Set);for(const[n,s]of Object.entries(h[t]))if(e[t].has(n))console.log(`[BADGE] Skipping badge modifiers for ${t}.${n} due to precedence rules`);else{const e=h.activeTriggersByGroup?.[t]?.[n]||[];console.log(`[BADGE] Applying badge modifiers for ${t}.${n} with ${e.length} active triggers`),h[t][n]=(0,r.Uz)(o,t,n,s,e)}}}const F=T.personalIncomeTaxAmount;if(F>360||F<72){for(const e of["provinces","demographics","sectors"])for(const o of Object.keys(h[e]))h[e][o]=1.5;return h.overall=1.5,h}const G=I(h.provinces,S),L=I(h.demographics,A),j=I(h.sectors,P);console.log(`[SENSITIVITY] Applied group-specific multipliers: Regions=${S}, Demographics=${A}, Sectors=${P}`);const H=y({provinces:G,demographics:L,sectors:j},a);console.log(`[SENSITIVITY] Applied overall multiplier ${C} to final scores`),console.log("[FiscalChaos] âš ï¸ FINAL STATE: "+(!0===l?"TRUE":"FALSE")),console.log(`[FiscalChaos] âš ï¸ Out of bounds sources: ${b}/${E}`),console.log(`[FiscalChaos] âš ï¸ Percentage: ${b/E*100}%`);const U={provinces:G,demographics:L,sectors:j,overall:H,fiscalChaos:!0===l};return console.log("FINAL sentiment result:",JSON.stringify(U,null,2)),U}function y(e,o=null){const t={provinces:.4,demographics:.3,sectors:.3};let n=0,r=0;for(const[i,a]of Object.entries(t)){const o=Object.values(e[i]||{});if(o.length>0){const e=o.reduce(((e,o)=>e+o),0)/o.length;n+=e*a,r+=a}}let s=r>0?n/r:3;if(o){const e={liberal:.1,conservative:0,ndp:-.1},t=e[o]||0,n=s+t;Math.abs(t)>.05&&console.log(`[PARTY][DEBUG] Overall sentiment adjusted from ${s.toFixed(2)} to ${n.toFixed(2)} due to ${o} party effect`),s=n}return Math.max(1,Math.min(5,s))}function T({province:e,demographic:o,sector:t},n=null){let r=n;if(!r){const e=(0,h.v)();r={overall:e.overall??1,regions:e.regions??1,demographics:e.demographics??1,sectors:e.sectors??1}}let s=r.overall??1;return e?s*=r.regions??1:o?s*=r.demographics??1:t&&(s*=r.sectors??1),s}function b(e,o,t=1){const n=Math.max(1e-4,Math.abs(o)*(t/100));return Math.abs(e-o)<=n}function E(e,o){if(Object.prototype.hasOwnProperty.call(o,"min")&&e<o.min)return!1;if(Object.prototype.hasOwnProperty.call(o,"max")){if(o.max<.1&&b(e,0,5))return!0;if(e>o.max)return!1}return!0}function x(e,o,t={},r=null){const{province:s,demographic:i,sector:a}=t,c=s||i||a,l=s?"provinces":i?"demographics":"sectors",u=[],g=[],d=[];let h=0,m=0;if(c&&"provinces"===l){const e=$(o,p.TRIGGER_PATHS.CARBON_PRICING);if("number"===typeof e){const o=(0,p.getPrecedenceOverride)(p.TRIGGER_PATHS.CARBON_PRICING,c,l,e);o&&(console.log(`[PRECEDENCE] ðŸ”„ Applied data-driven override for ${o.path} to ${c} with value ${e}`),u.push({path:o.path,score:1,precedence:o.level}),g.push(o.path))}}for(const[S,A]of Object.entries(e))if(Array.isArray(A)){const e=$(o,S);if(void 0===e||isNaN(e))continue;for(const o of A){const{min:s,max:i,score:a,severity:f,weight:y=1}=o,b=void 0!==s&&e>=s,E=void 0!==i&&e<=i;if(b||E){if("revenueMix.carbonPricing"===S&&console.log(`[CARBON TAX][MATCH] Province: ${c}, Matched Trigger:`,A,`Score: ${a}`),Math.abs(a)>n.zV||"extreme"===f){d.push({path:S,score:a,severity:f,value:e,entity:c,category:l}),console.log(`[CRITICAL] Found critical alert for ${l}.${c}: ${S} with score ${a}`);continue}const o=v(a),i=y||1,b=T(t,r),E=o*i*b;h+=E,m+=i;const x=w(o),$=x-3,C=$*b,M=Math.max(1,Math.min(5,3+C));let P=S;void 0!==s&&s>=.2&&(P=`${S}.high`,console.log(`[PRECEDENCE] Detected high value for ${S}, using ${P} for precedence check`));const I=(0,p.getPrecedenceLevel)(P,c,l);u.push({path:P,score:M,precedence:I}),g.push(P),console.log(`[PRECEDENCE] Trigger "${P}" has precedence level ${I} for ${l}.${c}`)}}}else{const{min:e,max:s,score:i,severity:a,weight:f=1}=A,y=$(o,S);if(void 0===y||isNaN(y))continue;if("revenueMix.carbonPricing"===S&&(console.log(`[CARBON TAX][DEBUG] Province: ${c}, Value: ${y}, TriggerConfig:`,A),y<=.05&&console.log(`[CARBON TAX][CRITICAL] Near-zero carbon tax value detected: ${y}`)),E(y,A)){if(Math.abs(i)>n.zV||"extreme"===a){d.push({path:S,score:i,severity:a,value:y,entity:c,category:l}),console.log(`[CRITICAL] Found critical alert for ${l}.${c}: ${S} with score ${i}`);continue}const o=v(i),b=f||1,E=T(t,r),x=o*b*E;h+=x,m+=b;const $=w(o),C=$-3,M=3+C*E;let P=M,I=S;"revenueMix.carbonPricing"===S&&y>=.4&&("Alberta"===c||"Saskatchewan"===c)&&(I=`${S}.high`,console.log(`[CARBON TAX] ðŸ”´ Detected high carbon pricing value ${y} for ${c}, using ${I}`),C<0&&(P=Math.max(1,Math.min(2,P-1)),console.log(`[CARBON TAX] ðŸ”´ Enforcing strong negative sentiment for ${c}: score=${P}`)));const R=(0,p.getPrecedenceLevel)(I,c,l);u.push({path:I,score:P,precedence:R,value:y,severity:A.severity||"normal"}),g.push(`${S} = ${y} (${e||"-âˆž"} to ${s||"âˆž"})`),R!==p.PRECEDENCE_LEVELS.ABSOLUTE&&R!==p.PRECEDENCE_LEVELS.HIGH||console.log(`[PRECEDENCE] Trigger "${I}" has precedence level ${R} for ${l}.${c}`)}}const f=m>0?h/m:0;console.log(`[AGGREGATE] Raw score for ${l}.${c}: ${f} (weighted sum: ${h}, total weight: ${m})`);const y=Math.max(1,Math.min(5,Math.round(3+2*f)));if(console.log(`[SENTIMENT] Calculated sentiment value: ${y} from aggregateRaw: ${f}`),d.length>0){console.log(`[CRITICAL] Processing ${d.length} critical alerts for ${l}.${c}`);const e=d.reduce(((e,o)=>e+o.score),0),o=e/d.length;return{score:Math.max(1,Math.min(5,o)),activeTriggers:d.map((e=>e.path)),hasPrecedence:!0,criticalAlerts:d,aggregateRaw:f}}const b=u.filter((e=>e.precedence===p.PRECEDENCE_LEVELS.ABSOLUTE));if(b.length>0){console.log(`[PRECEDENCE] Absolute precedence found for ${l}.${c}: ${b.map((e=>e.path)).join(", ")}`);const e=b.reduce(((e,o)=>e+o.score),0),o=e/b.length;return{score:Math.max(1,Math.min(5,o)),activeTriggers:g,hasPrecedence:!0,aggregateRaw:f}}let x=0,C=0;for(const n of u)x+=n.score,C++;return C?(console.log("[SCORE DEBUG] Calculated score:",{total:x,count:C,averageScore:x/C,finalScore:y}),{score:y,activeTriggers:g,hasPrecedence:!1,aggregateRaw:f}):{score:y,activeTriggers:[],hasPrecedence:!1,aggregateRaw:f}}function $(e,o){if(o.endsWith(".adjustmentPercent")){const t=o.replace(".adjustmentPercent",""),n=$(e,t);return n?.adjustmentPercent}const t=o.split(".");return t.reduce(((e,o)=>e&&void 0!==e[o]?e[o]:void 0),e)}function w(e){const o=n.pE,t=e-3,r=1,s=t*o*r;return Math.max(1,Math.min(5,3+s))}function C(e){return e>=4.5?"Enthusiastic":e>=4?"Supportive":e>=3.5?"Positive":e>=3?"Neutral":e>=2.5?"Concerned":e>=2?"Dissatisfied":e>=1.5?"Opposed":"Outraged"}function S(e){return e>=4.5?"#38A169":e>=4?"#68D391":e>=3.5?"#9AE6B4":e>=3?"#CBD5E0":e>=2.5?"#FBD38D":e>=2?"#F6AD55":e>=1.5?"#FC8181":"#E53E3E"}function A(e){return e>=4.5?"ðŸ˜":e>=4?"ðŸ˜Š":e>=3.5?"ðŸ™‚":e>=3?"ðŸ˜":e>=2.5?"ðŸ¤”":e>=2?"ðŸ˜•":e>=1.5?"ðŸ˜ ":"ðŸ˜¡"}function M(e,o){for(const t of["provinces","demographics","sectors"])for(const n of Object.keys(e[t])){e[t][n]||(e[t][n]=3);const r=o>.5?.3:o>.3?.4:.5;e[t][n]=Math.min(2,e[t][n]*r),Math.random()<.3&&(e[t][n]=1)}}},95130:function(e,o,t){t.d(o,{A:function(){return y}});var n=t(6934),r=t(8679),s=t(94621),i=t(14171);const a={class:"party-budget-sharing bg-white rounded-lg shadow p-4 mb-4"},c={class:"grid grid-cols-3 gap-3"},l={class:"font-bold"},u={class:"p-2 flex justify-between items-center gap-2"},g=["onClick"],d=["onClick"],h={key:0,class:"mt-3 text-green-600 text-sm flex items-center"},p={key:1,class:"error-message"};var m={__name:"PartyBudgetSharing",setup(e){const o=(0,r.oJ)(),t=(0,s.W)(),m=(0,n.KR)(!1),v=(0,n.KR)(null),f=(0,n.KR)("");function y(e){if(e&&o.find((o=>o.id===e)))try{const n=(0,r._Q)(e,t);if(n){v.value=e;const t=o.find((o=>o.id===e))?.name||e;console.log(`Successfully applied ${t}`)}}catch(n){(0,i.H4)(n,(e=>{f.value=e}))}else(0,i.H4)(new Error("Invalid party ID"),(e=>{f.value=e}))}function T(e){try{const o=(0,r.WG)(e);if(!o)return void(0,i.H4)(new Error("Failed to generate party budget URL"),(e=>{f.value=e}));navigator.share?navigator.share({title:`${e.charAt(0).toUpperCase()+e.slice(1)} Party Budget 2025`,text:"Check out this budget simulation for the 2025 fiscal year",url:o}).catch((e=>{(0,i.H4)(e,(e=>{f.value=e})),b(o)})):b(o)}catch(o){(0,i.H4)(o,(e=>{f.value=e}))}}function b(e){navigator.clipboard.writeText(e).then((()=>{m.value=!0,setTimeout((()=>{m.value=!1}),3e3)})).catch((o=>{(0,i.H4)(o,(e=>{f.value=e}));try{const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),m.value=!0,setTimeout((()=>{m.value=!1}),3e3)}catch(t){(0,i.H4)(t,(e=>{f.value=e}))}}))}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",a,[t[2]||(t[2]=(0,n.Lk)("h3",{class:"text-lg font-semibold mb-2"},"Canadian Party Budget Approaches (2025)",-1)),t[3]||(t[3]=(0,n.Lk)("p",{class:"text-sm text-gray-600 mb-4"},"Explore how different parties would shape Canada's finances",-1)),(0,n.Lk)("div",c,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,n.R1)(o),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"party-card flex flex-col rounded-md overflow-hidden shadow-sm"},[(0,n.Lk)("div",{class:"party-header py-2 px-3 text-white text-center",style:(0,n.Tr)({backgroundColor:e.buttonColor})},[(0,n.Lk)("h4",l,(0,n.v_)(e.name.replace(" Budget 2025","")),1)],4),(0,n.Lk)("div",u,[(0,n.Lk)("button",{onClick:o=>y(e.id),class:(0,n.C4)(["action-button apply-button flex-1 py-2 px-3 text-xs font-medium rounded",{active:v.value===e.id}])}," Apply ",10,g),(0,n.Lk)("button",{onClick:o=>T(e.id),class:"action-button share-button flex items-center justify-center py-2 px-2 text-xs rounded"},t[0]||(t[0]=[(0,n.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,n.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1)]),8,d)])])))),128))]),m.value?((0,n.uX)(),(0,n.CE)("div",h,t[1]||(t[1]=[(0,n.Lk)("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,n.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),(0,n.eW)(" Link copied to clipboard! ")]))):(0,n.Q3)("",!0),f.value?((0,n.uX)(),(0,n.CE)("div",p,(0,n.v_)(f.value),1)):(0,n.Q3)("",!0)]))}},v=t(66262);const f=(0,v.A)(m,[["__scopeId","data-v-4a53961d"]]);var y=f}}]);
//# sourceMappingURL=common-7396ef59.cd1b4e20.js.map