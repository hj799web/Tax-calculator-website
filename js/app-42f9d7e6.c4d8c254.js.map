{"version":3,"file":"js/app-42f9d7e6.c4d8c254.js","mappings":"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","sources":["webpack://my-new-project/./src/domains/badges/config/badgeConfig.js","webpack://my-new-project/./src/domains/budget/index.js","webpack://my-new-project/./src/domains/badges/utils/generateBadgesFromBudget.js","webpack://my-new-project/./src/domains/budget/store/budgetSimulator.js","webpack://my-new-project/./src/domains/budget/utils/sharedBudget.js","webpack://my-new-project/./src/domains/calculator/constants/taxData.js","webpack://my-new-project/./src/domains/calculator/store/salary.js","webpack://my-new-project/./src/domains/calculator/store/year.js","webpack://my-new-project/./src/App.vue","webpack://my-new-project/./src/components/ErrorBoundary.vue","webpack://my-new-project/./src/components/ErrorBoundary.vue?4690","webpack://my-new-project/./src/components/Tabs.vue","webpack://my-new-project/./src/components/Tabs.vue?82b4","webpack://my-new-project/./src/domains/calculator/components/SalaryRateSelector.vue","webpack://my-new-project/./src/domains/calculator/components/SalaryRateSelector.vue?e596","webpack://my-new-project/./src/App.vue?7ccd"],"sourcesContent":["export const badgeConfig = [\n  //  FISCAL STRATEGIES \n  {\n    title: 'Fiscal Hawk',\n    icon: '',\n    tier: 'fiscal',\n    explanation: 'You balanced the books with minimal tax adjustments.',\n    presetMatch: 'balancedBudget',\n    conditions: (b) =>\n      // Relaxed conditions to ensure the badge is earned with the balancedBudget preset\n      Math.abs(b.surplus) <= 60 &&           \n      b.totalSpending <= b.totalRevenue * 2 && \n      true // Always evaluate to true for the matching preset\n  },\n  {\n    title: 'Austerity Champion',\n    icon: '',\n    tier: 'fiscal',\n    explanation: 'You cut spending significantly while keeping the budget lean.',\n    presetMatch: 'austerityPlan',\n    conditions: (b) =>\n      b.surplus > 5 * 0.2 &&                         // originally >5  now >1\n      b.budgetItems.healthcare < 90 * 1.8 &&           // originally <90  now <162\n      b.budgetItems.childrenAndFamilies < 30 * 1.8     // originally <30  now <54\n  },\n  {\n    title: 'Surplus Architect',\n    icon: '',\n    tier: 'fiscal',\n    explanation: 'You generated a surplus through careful fiscal management.',\n    conditions: (b) => b.surplus >= 5 * 0.2           // originally 5  now 1\n  },\n  {\n    title: 'Stimulus Commander',\n    icon: '',\n    tier: 'fiscal',\n    explanation: 'You ran a deficit to stimulate economic growth.',\n    presetMatch: 'progressiveExpansion',\n    conditions: (b) => b.surplus < 0\n  },\n  {\n    title: 'Green Growth Strategist',\n    icon: '',\n    tier: 'environmental',\n    explanation: 'You prioritized green investment and innovation for a sustainable future.',\n    presetMatch: 'progressiveExpansion',\n    conditions: (b) => b.budgetItems.environmentAndClimateChange > 1.05 && b.surplus < 0\n  },\n  {\n    title: 'Tax Loophole Closer',\n    icon: '',\n    tier: 'fiscal',\n    explanation: 'You tightened tax loopholes to secure revenue.',\n    conditions: (b) =>\n      b.taxExpenditures.deferrals?.adjustmentPercent >= 0 &&  \n      b.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent >= 0 &&\n      b.surplus >= 0\n  },\n\n  //  SOCIAL INVESTMENT \n  {\n    title: 'Equity Champion',\n    icon: '',\n    tier: 'social',\n    explanation: 'You prioritized healthcare, education, and family support.',\n    presetMatch: 'greenGrowthStimulus',\n    // Use OR logic to allow any one condition to pass:\n    conditions: [\n      (b) => b.budgetItems.healthcare > 50 * 0.2,         // originally >50  now >10\n      (b) => b.budgetItems.education > 30 * 0.2,            // originally >30  now >6\n      (b) => b.budgetItems.childrenAndFamilies > 30 * 0.2   // originally >30  now >6\n    ],\n    conditionsType: 'or'\n  },\n  {\n    title: 'Social Safety Weaver',\n    icon: '',\n    tier: 'social',\n    explanation: 'You strengthened the safety net with targeted investments.',\n    presetMatch: 'greenGrowthStimulus',\n    // Use OR logic so that meeting any one criterion qualifies:\n    conditions: [\n      (b) => b.budgetItems.supportForSeniors > 30 * 0.2,    // originally >30  now >6\n      (b) => b.budgetItems.childrenAndFamilies > 15 * 0.2   // originally >15  now >3\n    ],\n    conditionsType: 'or'\n  },\n  {\n    title: 'Family Champion',\n    icon: '',\n    tier: 'social',\n    explanation: 'You provided enhanced support to families.',\n    presetMatch: 'greenGrowthStimulus',\n    conditions: (b) =>\n      b.budgetItems.childrenAndFamilies > 15 * 0.2         // originally >15  now >3\n  },\n  {\n    title: 'Senior Ally',\n    icon: '',\n    tier: 'social',\n    explanation: 'You protected the welfare of older citizens.',\n    presetMatch: 'progressiveExpansion',\n    conditions: (b) =>\n      b.budgetItems.supportForSeniors >= 40 * 0.2 &&        // originally 40  now 8\n      b.budgetItems.healthcare >= 30 * 0.2                  // originally 30  now 6\n  },\n  {\n    title: 'Reconciliation Leader',\n    icon: '',\n    tier: 'social',\n    explanation: 'You prioritized support for Indigenous communities.',\n    conditions: (b) =>\n      b.budgetItems.indigenousServices >= 10 * 0.2 &&      // originally 10  now 2\n      b.budgetItems.indigenousOps >= 1 * 0.2                // originally 1  now 0.2\n  },\n  {\n    title: 'Welfare Architect',\n    icon: '',\n    tier: 'social',\n    explanation: 'You expanded social programs with balanced tax policies.',\n    presetMatch: ['socialSafetyNet', 'progressiveExpansion'],\n    conditions: (b) =>\n      b.budgetItems.childrenAndFamilies > 20 * 0.2 &&       // originally >20  now >4\n      b.budgetItems.supportForSeniors > 30 * 0.2 &&         // originally >30  now >6\n      b.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent >= 0\n  },\n\n  //  ECONOMIC STRATEGIES \n  {\n    title: 'Corporate Catalyst',\n    icon: '',\n    tier: 'economic',\n    explanation: 'You reduced corporate taxes to boost business investment and growth.',\n    presetMatch: 'businessFriendly',\n    conditions: (b) => b.revenueMix.corporateTax < 14\n  },\n  {\n    title: 'Tax Reformer',\n    icon: '',\n    tier: 'economic',\n    explanation: 'You restructured tax incentives for better economic outcomes.',\n    conditions: (b) =>\n      b.taxExpenditures.personalIncomeTaxCredits?.adjustmentPercent >= 4 * 0.2 && // originally 4  now 0.8\n      b.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent >= 4 * 0.2 && // originally 4  now 0.8\n      b.revenueMix.personalIncomeTax > 18 * 0.2 &&           // originally >18  now >3.6\n      b.revenueMix.gst >= 4 * 0.2                            // originally 4  now 0.8\n  },\n  {\n    title: 'Stimulus Engineer',\n    icon: '',\n    tier: 'economic',\n    explanation: 'You used strategic tax credits to stimulate investment.',\n    conditions: (b) =>\n      b.taxExpenditures.deferrals?.adjustmentPercent <= -3 * 0.2 &&  // originally  -3  now  -0.6\n      b.taxExpenditures.corporateTaxExpenditures?.adjustmentPercent <= -3 * 0.2 &&  // originally  -3  now  -0.6\n      b.surplus < -15 * 0.2                                  // originally < -15  now < -3\n  },\n  {\n    title: 'Innovation Powerhouse',\n    icon: '',\n    tier: 'economic',\n    explanation: 'You fostered innovation and digital transformation.',\n    presetMatch: 'infrastructureBuilder',\n    conditions: (b) =>\n      b.budgetItems.research >= 10 * 0.2 &&                 // originally 10  now 2\n      b.budgetItems.digitalGovernment >= 5 * 0.2            // originally 5  now 1\n  },\n  {\n    title: 'Infrastructure Visionary',\n    icon: '',\n    tier: 'economic',\n    explanation: 'You invested in the nations infrastructure for future growth.',\n    presetMatch: 'infrastructureBuilder',\n    conditions: (b) => b.budgetItems.infrastructure > 1.2\n  },\n\n  //  GREEN GROWTH / CARBON TAX BADGE \n  {\n    title: 'Green Growth Carbon Champion',\n    icon: '',\n    tier: 'environmental',\n    explanation: 'You set an ambitious carbon tax rate to drive green innovation. This is celebrated in some regions but controversial in others.',\n    // Awarded for a high carbon tax rate (same threshold as sentimentConfig.js high bracket: 2 * 0.2 = 0.4)\n    conditions: (b) => b.revenueMix?.carbonTax >= 0.4,\n  },\n\n  //  SECURITY STRATEGY \n  {\n    title: 'National Security Guardian',\n    icon: '',\n    tier: 'diplomatic',\n    explanation: 'You prioritized defense and public safety above all.',\n    presetMatch: 'securityFirst',\n    conditions: (b) => b.budgetItems.defense > 1.05\n  },\n  //  BALANCED APPROACHES \n  {\n    title: 'Centrist Pragmatist',\n    icon: '',\n    tier: 'balanced',\n    explanation: 'You maintained a balanced approach to fiscal policy.',\n    presetMatch: 'balancedBudget',\n    conditions: (b) =>\n      Math.abs(b.surplus) <= 30 * 1.8 &&                   // originally 30  now 54\n      Object.values(b.taxExpenditures).every(v =>\n        Math.abs(v.adjustmentPercent) <= 40 * 1.8         // originally 40  now 72\n      )\n  },\n  {\n    title: 'Progressive Moderate',\n    icon: '',\n    tier: 'balanced',\n    explanation: 'You balanced social investments with fiscal restraint.',\n    presetMatch: 'progressiveExpansion',\n    conditions: (b) =>\n      b.budgetItems.healthcare >= 25 * 0.2 &&              // originally 25  now 5\n      b.budgetItems.education >= 10 * 0.2 &&               // originally 10  now 2\n      Math.abs(b.surplus) <= 50 * 1.8                      // originally 50  now 90\n  }\n];\n","// Store facade with optional sandbox override injection\nimport { inject, provide } from 'vue'\nimport { useBudgetSimulatorStore as realUseBudgetSimulatorStore } from './store/budgetSimulator.js'\n\nconst BUDGET_STORE_OVERRIDE = Symbol('budget-store-override')\n\nexport function provideBudgetStoreOverride(storeLike) {\n  // Provide a store-like object to child components (used by year sandbox)\n  provide(BUDGET_STORE_OVERRIDE, storeLike)\n}\n\nexport function clearBudgetStoreOverride() {\n  provide(BUDGET_STORE_OVERRIDE, null)\n}\n\n// Keep the same API name so existing imports continue to work\nexport function useBudgetSimulatorStore() {\n  const override = inject(BUDGET_STORE_OVERRIDE, null)\n  // If a sandbox override is provided in the component tree, use it\n  if (override) return override\n  // Fallback to the real Pinia store\n  return realUseBudgetSimulatorStore()\n}\n\n// Re-export utilities\nexport * from './utils/sharedBudget.js'\n","import { badgeConfig } from '@/domains/badges/config/badgeConfig';\nimport { handleError } from '@/utils/errorHandler.js';\nimport { ref } from 'vue';\n\nexport const badgeErrorMessage = ref('');\n\n/**\n * Sensitivity factor: 60% more sensitive (i.e., multiplier of 1.6)\n * Increasing this makes it easier to earn badges by amplifying the impact of budget changes\n */\nconst sensitivityMultiplier = 1.6;\n\n/**\n * Apply a sensitivity multiplier to budget data.\n * This amplifies the impact of changes on key metrics used by badge conditions.\n *\n * @param {Object} budget - The raw budget data.\n * @param {number} multiplier - Sensitivity multiplier (e.g., 1.4 for 40% increased sensitivity).\n * @returns {Object} A new budget object with adjusted values.\n */\nfunction applySensitivity(budget, multiplier) {\n  return {\n    ...budget,\n    surplus: budget.surplus * multiplier,\n    totalRevenue: budget.totalRevenue * multiplier,\n    totalSpending: budget.totalSpending * multiplier,\n    revenueMix: { ...budget.revenueMix },\n    taxExpenditures: Object.fromEntries(\n      Object.entries(budget.taxExpenditures).map(([key, value]) => [\n        key,\n        {\n          ...value,\n          // Only modify if adjustmentPercent is a number.\n          adjustmentPercent:\n            typeof value.adjustmentPercent === 'number'\n              ? value.adjustmentPercent * multiplier\n              : value.adjustmentPercent,\n        },\n      ])\n    ),\n    budgetItems: Object.fromEntries(\n      Object.entries(budget.budgetItems).map(([key, value]) => [\n        key,\n        typeof value === 'number' ? value * multiplier : value,\n      ])\n    ),\n  };\n}\n\n/**\n * Generate achievement badges based on budget decisions.\n *\n * @param {Object} budget - The raw budget data.\n * @param {string|null} [activePreset=null] - The currently active budget preset key (if any).\n * @param {number|null} [maxBadges=5] - Maximum number of badges to return. Set null for no limit.\n * @returns {Array} Array of earned badges.\n */\nexport function getBudgetBadges(budget, activePreset = null, maxBadges = 5) {\n  // Memoization: cache by budget hash AND active preset\n  // This ensures that changing presets always triggers a badge recalculation\n  const hash = JSON.stringify({ budget, activePreset });\n  if (window._badgeCache?.hash === hash) return window._badgeCache.result;\n\n  // Add detailed debugging to check what's being passed in\n  console.log('%c[BADGE DEBUG] getBudgetBadges called', 'background: #3498db; color: white; padding: 2px 5px; border-radius: 3px;');\n  console.log('Budget data for badges:', budget);\n  console.log('Active preset:', activePreset, typeof activePreset);\n  console.log('Max badges:', maxBadges);\n  console.log('Available badges in config:', badgeConfig.length);\n  console.log('Badge config:', badgeConfig.map(b => ({ title: b.title, tier: b.tier, presetMatch: b.presetMatch })));\n  \n  // CRITICAL FIX: If we have an active preset, ALWAYS include the matching badge\n  // This is the most important fix to ensure preset badges always appear\n  if (activePreset) {\n    console.log('%c[BADGE DEBUG] GUARANTEE MODE: Ensuring preset badge appears for:', 'background: #e74c3c; color: white; font-weight: bold; padding: 2px 5px; border-radius: 3px;', activePreset);\n  }\n  \n  // Apply the sensitivity multiplier to make badge evaluation 40% more sensitive.\n  const sensitiveBudget = applySensitivity(budget, sensitivityMultiplier);\n  // Store hash and result for memoization\n  window._badgeCache = window._badgeCache || {};\n\n  \n  // Filter for \"regular\" badges (exclude fallback) that satisfy their conditions.\n  const regularBadges = badgeConfig.filter(b => {\n    try {\n      // Enhanced debugging for badge conditions\n      console.log(`%c[BADGE EVAL] Evaluating badge: ${b.title} (${b.tier})`, 'color: #9b59b6;');\n      \n      // Check for specific properties used in conditions\n      const conditionStr = b.conditions.toString();\n      \n      // Log specific budget values that might be problematic\n      if (conditionStr.includes('childrenAndFamilies')) {\n        console.log(`  - childrenAndFamilies value:`, sensitiveBudget.budgetItems.childrenAndFamilies);\n      }\n      if (conditionStr.includes('supportForSeniors')) {\n        console.log(`  - supportForSeniors value:`, sensitiveBudget.budgetItems.supportForSeniors);\n      }\n      \n      // Handle array of conditions (OR logic)\n      if (Array.isArray(b.conditions)) {\n        if (b.conditionsType === 'or') {\n          const results = b.conditions.map(condition => {\n            try {\n              return condition(sensitiveBudget);\n            } catch (err) {\n              handleError(err, (msg) => badgeErrorMessage.value = msg);\n              return false;\n            }\n          });\n          const result = results.some(r => r);\n          console.log(`  - OR conditions result:`, result, results);\n          return result;\n        } else {\n          // Default to AND logic\n          const results = b.conditions.map(condition => {\n            try {\n              return condition(sensitiveBudget);\n            } catch (err) {\n              handleError(err, (msg) => badgeErrorMessage.value = msg);\n              return false;\n            }\n          });\n          const result = results.every(r => r);\n          console.log(`  - AND conditions result:`, result, results);\n          return result;\n        }\n      }\n      \n      // Standard single condition\n      const result = b.tier !== 'fallback' && b.conditions(sensitiveBudget);\n      console.log(`  - Condition result:`, result);\n      return result;\n    } catch (error) {\n      handleError(error, (msg) => badgeErrorMessage.value = msg);\n      return false;\n    }\n  });\n  \n  console.log('%c[BADGE DEBUG] Regular badges that match conditions:', 'background: #2ecc71; color: white; padding: 2px 5px; border-radius: 3px;', regularBadges.map(b => b.title));\n  \n  if (regularBadges.length > 0) {\n    // Define badge tier priority for sorting\n    const priority = ['fiscal', 'economic', 'social', 'environmental', 'diplomatic', 'balanced'];\n    \n    // If an activePreset is provided, prioritize badges that match the preset\n    if (activePreset) {\n      console.log('%c[BADGE DEBUG] Prioritizing preset matches with activePreset:', 'background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;', activePreset);\n      \n      // GUARANTEED PRESET BADGE SYSTEM\n      // Find all badges that are designed to match this preset\n      const presetBadges = badgeConfig.filter(b => {\n        if (!b.presetMatch) return false;\n        \n        if (Array.isArray(b.presetMatch)) {\n          return b.presetMatch.includes(activePreset);\n        }\n        return b.presetMatch === activePreset;\n      });\n      \n      console.log('%c[BADGE DEBUG] All badges matching preset:', 'color: #3498db;', \n        presetBadges.map(b => b.title));\n      \n      // CRITICAL FIX: Directly add ALL preset-specific badges to regularBadges\n      // This guarantees that all badges designed for this preset will appear\n      if (presetBadges.length > 0) {\n        console.log('%c[BADGE DEBUG] GUARANTEE MODE: Adding ALL preset badges:', 'background: #e74c3c; color: white; font-weight: bold;', \n          presetBadges.map(b => b.title));\n          \n        // Add any preset badges that aren't already in regularBadges\n        presetBadges.forEach(presetBadge => {\n          if (!regularBadges.some(rb => rb.title === presetBadge.title)) {\n            console.log(`  - Adding guaranteed preset badge: ${presetBadge.title}`);\n            regularBadges.push(presetBadge);\n          }\n        });\n      }\n      \n      // Find badges that explicitly match this preset\n      const presetMatchBadges = regularBadges.filter(b => {\n        console.log(`Checking badge ${b.title} for preset match:`, b.presetMatch);\n        if (!b.presetMatch) {\n          console.log(`  - No presetMatch for ${b.title}`);\n          return false;\n        }\n        if (Array.isArray(b.presetMatch)) {\n          const includes = b.presetMatch.includes(activePreset);\n          console.log(`  - Array presetMatch for ${b.title}:`, b.presetMatch, 'includes', activePreset, '?', includes);\n          return includes;\n        }\n        const matches = b.presetMatch === activePreset;\n        console.log(`  - String presetMatch for ${b.title}:`, b.presetMatch, '===', activePreset, '?', matches);\n        return matches;\n      });\n      \n      console.log('%c[BADGE DEBUG] Preset-matching badges:', 'background: #f39c12; color: white; padding: 2px 5px; border-radius: 3px;', presetMatchBadges.map(b => b.title));\n      \n      // If we found preset-matching badges, prioritize them but still include other earned badges\n      if (presetMatchBadges.length > 0) {\n        console.log('Found preset-matching badges, prioritizing them');\n        \n        // Sort preset-matching badges by tier priority\n        const sortedPresetMatches = [...presetMatchBadges].sort(\n          (a, b) => priority.indexOf(a.tier) - priority.indexOf(b.tier)\n        );\n        \n        // Get badges that don't match the preset\n        const otherBadges = regularBadges.filter(b => !presetMatchBadges.includes(b));\n        console.log('Other non-matching badges:', otherBadges.map(b => b.title));\n        \n        // Sort other badges by tier priority\n        const sortedOtherBadges = [...otherBadges].sort(\n          (a, b) => priority.indexOf(a.tier) - priority.indexOf(b.tier)\n        );\n        \n        // Combine preset-matching badges with other badges\n        const combined = [...sortedPresetMatches, ...sortedOtherBadges];\n        console.log('Combined badges (preset matches first):', combined.map(b => b.title));\n        \n        // Return the top N badges (or all if maxBadges is null)\n        const result = maxBadges ? combined.slice(0, maxBadges) : combined;\n        window._badgeCache = { hash, result };\n        return result;\n      }\n    }\n    \n    // If no preset-specific badges or no active preset, sort all regular badges.\n    // Use the priority array defined above\n    const sortedRegularBadges = regularBadges.sort(\n      (a, b) => priority.indexOf(a.tier) - priority.indexOf(b.tier)\n    );\n    const result = maxBadges ? sortedRegularBadges.slice(0, maxBadges) : sortedRegularBadges;\n    console.log('Returning regular badges:', result.map(b => b.title));\n    return result;\n  }\n  \n  // If no regular badges are found, just return an empty array\n  // We no longer use fallback badges\n  console.log('No regular badges found, returning empty array');\n  return [];\n}\n","import { defineStore } from \"pinia\";\nimport { getBudgetBadges } from \"@/domains/badges/utils/generateBadgesFromBudget.js\";\nimport { budgetPersistence } from \"@/utils/statePersistence.js\";\nimport { handleError } from '@/utils/errorHandler.js';\nimport { ref, markRaw } from 'vue';\nimport { budgetValidationSchemas } from '@/utils/storeValidation.js';\nimport { wrapStoreAction } from '@/utils/storeActionWrapper.js';\nimport { debounce } from 'lodash-es';\nimport { getCategoryName } from '@/i18n';\n\n// Helper function to get translated category names\nconst getTranslatedName = (categoryId, categoryType = 'spending') => {\n  return getCategoryName(categoryId, categoryType);\n};\n\n// Change types for categorization\nconst CHANGE_TYPES = {\n  REVENUE: 'revenue',\n  SPENDING: 'spending',\n  TAX_EXPENDITURE: 'tax_expenditure',\n  PRESET: 'preset',\n  RESET: 'reset',\n  AUTO_BALANCE: 'auto_balance'\n};\n\n// Change categories for grouping\nconst CHANGE_CATEGORIES = {\n  INCOME_TAXES: 'Income Taxes',\n  CONSUMPTION_TAXES: 'Consumption Taxes', \n  OTHER_REVENUE: 'Other Revenue',\n  MAIN_SPENDING: 'Main Spending',\n  LOANS_INVESTMENTS: 'Loans & Investments',\n  GOVERNMENT_OPS: 'Government Operations',\n  TAX_CREDITS: 'Tax Credits & Deductions',\n  SYSTEM_ACTIONS: 'System Actions'\n};\n\n// Map revenue sources to categories\nconst REVENUE_CATEGORY_MAP = {\n  personalIncomeTax: CHANGE_CATEGORIES.INCOME_TAXES,\n  corporateIncomeTax: CHANGE_CATEGORIES.INCOME_TAXES,\n  gst: CHANGE_CATEGORIES.CONSUMPTION_TAXES,\n  exciseTaxes: CHANGE_CATEGORIES.CONSUMPTION_TAXES,\n  carbonPricing: CHANGE_CATEGORIES.CONSUMPTION_TAXES,\n  customsDuties: CHANGE_CATEGORIES.CONSUMPTION_TAXES,\n  eiPremiums: CHANGE_CATEGORIES.OTHER_REVENUE,\n  crownProfits: CHANGE_CATEGORIES.OTHER_REVENUE,\n  resourceRoyalties: CHANGE_CATEGORIES.OTHER_REVENUE,\n  nonTaxRevenue: CHANGE_CATEGORIES.OTHER_REVENUE\n};\n\n// Map spending categories to change categories  \nconst SPENDING_CATEGORY_MAP = {\n  healthcare: CHANGE_CATEGORIES.MAIN_SPENDING,\n  education: CHANGE_CATEGORIES.MAIN_SPENDING,\n  seniors: CHANGE_CATEGORIES.MAIN_SPENDING,\n  childrenFamilies: CHANGE_CATEGORIES.MAIN_SPENDING,\n  indigenousServices: CHANGE_CATEGORIES.MAIN_SPENDING,\n  employmentInsurance: CHANGE_CATEGORIES.MAIN_SPENDING,\n  defensePublicSafety: CHANGE_CATEGORIES.MAIN_SPENDING,\n  // Group children\n  studentLoans: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  agricultureLoans: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  internationalDevelopment: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  businessInnovation: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  defenseSector: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  economicDevelopment: CHANGE_CATEGORIES.LOANS_INVESTMENTS,\n  // Government operations\n  transportationInfrastructure: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  environmentalPrograms: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  publicSafetyEmergency: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  governmentBuildings: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  researchInnovation: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  digitalGovernment: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  federalEmployeeSalaries: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  legalJusticeSystem: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  indigenousServicesOps: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  culturalHeritage: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  scientificResearch: CHANGE_CATEGORIES.GOVERNMENT_OPS,\n  diplomaticRepresentation: CHANGE_CATEGORIES.GOVERNMENT_OPS\n};\n\n// Change record class for structured data\nclass ChangeRecord {\n  constructor(type, category, itemId, itemName, oldValue, newValue, description = null, dollarImpact = null) {\n    this.id = `change_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    this.type = type;\n    this.category = category;\n    this.itemId = itemId;\n    this.itemName = itemName;\n    this.oldValue = oldValue;\n    this.newValue = newValue;\n    this.amount = newValue - oldValue;          // Rate/factor change\n    this.dollarImpact = dollarImpact || 0;      // Actual dollar impact\n    this.timestamp = Date.now();\n    this.description = description || this.generateDescription();\n  }\n\n  generateDescription() {\n    const changeDirection = this.amount > 0 ? 'increased' : 'decreased';\n    \n    if (this.type === CHANGE_TYPES.REVENUE) {\n      // FIXED: Use rate values for percentage description\n      return `${this.itemName} rate ${changeDirection} by ${Math.abs(this.amount).toFixed(1)}%`;\n    } else if (this.type === CHANGE_TYPES.SPENDING) {\n      // FIXED: Use factor values for percentage description  \n      return `${this.itemName} ${changeDirection} by ${Math.abs(this.amount).toFixed(1)}%`;\n    } else if (this.type === CHANGE_TYPES.TAX_EXPENDITURE) {\n      return `${this.itemName} adjustment ${changeDirection} by ${Math.abs(this.amount).toFixed(1)}%`;\n    }\n    return `${this.itemName} ${changeDirection}`;\n  }\n\n  // NEW: Method to get display amount (keeps existing interface)\n  getDisplayAmount() {\n    // Prefer dollar impact when available for accurate fiscal representation\n    if (this.dollarImpact !== undefined && this.dollarImpact !== null) {\n      return this.dollarImpact;\n    }\n    return this.amount;  // Fallback to raw change amount (e.g., percent points)\n  }\n\n  getChangeIcon() {\n    const val = this.getDisplayAmount();\n    if (val > 0) return 'trending_up';\n    if (val < 0) return 'trending_down';\n    return 'remove';\n  }\n\n  getChangeColor() {\n    const val = this.getDisplayAmount();\n    if (val > 0) return '#27ae60'; // Green for net-positive fiscal impact\n    if (val < 0) return '#e74c3c'; // Red for net-negative fiscal impact\n    return '#95a5a6'; // Gray for no change\n  }\n}\n\n// Development logging utilities\nconst devLog = (message, ...args) => {\n  if (process.env.NODE_ENV === 'development') {\n    console.log(`%c[STORE] ${message}`, 'color: #4299e1; font-weight: bold;', ...args);\n  }\n};\n\nconst devWarn = (message, ...args) => {\n  if (process.env.NODE_ENV === 'development') {\n    console.warn(`%c[STORE] ${message}`, 'color: #ed8936; font-weight: bold;', ...args);\n  }\n};\n\n// Add a user-facing error message ref for use in components\nexport const budgetErrorMessage = ref('');\n\nexport const useBudgetSimulatorStore = defineStore(\"budgetSimulator\", {\n  state: () => ({\n    // State management and batch processing\n    isBatchUpdateInProgress: false,\n    stateVersion: 0, // Incremented after each batch update to trigger reactivity\n\n    // Performance optimization flags\n    _reactiveUpdates: true,\n    _batchUpdateDepth: 0,\n    _pendingUpdates: new Set(),\n    \n    // Memoization cache for expensive computations\n    _computedCache: new Map(),\n    _cacheVersion: 0,\n\n    // Loading states\n    isUpdating: false,\n    isCalculating: false,\n    isSaving: false,\n    isLoading: false,\n\n    // Badge system state\n    sentimentUpdateRequired: false, // Flag for debounced sentiment update\n    badges: [],\n    lastBadgeUpdate: Date.now(),\n    lastSentimentUpdate: Date.now(), // Trigger for sentiment recalculation\n    activePreset: null,\n    // Auto-balance feature state\n    autoBalanceActive: false, // Goal-based auto-balance\n    simpleAutoBalanceActive: false, // Simple auto-balance (just eliminate deficit)\n    // Auto-balance configuration\n    autoBalanceConfig: {\n      revenueToSpendingRatio: 0.5, // 50% revenue / 50% spending (0.5 means 50/50 split)\n      minSpendingFactor: 0.1,      // Minimum spending factor (10% of original)\n      maxSpendingFactor: 2.0,      // Maximum spending factor (200% of original)\n      prioritizePIT: true,         // Whether to prioritize Personal Income Tax adjustments\n    },\n    _isRecalculating: false, // Reentrancy guard\n\n    // Revenue sources with base values, rates, and year-specific rates\n    revenueSources: {\n      personalIncomeTax: {\n        id: \"personalIncomeTax\",\n        name: getTranslatedName(\"personalIncomeTax\", \"revenue\"),\n        rate: 21,\n        base: 10, // $10B per 1%\n        amount: 210, // $210B\n        adjustedAmount: 210,\n        rateByYear: {\n          2022: 20,\n          2023: 20.5,\n          2024: 21,\n          2025: 21.5,\n          2026: 22,\n        },\n        minRate: 0,\n        maxRate: 50,\n        description:\n          \"Controls the average effective personal income tax rate across all brackets.\",\n        note: \"Personal income tax is the largest source of federal revenue.\",\n        linkedExpenditures: [\"personalTaxCredits\", \"taxDeferrals\"],\n        expenditureImpact: 0,\n        color: \"#4299E1\", // blue-500\n      },\n      corporateIncomeTax: {\n        id: \"corporateIncomeTax\",\n        name: getTranslatedName(\"corporateIncomeTax\", \"revenue\"),\n        rate: 15,\n        base: 5.33, // ~$5.33B per 1%\n        amount: 80, // $80B\n        adjustedAmount: 80,\n        rateByYear: {\n          2022: 14,\n          2023: 14.5,\n          2024: 15,\n          2025: 15.5,\n          2026: 16,\n        },\n        minRate: 0,\n        maxRate: 40,\n        description: \"Reflects business contributions via corporate taxes.\",\n        note: \"Corporate income tax is levied on business profits.\",\n        linkedExpenditures: [\"corporateTaxExpenditures\"],\n        expenditureImpact: 0,\n        color: \"#48BB78\", // green-500\n      },\n      gst: {\n        id: \"gst\",\n        name: getTranslatedName(\"gstHst\", \"revenue\"),\n        rate: 5,\n        base: 10, // $10B per 1%\n        amount: 50, // $50B\n        adjustedAmount: 50,\n        rateByYear: {\n          2022: 5,\n          2023: 5,\n          2024: 5,\n          2025: 5,\n          2026: 5,\n        },\n        minRate: 0,\n        maxRate: 25,\n        description: \"Consumption-based tax, commonly 5% in Canada.\",\n        note: \"The Goods and Services Tax (GST) is a 5% federal sales tax.\",\n        linkedExpenditures: [\"gstExpenditures\"],\n        expenditureImpact: 0,\n        color: \"#ED8936\", // orange-500\n      },\n      exciseTaxes: {\n        id: \"exciseTaxes\",\n        name: getTranslatedName(\"exciseTaxes\", \"revenue\"),\n        rate: 2.5,\n        base: 4.8, // $4.8B per 1%\n        amount: 12, // $12B\n        adjustedAmount: 12,\n        rateByYear: {\n          2022: 2.3,\n          2023: 2.4,\n          2024: 2.5,\n          2025: 2.6,\n          2026: 2.7,\n        },\n        minRate: 0,\n        maxRate: 25,\n        description: \"Fuel, tobacco, and alcohol excise.\",\n        note: \"Fuel, tobacco, and alcohol taxes.\",\n        color: \"#9F7AEA\", // purple-500\n      },\n      carbonPricing: {\n        id: \"carbonPricing\",\n        name: getTranslatedName(\"carbonPricing\", \"revenue\"),\n        rate: 1,\n        base: 8, // $8B per 1%\n        amount: 8, // $8B\n        adjustedAmount: 8,\n        rateByYear: {\n          2022: 0.8,\n          2023: 0.9,\n          2024: 1,\n          2025: 1.1,\n          2026: 1.2,\n        },\n        minRate: 0,\n        maxRate: 10,\n        description: \"Levy on carbon emissions.\",\n        note: \"Levy on carbon emissions.\",\n        color: \"#38B2AC\", // teal-500\n      },\n      eiPremiums: {\n        id: \"eiPremiums\",\n        name: getTranslatedName(\"employmentInsurancePremiums\", \"revenue\"),\n        rate: 1.35,\n        base: 20, // $20B per 1%\n        amount: 27, // $27B\n        adjustedAmount: 27,\n        rateByYear: {\n          2022: 1.3,\n          2023: 1.32,\n          2024: 1.35,\n          2025: 1.38,\n          2026: 1.4,\n        },\n        minRate: 0,\n        maxRate: 10,\n        description: \"Payroll contributions from employers and employees.\",\n        note: \"Contributions from employers and employees.\",\n        color: \"#667EEA\", // indigo-500\n      },\n      customsDuties: {\n        id: \"customsDuties\",\n        name: getTranslatedName(\"customsAndImportDuties\", \"revenue\"),\n        rate: 1,\n        base: 6, // $6B per 1%\n        amount: 6, // $6B\n        adjustedAmount: 6,\n        rateByYear: {\n          2022: 0.9,\n          2023: 0.95,\n          2024: 1,\n          2025: 1.05,\n          2026: 1.1,\n        },\n        minRate: 0,\n        maxRate: 20,\n        description: \"Tariffs on imported goods.\",\n        note: \"Tariffs on imported goods.\",\n        color: \"#F56565\", // red-500\n      },\n      crownProfits: {\n        id: \"crownProfits\",\n        name: getTranslatedName(\"crownCorporationProfits\", \"revenue\"),\n        rate: 2.5,\n        base: 2.4, // $2.4B per 1%\n        amount: 6, // $6B\n        adjustedAmount: 6,\n        rateByYear: {\n          2022: 2.3,\n          2023: 2.4,\n          2024: 2.5,\n          2025: 2.6,\n          2026: 2.7,\n        },\n        minRate: 0,\n        maxRate: 10,\n        description:\n          \"Annual profits from corporations like Canada Post and EDC.\",\n        note: \"Profits from entities like Canada Post or EDC.\",\n        color: \"#F687B3\", // pink-500\n      },\n      nonTaxRevenue: {\n        id: \"nonTaxRevenue\",\n        name: getTranslatedName(\"otherNonTaxRevenues\", \"revenue\"),\n        rate: 3,\n        base: 10, // $10B per 1%\n        amount: 30, // $30B\n        adjustedAmount: 30,\n        rateByYear: {\n          2022: 2.8,\n          2023: 2.9,\n          2024: 3,\n          2025: 3.1,\n          2026: 3.2,\n        },\n        minRate: 0,\n        maxRate: 20,\n        description: \"Licenses, fees, and investment income.\",\n        note: \"Income from licenses, fees, and investments.\",\n        color: \"#FC8181\", // red-400\n      },\n      resourceRoyalties: {\n        id: \"resourceRoyalties\",\n        name: getTranslatedName(\"resourceRoyalties\", \"revenue\"),\n        rate: 1,\n        base: 5, // $5B per 1%\n        amount: 5, // $5B\n        adjustedAmount: 5,\n        rateByYear: {\n          2022: 0.8,\n          2023: 0.9,\n          2024: 1,\n          2025: 1.1,\n          2026: 1.2,\n        },\n        minRate: 0,\n        maxRate: 10,\n        description: \"Oil, gas, and mineral royalties.\",\n        note: \"Oil, gas, and mineral royalties (volatile).\",\n        color: \"#B794F4\", // purple-400\n      },\n    },\n\n    // Spending categories including groups and standalone categories\n    spendingCategories: {\n      healthcare: {\n        id: \"healthcare\",\n        name: getTranslatedName(\"healthcareCht\", \"spending\"),\n        baseAmount: 50.4, // $50.4B (Canada Health Transfer)\n        adjustmentFactor: 1,\n        description:\n          \"Canada Health Transfer to provinces and territories for healthcare services.\",\n        color: \"#F56565\", // red-500\n      },\n      education: {\n        id: \"education\",\n        name: getTranslatedName(\"education\", \"spending\"),\n        baseAmount: 12.0, // $12.0B (federal programs, transfers, research support)\n        adjustmentFactor: 1,\n        description:\n          \"Federal education supports including transfers, grants, and learning programs.\",\n        color: \"#3182CE\", // blue-600\n      },\n      seniors: {\n        id: \"seniors\",\n        name: getTranslatedName(\"supportForSeniors\", \"spending\"),\n        baseAmount: 76.0, // $76.0B (OAS, GIS, Allowances)\n        adjustmentFactor: 1,\n        description:\n          \"Old Age Security, Guaranteed Income Supplement, and other senior support programs.\",\n        color: \"#4299E1\", // blue-500\n      },\n      childrenFamilies: {\n        id: \"childrenFamilies\",\n        name: getTranslatedName(\"childrenAndFamilies\", \"spending\"),\n        baseAmount: 26.3, // $26.3B (Canada Child Benefit)\n        adjustmentFactor: 1,\n        description:\n          \"Canada Child Benefit and other family support programs.\",\n        color: \"#48BB78\", // green-500\n      },\n      indigenousServices: {\n        id: \"indigenousServices\",\n        name: getTranslatedName(\"indigenousServices\", \"spending\"),\n        baseAmount: 35.5, // $35.5B (ISC & CIRNAC)\n        adjustmentFactor: 1,\n        description:\n          \"Services, infrastructure, and reconciliation efforts for Indigenous communities.\",\n        color: \"#ED8936\", // orange-500\n      },\n      employmentInsurance: {\n        id: \"employmentInsurance\",\n        name: getTranslatedName(\"employmentInsurance\", \"spending\"),\n        baseAmount: 23.1, // $23.1B (Employment Insurance and Other Benefits)\n        adjustmentFactor: 1,\n        description:\n          \"Benefits for unemployed workers, parental leave, and skills training.\",\n        color: \"#9F7AEA\", // purple-500\n      },\n      defensePublicSafety: {\n        id: \"defensePublicSafety\",\n        name: getTranslatedName(\"defensePublicSafety\", \"spending\"),\n        baseAmount: 32.6, // $32.6B (DND, RCMP, CBSA)\n        adjustmentFactor: 1,\n        description:\n          \"Military, RCMP, border services, and other security agencies.\",\n        color: \"#38B2AC\", // teal-500\n      },\n      // Loans, Investments & Advances group\n      loansInvestments: {\n        id: \"loansInvestments\",\n        name: getTranslatedName(\"loansInvestmentsAdvances\", \"spending\"),\n        isGroup: true,\n        isExpanded: false,\n        color: \"#ECC94B\", // yellow-500\n        children: {\n          studentLoans: {\n            id: \"studentLoans\",\n            name: getTranslatedName(\"studentLoans\", \"spending.subcategories\"),\n            baseAmount: 24.0, // $24.0B (Canada Student Financial Assistance Program)\n            adjustmentFactor: 1,\n            description: \"Financial assistance for post-secondary education.\",\n            color: \"#ECC94B\", // yellow-500\n          },\n          agricultureLoans: {\n            id: \"agricultureLoans\",\n            name: getTranslatedName(\"agricultureLoans\", \"spending.subcategories\"),\n            baseAmount: 0.162, // $0.162B (AgriRecovery and other programs)\n            adjustmentFactor: 1,\n            description: \"Support for farmers and agricultural businesses.\",\n            color: \"#ECC94B\", // yellow-500\n          },\n          internationalDevelopment: {\n            id: \"internationalDevelopment\",\n            name: getTranslatedName(\"internationalDevelopment\", \"spending.subcategories\"),\n            baseAmount: 53.0, // $53.0B (International development loans and grants)\n            adjustmentFactor: 1,\n            description: \"Foreign aid and development assistance.\",\n            color: \"#ECC94B\", // yellow-500\n          },\n          businessInnovation: {\n            id: \"businessInnovation\",\n            name: getTranslatedName(\"businessInnovation\", \"spending.subcategories\"),\n            baseAmount: 0.6, // $0.6B (Innovation and infrastructure projects)\n            adjustmentFactor: 1,\n            description:\n              \"Loans and investments to support business growth and innovation.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          defenseSector: {\n            id: \"defenseSector\",\n            name: getTranslatedName(\"defenseSector\", \"spending.subcategories\"),\n            baseAmount: 1.45, // $1.45B (Defense sector loans and investments)\n            adjustmentFactor: 1,\n            description:\n              \"Investments in defense equipment and technology.\",\n            color: \"#ECC94B\", // yellow-500\n          },\n          economicDevelopment: {\n            id: \"economicDevelopment\",\n            name: getTranslatedName(\"economicDevelopment\", \"spending.subcategories\"),\n            baseAmount: 0.5, // $0.5B (Regional development programs)\n            adjustmentFactor: 1,\n            description:\n              \"Regional development programs and initiatives.\",\n            color: \"#ECC94B\", // yellow-500\n          },\n        },\n      },\n      // Government Operations group\n      governmentOperations: {\n        id: \"governmentOperations\",\n        name: getTranslatedName(\"governmentOperations\", \"spending\"),\n        isGroup: true,\n        isExpanded: false,\n        color: \"#ED64A6\", // pink-500\n        children: {\n          transportationInfrastructure: {\n            id: \"transportationInfrastructure\",\n            name: getTranslatedName(\"transportationInfrastructure\", \"spending.subcategories\"),\n            baseAmount: 15.0, // $15.0B\n            adjustmentFactor: 1,\n            description:\n              \"Investments in national transportation infrastructure, including roadways, bridges, ports, and rail systems.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          environmentalPrograms: {\n            id: \"environmentalPrograms\",\n            name: getTranslatedName(\"environmentalPrograms\", \"spending.subcategories\"),\n            baseAmount: 8.0, // $8.0B\n            adjustmentFactor: 1,\n            description:\n              \"Funds dedicated to climate change initiatives, conservation efforts, and environmental protection.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          publicSafetyEmergency: {\n            id: \"publicSafetyEmergency\",\n            name: getTranslatedName(\"publicSafetyAndEmergencyPreparedness\", \"spending.subcategories\"),\n            baseAmount: 9.0, // $9.0B\n            adjustmentFactor: 1,\n            description:\n              \"Funding for national security agencies to respond to emergencies and public safety threats.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          governmentBuildings: {\n            id: \"governmentBuildings\",\n            name: getTranslatedName(\"governmentBuildingsAndProperties\", \"spending.subcategories\"),\n            baseAmount: 7.0, // $7.0B\n            adjustmentFactor: 1,\n            description:\n              \"Maintenance and construction of government buildings for essential services.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          researchInnovation: {\n            id: \"researchInnovation\",\n            name: getTranslatedName(\"researchAndInnovation\", \"spending.subcategories\"),\n            baseAmount: 10.0, // $10.0B\n            adjustmentFactor: 1,\n            description:\n              \"Investments in research and development across sectors for scientific advances.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          digitalGovernment: {\n            id: \"digitalGovernment\",\n            name: getTranslatedName(\"digitalGovernmentAndItInfrastructure\", \"spending.subcategories\"),\n            baseAmount: 5.0, // $5.0B\n            adjustmentFactor: 1,\n            description:\n              \"Modernizing federal digital services and IT infrastructure.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          federalEmployeeSalaries: {\n            id: \"federalEmployeeSalaries\",\n            name: getTranslatedName(\"federalEmployeeSalariesAndBenefits\", \"spending.subcategories\"),\n            baseAmount: 35.0, // $35.0B\n            adjustmentFactor: 1,\n            description:\n              \"Salaries, pensions, and benefits for federal employees.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          legalJusticeSystem: {\n            id: \"legalJusticeSystem\",\n            name: getTranslatedName(\"legalAndJusticeSystem\", \"spending.subcategories\"),\n            baseAmount: 5.0, // $5.0B\n            adjustmentFactor: 1,\n            description:\n              \"Supports the national legal and justice system.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          indigenousServicesOps: {\n            id: \"indigenousServicesOps\",\n            name: getTranslatedName(\"indigenousServicesOperationalExpenses\", \"spending.subcategories\"),\n            baseAmount: 4.0, // $4.0B\n            adjustmentFactor: 1,\n            description:\n              \"Operational costs for Indigenous Services Canada.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          culturalHeritage: {\n            id: \"culturalHeritage\",\n            name: getTranslatedName(\"culturalAndHeritagePrograms\", \"spending.subcategories\"),\n            baseAmount: 2.0, // $2.0B\n            adjustmentFactor: 1,\n            description:\n              \"Funding for national cultural institutions and heritage preservation.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          scientificResearch: {\n            id: \"scientificResearch\",\n            name: getTranslatedName(\"scientificResearchDevelopment\", \"spending.subcategories\"),\n            baseAmount: 5.0, // $5.0B\n            adjustmentFactor: 1,\n            description:\n              \"Funding for scientific research across various sectors.\",\n            color: \"#ED64A6\", // pink-500\n          },\n          diplomaticRepresentation: {\n            id: \"diplomaticRepresentation\",\n            name: getTranslatedName(\"diplomaticAndInternationalRepresentation\", \"spending.subcategories\"),\n            baseAmount: 5.0, // $5.0B\n            adjustmentFactor: 1,\n            description:\n              \"Operational costs of Global Affairs Canada and diplomatic missions.\",\n            color: \"#ED64A6\", // pink-500\n          },\n        },\n      },\n    },\n\n    // Fixed costs that cannot be adjusted by users\n    fixedCosts: {\n      debtServicing: {\n        id: \"debtServicing\",\n        name: getTranslatedName(\"debtServicing\", \"spending\"),\n        amount: 47.3, // $47.3B (Public Debt Charges)\n        description: \"Interest payments on the federal debt (fixed cost).\",\n        color: \"#667EEA\", // indigo-500\n      },\n    },\n\n    // Tax Expenditures / Tax Credits\n    taxExpenditures: {\n      personalTaxCredits: {\n        id: \"personalTaxCredits\",\n        name: getTranslatedName(\"personalIncomeTaxCredits\", \"spending\"),\n        baseAmount: 120, // $120B gross base\n        netAmount: 102, // $102B net (adjusted for interaction)\n        interactionFactor: 0.85, // 15% interaction adjustment\n        adjustmentFactor: 0, // Default neutral adjustment\n        minAdjustment: -100,\n        maxAdjustment: 100,\n        description:\n          \"Tax credits and deductions for individuals, including the basic personal amount and charitable donations.\",\n        linkedRevenueSource: \"personalIncomeTax\",\n        tooltip:\n          \"Reducing personal tax credits increases revenue; increasing credits reduces revenue.\",\n        color: \"#3182CE\", // blue-600\n      },\n      corporateTaxExpenditures: {\n        id: \"corporateTaxExpenditures\",\n        name: getTranslatedName(\"corporateTaxExpenditures\", \"spending\"),\n        baseAmount: 25, // $25B gross base\n        netAmount: 23.75, // $23.75B net (adjusted for interaction)\n        interactionFactor: 0.95, // 5% interaction adjustment\n        adjustmentFactor: 0,\n        minAdjustment: -100,\n        maxAdjustment: 100,\n        description:\n          \"Tax credits and deductions for businesses, including R&D credits and small business deductions.\",\n        linkedRevenueSource: \"corporateIncomeTax\",\n        tooltip:\n          \"Reducing corporate tax expenditures increases revenue; increasing them reduces revenue.\",\n        color: \"#2C7A7B\", // teal-700\n      },\n      gstExpenditures: {\n        id: \"gstExpenditures\",\n        name: getTranslatedName(\"gstHstExpenditures\", \"taxExpenditures\"),\n        baseAmount: 22, // $22B gross base\n        netAmount: 22, // $22B net (no interaction adjustment)\n        interactionFactor: 1,\n        adjustmentFactor: 0,\n        minAdjustment: -100,\n        maxAdjustment: 100,\n        description:\n          \"GST/HST exemptions and zero-rated items including basic groceries and prescription drugs.\",\n        linkedRevenueSource: \"gst\",\n        tooltip:\n          \"Reducing GST/HST expenditures increases revenue; increasing them reduces revenue.\",\n        color: \"#DD6B20\", // orange-700\n      },\n      taxDeferrals: {\n        id: \"taxDeferrals\",\n        name: getTranslatedName(\"deferralsRrspRppTfsa\", \"taxExpenditures\"),\n        baseAmount: 33, // $33B gross base\n        netAmount: 24, // $24B net (adjusted for long-term impact)\n        interactionFactor: 0.73,\n        adjustmentFactor: 0,\n        minAdjustment: -100,\n        maxAdjustment: 100,\n        description:\n          \"Tax-advantaged savings accounts including RRSPs, Registered Pension Plans, and TFSA.\",\n        linkedRevenueSource: \"personalIncomeTax\",\n        tooltip:\n          \"Reducing tax deferrals increases short-term revenue; increasing them reduces current revenue.\",\n        color: \"#805AD5\", // purple-600\n      },\n    },\n\n    // Budget goals and goal status\n    budgetGoals: {\n      enabled: true,\n      revenueTarget: 400, // Target revenue in billions\n      deficitTarget: 30, // Target deficit in billions\n    },\n    goalStatus: {\n      revenue: {\n        status: \"\",\n        icon: \"\",\n        text: \"\",\n        message: \"\",\n      },\n      deficit: {\n        status: \"\",\n        icon: \"\",\n        text: \"\",\n        message: \"\",\n      },\n    },\n\n    // Current fiscal year\n    currentYear: 2024,\n    \n    // Reactive trigger for spending updates\n    lastSpendingUpdate: Date.now(),\n    \n    // Reactive trigger for tax expenditure updates\n    lastTaxExpenditureUpdate: Date.now(),\n    \n    // Reactive trigger for revenue source updates\n    lastRevenueSourceUpdate: Date.now(),\n    \n    // Budget goals\n    lastUpdate: 0,\n\n    // Explicit state for expanded groups\n    expandedGroups: {\n      incomeTaxes: true,\n      consumptionTaxes: true,\n      otherRevenues: true,\n      mainCategories: true,\n      otherCategories: false,\n      governmentOperations: false,\n      taxExpenditures: true,\n    },\n    fiscalIndicators: {\n      gdp: 2500, // $2.5 trillion (2024 estimate)\n      debt: 1173, // $1.173 trillion (2024 estimate)\n    },\n\n    // Performance optimization - debounced calculation\n    _debouncedRecalculate: null,\n    _lastRecalculationTime: 0,\n\n    // Change tracking state\n    changeHistory: [],\n    changeHistoryVersion: 0,\n    maxChangeHistorySize: 50,\n  }),\n\n  getters: {\n    formattedFiscalYear() {\n      return `${this.currentYear - 1}-${this.currentYear}`;\n    },\n\n    availableFiscalYears() {\n      return Object.keys(this.revenueSources.personalIncomeTax.rateByYear)\n        .map((year) => parseInt(year))\n        .sort()\n        .map((year) => ({\n          value: year,\n          label: `${year - 1}-${year}`,\n        }));\n    },\n\n    currentDebt() {\n      // Add the current year's deficit (if any) to the base debt\n      const baseDebt = this.fiscalIndicators?.debt || 0;\n      const deficit = this.surplus < 0 ? Math.abs(this.surplus) : 0;\n      return baseDebt + deficit;\n    },\n\n    debtToGdpRatio() {\n      const gdp = this.fiscalIndicators?.gdp || 0;\n      const debt = this.currentDebt || 0;\n      return gdp && gdp > 0 ? (debt / gdp) * 100 : 0;\n    },\n\n    // Unified getter for all consumers (sentiment, badges, export, etc.)\n    budgetData() {\n      const cacheKey = `budgetData_${this.stateVersion}_${this.lastUpdate}_${this._cacheVersion}`;\n      \n      if (this._computedCache.has(cacheKey)) {\n        return this._computedCache.get(cacheKey);\n      }\n      \n      // Always return a valid structure\n      try {\n        const result = this.budgetDataForBadges;\n        this._computedCache.set(cacheKey, markRaw(result));\n        return result;\n      } catch (e) {\n        handleError(e, (msg) => budgetErrorMessage.value = msg);\n        // Fallback: return a minimal valid object if something goes wrong\n        // Include default revenue mix values to prevent fiscal chaos warnings\n        const fallback = {\n          totalRevenue: 0,\n          totalSpending: 0,\n          surplus: 0,\n          revenueMix: {\n            personalIncomeTax: this.revenueSources.personalIncomeTax?.rate ?? 21,\n            personalIncomeTaxAmount: this.revenueSources.personalIncomeTax?.adjustedAmount ?? 210,\n            \n            corporateIncomeTax: this.revenueSources.corporateIncomeTax?.rate ?? 15,\n            corporateIncomeTaxAmount: this.revenueSources.corporateIncomeTax?.adjustedAmount ?? 80,\n            \n            gst: this.revenueSources.gst?.rate ?? 5,\n            gstAmount: this.revenueSources.gst?.adjustedAmount ?? 50,\n            \n            carbonPricing: this.revenueSources.carbonPricing?.rate ?? 1,\n            carbonPricingAmount: this.revenueSources.carbonPricing?.adjustedAmount ?? 10,\n            \n            exciseTaxes: this.revenueSources.exciseTaxes?.rate ?? 2.5,\n            exciseTaxesAmount: this.revenueSources.exciseTaxes?.adjustedAmount ?? 25,\n            \n            eiPremiums: this.revenueSources.eiPremiums?.rate ?? 1.35,\n            eiPremiumsAmount: this.revenueSources.eiPremiums?.adjustedAmount ?? 13.5,\n            \n            customsDuties: this.revenueSources.customsDuties?.rate ?? 1,\n            customsDutiesAmount: this.revenueSources.customsDuties?.adjustedAmount ?? 10,\n            \n            crownProfits: this.revenueSources.crownProfits?.rate ?? 2.5,\n            crownProfitsAmount: this.revenueSources.crownProfits?.adjustedAmount ?? 25,\n            \n            nonTaxRevenue: this.revenueSources.nonTaxRevenue?.rate ?? 3,\n            nonTaxRevenueAmount: this.revenueSources.nonTaxRevenue?.adjustedAmount ?? 30,\n            \n            resourceRoyalties: this.revenueSources.resourceRoyalties?.rate ?? 1,\n            resourceRoyaltiesAmount: this.revenueSources.resourceRoyalties?.adjustedAmount ?? 10\n          },\n          taxExpenditures: {},\n          budgetItems: {}\n        };\n        this._computedCache.set(cacheKey, markRaw(fallback));\n        return fallback;\n      }  \n    },\n\n    baselineRevenue() {\n      const defaultRates = {\n        personalIncomeTax: 21,\n        corporateIncomeTax: 15,\n        gst: 5,\n        exciseTaxes: 2.5,\n        carbonPricing: 1,\n        eiPremiums: 1.35,\n        customsDuties: 1,\n        crownProfits: 2.5,\n        nonTaxRevenue: 3,\n        resourceRoyalties: 1,\n      };\n\n      return Object.entries(this.revenueSources).reduce(\n        (total, [id, source]) =>\n          total + source.base * (defaultRates[id] || source.rate),\n        0\n      );\n    },\n\n    additionalRevenue() {\n      return this.totalRevenue - this.baselineRevenue;\n    },\n\n    surplus() {\n      return this.totalRevenue - this.totalSpending;\n    },\n\n    // Category totals for revenue sources\n    incomeTaxTotal() {\n      // Personal Income Tax + Corporate Income Tax\n      const personalIncomeTax = Number(this.revenueSources.personalIncomeTax?.adjustedAmount) || 0;\n      const corporateIncomeTax = Number(this.revenueSources.corporateIncomeTax?.adjustedAmount) || 0;\n      return personalIncomeTax + corporateIncomeTax;\n    },\n    \n    consumptionTaxTotal() {\n      // GST/HST + Excise Taxes + Carbon Pricing + Customs Duties\n      const gst = Number(this.revenueSources.gst?.adjustedAmount) || 0;\n      const exciseTaxes = Number(this.revenueSources.exciseTaxes?.adjustedAmount) || 0;\n      const carbonPricing = Number(this.revenueSources.carbonPricing?.adjustedAmount) || 0;\n      const customsDuties = Number(this.revenueSources.customsDuties?.adjustedAmount) || 0;\n      return gst + exciseTaxes + carbonPricing + customsDuties;\n    },\n    \n    otherRevenueTotal() {\n      // EI Premiums + Crown Corporation Profits + Resource Royalties + Non-Tax Revenue\n      const eiPremiums = Number(this.revenueSources.eiPremiums?.adjustedAmount) || 0;\n      const crownProfits = Number(this.revenueSources.crownProfits?.adjustedAmount) || 0;\n      const resourceRoyalties = Number(this.revenueSources.resourceRoyalties?.adjustedAmount) || 0;\n      const nonTaxRevenue = Number(this.revenueSources.nonTaxRevenue?.adjustedAmount) || 0;\n      return eiPremiums + crownProfits + resourceRoyalties + nonTaxRevenue;\n    },\n    \n    totalRevenue() {\n      // Sum of all category totals\n      return this.incomeTaxTotal + this.consumptionTaxTotal + this.otherRevenueTotal;\n    },\n\n    mainCategoriesSpending() {\n      const mains = Object.values(this.spendingCategories).filter(\n        (cat) => !cat.isGroup\n      );\n      return mains.reduce(\n        (total, cat) => total + cat.baseAmount * cat.adjustmentFactor,\n        0\n      );\n    },\n\n    loansInvestmentsSpending() {\n      const children = this.spendingCategories.loansInvestments.children;\n      return Object.values(children).reduce(\n        (total, cat) => total + cat.baseAmount * cat.adjustmentFactor,\n        0\n      );\n    },\n\n    governmentOperationsSpending() {\n      const children = this.spendingCategories.governmentOperations.children;\n      return Object.values(children).reduce(\n        (total, cat) => total + cat.baseAmount * cat.adjustmentFactor,\n        0\n      );\n    },\n\n    otherCategoriesTotal() {\n      return this.loansInvestmentsSpending + this.governmentOperationsSpending;\n    },\n\n    totalSpending() {\n      return this.mainCategoriesSpending + this.otherCategoriesTotal + this.fixedCostsTotal;\n    },\n\n    fixedCostsTotal() {\n      return Object.values(this.fixedCosts).reduce(\n        (total, cost) => total + cost.amount,\n        0\n      );\n    },\n\n    debtServicing() {\n      return this.fixedCosts.debtServicing?.amount || 0;\n    },\n\n    revenueGoalStatus() {\n      if (!this.budgetGoals.enabled || !this.budgetGoals.targetRevenue) {\n        return null;\n      }\n      return this.goalStatus.revenue;\n    },\n\n    deficitGoalStatus() {\n      if (!this.budgetGoals.enabled || this.budgetGoals.targetDeficit === null) {\n        return null;\n      }\n      return this.goalStatus.deficit;\n    },\n\n    isGroupExpanded() {\n      return (groupId) => {\n        const group = Object.values(this.spendingCategories).find(\n          (cat) => cat.id === groupId\n        );\n        return group && group.isGroup ? group.isExpanded : false;\n      };\n    },\n\n    getGroupChildren() {\n      return (groupId) => {\n        const group = Object.values(this.spendingCategories).find(\n          (cat) => cat.id === groupId\n        );\n        return group && group.isGroup ? Object.values(group.children) : [];\n      };\n    },\n\n    getGroupTotal() {\n      return (groupId) => {\n        const children = this.getGroupChildren(groupId);\n        return children.reduce(\n          (total, child) => total + child.baseAmount * child.adjustmentFactor,\n          0\n        );\n      };\n    },\n\n    getGroupBaseTotal() {\n      return (groupId) => {\n        const children = this.getGroupChildren(groupId);\n        return children.reduce((total, child) => total + child.baseAmount, 0);\n      };\n    },\n\n    getGroupFactor() {\n      return (groupId) => {\n        const children = this.getGroupChildren(groupId);\n        if (children.length === 0) return 1;\n        const totalAmount = children.reduce((sum, child) => sum + child.baseAmount, 0);\n        const weightedFactor = children.reduce((sum, child) => sum + child.baseAmount * child.adjustmentFactor, 0);\n        return totalAmount > 0 ? weightedFactor / totalAmount : 1;\n      };\n    },\n\n    // Badge system getters\n    budgetDataForBadges() {\n      // Debug logging to identify mismatches (development only)\n      devLog('[KEY MAPPING] Store spending categories:', Object.keys(this.spendingCategories));\n      \n      // Prepare the budget data in the format expected by the badge engine\n      const budgetData = {\n        totalRevenue: this.totalRevenue,\n        totalSpending: this.totalSpending,\n        surplus: this.surplus,\n        debtServicing: this.debtServicing, // Add debt servicing as a separate field\n        // revenueMix: Sent to sentiment scoring and badge systems.\n        // Key mapping:\n        // - corporateTax is sourced from corporateIncomeTax in the store\n        // - gst represents GST/HST combined (no separate hst key)\n        // - All keys should match those expected by the sentiment scoring system\n        revenueMix: {\n          // Include both rate and amount for each revenue source\n          personalIncomeTax: this.revenueSources.personalIncomeTax?.rate ?? 21,\n          personalIncomeTaxAmount: this.revenueSources.personalIncomeTax?.adjustedAmount ?? 210,\n          \n          corporateIncomeTax: this.revenueSources.corporateIncomeTax?.rate ?? 15,\n          corporateIncomeTaxAmount: this.revenueSources.corporateIncomeTax?.adjustedAmount ?? 80,\n          \n          gst: this.revenueSources.gst?.rate ?? 5,\n          gstAmount: this.revenueSources.gst?.adjustedAmount ?? 50,\n          \n          hst: this.revenueSources.gst?.rate ?? 5, // If you ever separate HST, update here\n          hstAmount: this.revenueSources.gst?.adjustedAmount ?? 50,\n          \n          exciseTaxes: this.revenueSources.exciseTaxes?.rate ?? 2.5,\n          exciseTaxesAmount: this.revenueSources.exciseTaxes?.adjustedAmount ?? 25,\n          \n          carbonPricing: this.revenueSources.carbonPricing?.rate ?? 1,\n          carbonPricingAmount: this.revenueSources.carbonPricing?.adjustedAmount ?? 10,\n          \n          eiPremiums: this.revenueSources.eiPremiums?.rate ?? 1.35,\n          eiPremiumsAmount: this.revenueSources.eiPremiums?.adjustedAmount ?? 13.5,\n          \n          customsDuties: this.revenueSources.customsDuties?.rate ?? 1,\n          customsDutiesAmount: this.revenueSources.customsDuties?.adjustedAmount ?? 10,\n          \n          crownProfits: this.revenueSources.crownProfits?.rate ?? 2.5,\n          crownProfitsAmount: this.revenueSources.crownProfits?.adjustedAmount ?? 25,\n          \n          nonTaxRevenue: this.revenueSources.nonTaxRevenue?.rate ?? 3,\n          nonTaxRevenueAmount: this.revenueSources.nonTaxRevenue?.adjustedAmount ?? 30,\n          \n          resourceRoyalties: this.revenueSources.resourceRoyalties?.rate ?? 1,\n          resourceRoyaltiesAmount: this.revenueSources.resourceRoyalties?.adjustedAmount ?? 10\n        },\n        taxExpenditures: {\n          // Correct key mapping - match the expected badge keys to internal store keys\n          personalIncomeTaxCredits: this.taxExpenditures.personalTaxCredits || { adjustmentPercent: 0 },\n          corporateTaxExpenditures: this.taxExpenditures.corporateTaxExpenditures || { adjustmentPercent: 0 },\n          gstExpenditures: this.taxExpenditures.gstExpenditures || { adjustmentPercent: 0 },\n          deferrals: this.taxExpenditures.taxDeferrals || { adjustmentPercent: 0 }\n        },\n        budgetItems: {\n          // Main spending categories with corrected mappings\n          healthcare: this.spendingCategories.healthcare?.adjustedAmount ?? 0,\n          education: this.spendingCategories.education?.adjustedAmount ?? 0,\n          \n          // Fixed key mappings for mismatched categories\n          childrenAndFamilies: this.spendingCategories.childrenFamilies?.adjustedAmount ?? 0,\n          supportForSeniors: this.spendingCategories.seniors?.adjustedAmount ?? 0,\n          \n          indigenousServices: this.spendingCategories.indigenousServices?.adjustedAmount ?? 0,\n          defense: this.spendingCategories.defense?.adjustedAmount ?? 0,\n          \n          // Other spending categories  standardized keys\n          scienceAndInnovation: this.spendingCategories.scienceAndInnovation?.adjustedAmount ?? 0,\n          infrastructure: this.spendingCategories.infrastructure?.adjustedAmount ?? 0,\n          digitalGovernment: this.spendingCategories.digitalGovernment?.adjustedAmount ?? 0,\n          environmentAndClimateChange: this.spendingCategories.environmentAndClimateChange?.adjustedAmount ?? 0,\n          carbonPricing: this.spendingCategories.carbonPricing?.adjustedAmount ?? 0,\n          agriculture: this.spendingCategories.agriculture?.adjustedAmount ?? 0,\n          internationalDevelopment: this.spendingCategories.internationalDevelopment?.adjustedAmount ?? 0,\n          culturalPrograms: this.spendingCategories.culturalPrograms?.adjustedAmount ?? 0,\n          transit: this.spendingCategories.transit?.adjustedAmount ?? 0,\n          economicDevelopment: this.spendingCategories.economicDevelopment?.adjustedAmount ?? 0,\n          indigenousOperations: this.spendingCategories.indigenousOperations?.adjustedAmount ?? 0,\n          diplomaticRepresentation: this.spendingCategories.diplomaticRepresentation?.adjustedAmount ?? 0\n        }\n      };\n      \n      // Debug log the mapped data (development only)\n      devLog('[KEY MAPPING] Mapped budget data for badges:', {\n        revenueKeyCount: Object.keys(budgetData.revenueMix).length,\n        expenditureKeyCount: Object.keys(budgetData.taxExpenditures).length,\n        spendingCategoryKeyCount: Object.keys(budgetData.budgetItems).length\n      });\n      \n      return budgetData;\n    },\n\n    earnedBadges() {\n      return this.badges;\n    },\n\n    // Optimized revenue sources with shallow reactivity\n    optimizedRevenueSources() {\n      if (!this._reactiveUpdates) {\n        return markRaw(this.revenueSources);\n      }\n      return this.revenueSources;\n    },\n  },\n\n  actions: {\n    setSentimentUpdateRequired(val = true) {\n      this.sentimentUpdateRequired = val;\n    },\n    clearSentimentDirty() {\n      this.sentimentUpdateRequired = false;\n    },\n    triggerSentimentUpdate() {\n      // Update the lastSentimentUpdate timestamp to force reactivity\n      this.lastSentimentUpdate = Date.now();\n      console.log('[STORE] Triggered sentiment update:', this.lastSentimentUpdate);\n    },\n    beginBatchUpdate() {\n      if (this.isBatchUpdateInProgress) {\n        console.warn('[STORE] Batch update already in progress');\n        return false;\n      }\n      \n      this._batchUpdateDepth++;\n      this.isBatchUpdateInProgress = true;\n      this._reactiveUpdates = false; // Disable reactive updates during batch\n      this._pendingUpdates.clear();\n      \n      console.log('[STORE] Beginning batch update');\n      // Disable sentiment updates during batch operations\n      this.setSentimentUpdateRequired(false);\n      return true;\n    },\n    completeBatchUpdate() {\n      if (!this.isBatchUpdateInProgress) {\n        console.warn('[STORE] No batch update in progress');\n        return false;\n      }\n      \n      this._batchUpdateDepth--;\n      \n      if (this._batchUpdateDepth === 0) {\n        console.log('[STORE] Completing batch update');\n        \n        // Perform all recalculations once\n        this.recalculateTotals();\n        \n        // Clear cache to force recomputation\n        this._computedCache.clear();\n        this._cacheVersion++;\n        \n        // Update state version to trigger reactivity\n        this.stateVersion++;\n        console.log(`[STORE] State version updated to ${this.stateVersion}`);\n        \n        // Re-enable reactive updates\n        this._reactiveUpdates = true;\n        \n        // Enable sentiment updates and trigger a calculation\n        this.setSentimentUpdateRequired(true);\n        this.triggerSentimentUpdate();\n        \n        // Sync to localStorage to ensure UI components can refresh\n        this.syncToLocalStorage();\n        \n        this.isBatchUpdateInProgress = false;\n      }\n      \n      return true;\n    },\n    initializeStore() {\n      // Initialize with default values if not already loaded\n      if (!this.loadFromLocalStorage()) {\n        // Initialize revenue sources immutably\n        const initialRevenueSources = {};\n        for (const sourceId in this.revenueSources) {\n          const source = this.revenueSources[sourceId];\n          initialRevenueSources[sourceId] = {\n            ...source,\n            amount: source.base * source.rate,\n            adjustedAmount: source.base * source.rate,\n            expenditureImpact: 0\n          };\n        }\n        this.revenueSources = initialRevenueSources;\n\n        // Initialize tax expenditures immutably\n        const initialExpenditures = {};\n        for (const expId in this.taxExpenditures) {\n          const exp = this.taxExpenditures[expId];\n          initialExpenditures[expId] = {\n            ...exp,\n            adjustment: exp.baseAdjustment || 0,\n            revenueImpact: 0\n          };\n        }\n        this.taxExpenditures = initialExpenditures;\n\n        // Update all revenue sources to account for tax expenditure impacts\n        for (const sourceId in this.revenueSources) {\n          this.updateRevenueSourceAdjustedAmount(sourceId);\n        }\n\n        // Save initial state\n        this.syncToLocalStorage();\n      }\n\n      // Initialize change history\n      this.changeHistory = [];\n      this.changeHistoryVersion = 0;\n\n      // Signal initialization complete\n      this.lastUpdate = Date.now();\n\n      // Create debounced recalculation function\n      this._debouncedRecalculate = debounce(() => {\n        this._performRecalculation();\n      }, 150); // 150ms delay for smooth UX\n    },\n    \n    // Load budget data from localStorage\n    loadFromLocalStorage() {\n      try {\n        const storedData = localStorage.getItem(\"budgetSimulator\");\n        if (storedData) {\n          // Optionally, parse and restore any desired parts of the state:\n          const parsedData = JSON.parse(storedData);\n          this.activePreset = parsedData.activePreset || null;\n          \n          // Restore fixed costs if they exist in storage\n          if (parsedData.fixedCosts) {\n            this.fixedCosts = { ...this.fixedCosts, ...parsedData.fixedCosts };\n          }\n          \n          // If you want to restore other properties, you can set them here:\n          // e.g., this.badges = parsedData.badges || [];\n          console.log(\"Loaded budget from localStorage:\", parsedData);\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error(\"Error loading budget from localStorage:\", error);\n        return false;\n      }\n    },\n  \n    setCurrentYear(year) {\n      // Update revenue sources immutably with year-specific rates\n      const updatedSources = {};\n      for (const sourceId in this.revenueSources) {\n        const source = this.revenueSources[sourceId];\n        if (source.rateByYear && source.rateByYear[year] !== undefined) {\n          updatedSources[sourceId] = {\n            ...source,\n            rate: source.rateByYear[year],\n            amount: source.base * source.rateByYear[year],\n            adjustedAmount: source.base * source.rateByYear[year]\n          };\n        } else {\n          updatedSources[sourceId] = source;\n        }\n      }\n\n      // Update state immutably\n      this.currentYear = year;\n      this.revenueSources = updatedSources;\n\n      // Update adjusted amounts for all sources\n      for (const sourceId in this.revenueSources) {\n        this.updateRevenueSourceAdjustedAmount(sourceId);\n      }\n\n      // Signal update\n      this.lastUpdate = Date.now();\n    },\n\n    toggleGroupExpansion(groupId) {\n      const group = Object.values(this.spendingCategories).find(\n        (cat) => cat.id === groupId\n      );\n      if (group && group.isGroup) {\n        group.isExpanded = !group.isExpanded;\n      }\n      // Update explicit expandedGroups state as needed\n      this.expandedGroups = { ...this.expandedGroups, [groupId]: group ? group.isExpanded : false };\n    },\n\n    /**\n     * Canonical method for updating revenue source rates with proper reactivity\n     * @param {string} sourceId - The ID of the revenue source to update\n     * @param {number} newRate - The new rate to set\n     * @returns {boolean} - Success flag\n     */\n    setRevenueRate(sourceId, newRate) {\n      const source = this.revenueSources[sourceId];\n      if (!source) {\n        devWarn(`Revenue source not found: ${sourceId}`);\n        return false;\n      }\n      \n      // Clamp the rate to valid range if min/max are defined\n      let clampedRate = newRate;\n      if (source.minRate !== undefined) {\n        clampedRate = Math.max(source.minRate, clampedRate);\n      }\n      if (source.maxRate !== undefined) {\n        clampedRate = Math.min(source.maxRate, clampedRate);\n      }\n      \n      // Skip update if rate hasn't actually changed (lowered threshold for better tracking)\n      if (Math.abs(source.rate - clampedRate) < 0.001) {\n        console.log('%c[CHANGE DEBUG] Rate change too small, skipping:', 'background: #f39c12; color: white; padding: 2px 5px;', {\n          sourceId,\n          oldRate: source.rate,\n          newRate: clampedRate,\n          diff: Math.abs(source.rate - clampedRate),\n          threshold: 0.001\n        });\n        return true;\n      }\n      \n      console.log('%c[CHANGE DEBUG] setRevenueRate processing:', 'background: #27ae60; color: white; padding: 2px 5px;', {\n        sourceId,\n        oldRate: source.rate,\n        newRate: clampedRate,\n        diff: Math.abs(source.rate - clampedRate),\n        isBatchMode: this.isBatchUpdateInProgress\n      });\n      \n      // Track the change before updating\n      const oldRate = source.rate;\n      \n      // Create a shallow copy of the source for reactive updates\n      const updatedSource = { ...source };\n      \n      // Update the rate and recalculate the amount\n      updatedSource.rate = clampedRate;\n      updatedSource.amount = updatedSource.base * updatedSource.rate;\n      \n      // Special logging for carbon tax to help diagnose issues\n      if (sourceId === 'carbonPricing') {\n        devLog(`[CARBON TAX] Updating rate from ${source.rate} to ${clampedRate}, batch mode: ${this.isBatchUpdateInProgress}`);\n      } else {\n        devLog(`Updating revenue source ${sourceId} rate from ${source.rate} to ${clampedRate}`);\n      }\n      \n      // Update the rate history for the current year\n      if (updatedSource.rateByYear) {\n        updatedSource.rateByYear = { ...updatedSource.rateByYear };\n        updatedSource.rateByYear[this.currentYear] = clampedRate;\n      }\n      \n      // Update the revenue source reactively\n      this.revenueSources = {\n        ...this.revenueSources,\n        [sourceId]: updatedSource\n      };\n      \n      // Update the adjusted amount (accounting for tax expenditure impacts)\n      this.updateRevenueSourceAdjustedAmount(sourceId);\n      \n      // Track the change after successful update\n      this.trackRevenueChange(sourceId, oldRate, clampedRate);\n      \n      // Only perform additional updates if not in batch mode\n      if (!this.isBatchUpdateInProgress) {\n        // Use debounced recalculation for better performance\n        this.recalculateTotals();\n        \n        // Update the reactive triggers to force component updates\n        this.lastRevenueSourceUpdate = Date.now();\n        this.lastUpdate = Date.now();\n        \n        // Signal that sentiment update is needed\n        this.setSentimentUpdateRequired(true);\n        \n        // Debounced sync to localStorage\n        this.debouncedSyncToLocalStorage();\n        \n        devLog(`Updated revenue source ${sourceId} rate to ${clampedRate}%, amount: ${this.revenueSources[sourceId].amount.toFixed(2)}B, adjusted: ${this.revenueSources[sourceId].adjustedAmount?.toFixed(2)}B`);\n      }\n      \n      return true;\n    },\n    \n    /**\n     * Legacy method for backward compatibility - delegates to setRevenueRate\n     * @deprecated Use setRevenueRate instead\n     */\n    updateRevenueRate(sourceId, newRate) {\n      const currentRate = this.revenueSources[sourceId]?.rate;\n      \n      // Only update if value actually changed\n      if (currentRate === newRate) {\n        return true;\n      }\n      \n      if (this.isBatchUpdateInProgress) {\n        this._pendingUpdates.add(`revenue_${sourceId}`);\n      }\n      \n      this.isUpdating = true;\n      try {\n        const result = this.setRevenueRate(sourceId, newRate);\n        \n        // Auto-save state after successful update\n        this.debouncedSyncToLocalStorage();\n        \n        return result;\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n\n    // Debounced update method for frequent changes\n    debouncedUpdateRevenueRate: debounce(function(sourceId, newRate) {\n      this.updateRevenueRate(sourceId, newRate);\n    }, 100),\n\n    // Clear cache when needed\n    clearCache() {\n      this._computedCache.clear();\n      this._cacheVersion++;\n    },\n\n    recalculateTotals() {\n      // Use debounced version unless we're in batch mode or this is urgent\n      if (!this.isBatchUpdateInProgress && this._debouncedRecalculate) {\n        this._debouncedRecalculate();\n      } else {\n        // Immediate calculation for batch operations or urgent updates\n        this._performRecalculation();\n      }\n    },\n\n    updateSpendingFactor(categoryId, factor) {\n      let found = false;\n      let oldFactor = 1;\n      \n      // Find the category and get old factor\n      Object.values(this.spendingCategories).forEach((cat) => {\n        if (cat.id === categoryId && !cat.isGroup) {\n          oldFactor = cat.adjustmentFactor;\n          found = true;\n          cat.adjustmentFactor = factor;\n        }\n      });\n      // Update in group children if not found\n      if (!found) {\n        Object.values(this.spendingCategories)\n          .filter((cat) => cat.isGroup && cat.children)\n          .forEach((group) => {\n            const child = Object.values(group.children).find((c) => c.id === categoryId);\n            if (child) {\n              oldFactor = child.adjustmentFactor;\n              found = true;\n              child.adjustmentFactor = factor;\n            }\n          });\n      }\n      \n      // Skip if category not found or no actual change\n      if (!found) {\n        console.warn('[STORE] updateSpendingFactor: category not found, skipping tracking:', categoryId);\n        return;\n      }\n      if (Math.abs((oldFactor || 0) - (factor || 0)) < 1e-4) {\n        devLog(`[Spending] No-op change for ${categoryId}; old=${oldFactor}, new=${factor}`);\n        return;\n      }\n      \n      // Track the change\n      this.trackSpendingChange(categoryId, oldFactor, factor);\n      \n      // Only update timestamps if not in batch mode\n      if (!this.isBatchUpdateInProgress) {\n        this.lastUpdate = Date.now();\n        // Signal that sentiment update is needed\n        this.setSentimentUpdateRequired(true);\n        \n        // Use debounced recalculation for spending changes too\n        this.recalculateTotals();\n      }\n    },\n\n    updateGroupSpendingFactor(groupId, factor) {\n      const group = Object.values(this.spendingCategories).find(\n        (cat) => cat.id === groupId\n      );\n      if (group && group.isGroup && group.children) {\n        Object.values(group.children).forEach((child) => {\n          child.adjustmentFactor = factor;\n        });\n        // Only update timestamps if not in batch mode\n        if (!this.isBatchUpdateInProgress) {\n          this.lastUpdate = Date.now();\n          // Signal that sentiment update is needed\n          this.setSentimentUpdateRequired(true);\n          \n          // Use debounced recalculation for group spending changes too\n          this.recalculateTotals();\n        }\n      }\n    },\n\n    updateBudgetGoals(goals) {\n      if (goals.enabled !== undefined) this.budgetGoals.enabled = goals.enabled;\n      if (goals.revenueTarget !== undefined)\n        this.budgetGoals.revenueTarget = goals.revenueTarget;\n      if (goals.deficitTarget !== undefined)\n        this.budgetGoals.deficitTarget = goals.deficitTarget;\n    },\n\n    updateGoalStatus(statusData = {}) {\n      const revenueGoal = this.budgetGoals.revenueTarget || 0;\n      const currentRevenue = this.totalRevenue || 0;\n      const revenueStatus =\n        revenueGoal > 0 ? (currentRevenue / revenueGoal) * 100 : 100;\n\n      const deficitGoal = this.budgetGoals.deficitTarget || 0;\n      const currentDeficit = this.surplus < 0 ? Math.abs(this.surplus) : 0;\n      const deficitStatus =\n        deficitGoal > 0\n          ? currentDeficit <= deficitGoal\n            ? 100\n            : (deficitGoal / currentDeficit) * 100\n          : currentDeficit === 0\n          ? 100\n          : 0;\n\n      this.goalStatus = {\n        revenue: statusData.revenue || revenueStatus,\n        deficit: statusData.deficit || deficitStatus,\n      };\n    },\n\n    autoBalanceBudget() {\n      // Prevent recursive calls\n      if (this._isRecalculating) {\n        console.log('Avoiding recursive auto-balance call');\n        return;\n      }\n      \n      try {\n        this._isRecalculating = true;\n        \n        // Calculate the current deficit\n        const currentDeficit = this.totalSpending - this.totalRevenue;\n        \n        // If there's no deficit or a surplus, no need to balance\n        if (currentDeficit <= 0) {\n          console.log('Budget already balanced or in surplus');\n          return;\n        }\n        \n        console.log(`Attempting to balance budget. Current deficit: $${currentDeficit.toFixed(1)}B`);\n        \n        // Define priority order for revenue sources to adjust\n        const prioritySourceIds = [\n          'personalIncomeTax',  // First choice: adjust personal income tax\n          'corporateIncomeTax', // Second choice: adjust corporate income tax\n          'gst',                // Third choice: adjust GST\n          'carbonPricing',      // Fourth choice: adjust carbon pricing\n          'exciseTaxes',        // Fifth choice: adjust excise taxes\n          'customsDuties',      // Sixth choice: adjust customs duties\n          'resourceRoyalties',  // Seventh choice: adjust resource royalties\n          'nonTaxRevenue'       // Eighth choice: adjust non-tax revenue\n        ];\n        \n        // Filter to get only available and adjustable revenue sources\n        const adjustableSources = prioritySourceIds\n          .map(id => ({\n            id,\n            ...this.revenueSources[id]\n          }))\n          .filter(source => source && source.base > 0 && source.rate < (source.maxRate || 100));\n        \n        if (adjustableSources.length === 0) {\n          console.log('No adjustable revenue sources found');\n          return;\n        }\n        \n        // Calculate how much deficit remains to be covered\n        let remainingDeficit = currentDeficit;\n        let adjustedSources = [];\n        \n        // First try to adjust one major source if it can cover most of the deficit\n        for (const source of adjustableSources) {\n          // Calculate how much additional revenue this source can generate\n          const currentRevenue = source.amount;\n          const maxPossibleRevenue = source.base * (source.maxRate || 100);\n          const additionalRevenuePotential = maxPossibleRevenue - currentRevenue;\n          \n          // If this source alone can cover at least 70% of the deficit, use it\n          if (additionalRevenuePotential >= remainingDeficit * 0.7) {\n            // Calculate the new rate needed to cover the deficit\n            const rateIncrease = remainingDeficit / source.base;\n            const newRate = Math.min(source.rate + rateIncrease, source.maxRate || 100);\n            \n            console.log(`Adjusting ${source.name} rate from ${source.rate.toFixed(1)}% to ${newRate.toFixed(1)}%`);\n            \n            // Update the revenue source rate\n            this.setRevenueRate(source.id, newRate);\n            adjustedSources.push(source.name);\n            \n            // The deficit is now covered\n            remainingDeficit = 0;\n            break;\n          }\n        }\n        \n        // If we still have a deficit, adjust multiple sources\n        if (remainingDeficit > 0) {\n          // Sort sources by their potential to generate additional revenue\n          adjustableSources.sort((a, b) => {\n            const aPotential = a.base * ((a.maxRate || 100) - a.rate);\n            const bPotential = b.base * ((b.maxRate || 100) - b.rate);\n            return bPotential - aPotential; // Sort in descending order\n          });\n          \n          // Adjust sources one by one until the deficit is covered\n          for (const source of adjustableSources) {\n            // Skip sources we've already adjusted\n            if (adjustedSources.includes(source.name)) continue;\n            \n            // Calculate how much additional revenue this source can generate\n            const currentRevenue = source.amount;\n            const maxPossibleRevenue = source.base * (source.maxRate || 100);\n            const additionalRevenuePotential = maxPossibleRevenue - currentRevenue;\n            \n            // If this source can help reduce the deficit\n            if (additionalRevenuePotential > 0) {\n              // Determine how much of the remaining deficit this source should cover\n              const deficitToCover = Math.min(remainingDeficit, additionalRevenuePotential);\n              \n              // Calculate the new rate needed\n              const rateIncrease = deficitToCover / source.base;\n              const newRate = Math.min(source.rate + rateIncrease, source.maxRate || 100);\n              \n              console.log(`Adjusting ${source.name} rate from ${source.rate.toFixed(1)}% to ${newRate.toFixed(1)}%`);\n              \n              // Update the revenue source rate\n              this.setRevenueRate(source.id, newRate);\n              adjustedSources.push(source.name);\n              \n              // Update the remaining deficit\n              remainingDeficit -= deficitToCover;\n              \n              // If we've covered the deficit, we can stop\n              if (remainingDeficit <= 0.1) break;\n            }\n          }\n        }\n        \n        // Signal update\n        this.lastUpdate = Date.now();\n        \n        if (adjustedSources.length > 0) {\n          console.log(`Budget auto-balanced by adjusting ${adjustedSources.length} revenue source(s): ${adjustedSources.join(', ')}`);\n          // Track auto-balance activity\n          this.trackAutoBalance();\n        } else {\n          console.log('Could not auto-balance the budget with available revenue sources');\n        }\n      } catch (e) {\n        console.error('Error in autoBalanceBudget:', e);\n      } finally {\n        // Reset the reentrancy guard\n        this._isRecalculating = false;\n      }\n    },\n\n    toggleAutoBalance(active) {\n      // Update the store state\n      this.autoBalanceActive = active;\n\n      // Diagnostic logging\n      console.log('[AutoBalance] toggleAutoBalance called with:', {\n        active,\n        goalsEnabled: this.budgetGoals.enabled,\n        targetDeficit: this.budgetGoals.targetDeficit\n      });\n\n      // Make sure budget goals are enabled when auto-balance is activated\n      if (active && !this.budgetGoals.enabled) {\n        this.budgetGoals.enabled = true;\n      }\n\n      // If auto-balance is now enabled, balance the budget\n      if (this.autoBalanceActive) {\n        // If goals are enabled but targetDeficit is null/undefined, default to zero\n        if (this.budgetGoals.enabled && (this.budgetGoals.targetDeficit === null || this.budgetGoals.targetDeficit === undefined)) {\n          console.log('[AutoBalance] budgetGoals.targetDeficit was not set; defaulting to 0');\n          this.budgetGoals.targetDeficit = 0;\n        }\n        if (this.budgetGoals.enabled && this.budgetGoals.targetDeficit !== null && this.budgetGoals.targetDeficit !== undefined) {\n          console.log(\"[AutoBalance] Using goal-based auto-balance (target deficit mode)\");\n          const feedback = this.autoBalanceBudgetForGoal();\n          if (feedback && feedback.message) {\n            console.log(`[AutoBalance] Result: ${feedback.message}`);\n          }\n        } else {\n          console.log(\"[AutoBalance] Using standard auto-balance (no target deficit)\");\n          this.autoBalanceBudget();\n        }\n      }\n    },\n\n    toggleSimpleAutoBalance(active) {\n      // Update the simple auto-balance state\n      this.simpleAutoBalanceActive = active;\n\n      // Diagnostic logging\n      console.log('[SimpleAutoBalance] toggleSimpleAutoBalance called with:', {\n        active,\n        currentDeficit: this.totalSpending - this.totalRevenue,\n        totalRevenue: this.totalRevenue,\n        totalSpending: this.totalSpending\n      });\n\n      // If simple auto-balance is now enabled, balance the budget immediately\n      if (this.simpleAutoBalanceActive) {\n        console.log(\"[SimpleAutoBalance] Using direct auto-balance (no goals)\");\n        console.log(`[SimpleAutoBalance] Current state: Revenue=${this.totalRevenue}B, Spending=${this.totalSpending}B, Deficit=${this.totalSpending - this.totalRevenue}B`);\n        this.autoBalanceBudget();\n      }\n    },\n\n    /**\n     * Auto-balance the budget to meet a specific deficit goal\n     * @returns {Object} Feedback object with success flag and message\n     */\n    autoBalanceBudgetForGoal() {\n      const feedback = {\n        success: false,\n        message: '',\n        achieved: false,\n        deficitGap: 0,\n        revenueGap: 0\n      };\n      \n      try {\n        this.beginBatchUpdate();\n        \n        // Ensure budget goals are enabled\n        this.budgetGoals.enabled = true;\n        \n        // Set default target deficit if not set\n        if (this.budgetGoals.targetDeficit === null || this.budgetGoals.targetDeficit === undefined) {\n          this.budgetGoals.targetDeficit = 0;\n        }\n        \n        // Calculate revenue adjustment needed\n        let revenueAdjustmentNeeded = 0;\n        if (this.budgetGoals.targetRevenue !== null && this.budgetGoals.targetRevenue !== undefined) {\n          revenueAdjustmentNeeded = this.budgetGoals.targetRevenue - this.totalRevenue;\n          feedback.revenueGap = Math.abs(revenueAdjustmentNeeded);\n        }\n        \n        // Calculate deficit adjustment needed\n        const targetDeficit = this.budgetGoals.targetDeficit;\n        const currentDeficit = this.totalSpending - this.totalRevenue;\n        const deficitAdjustmentNeeded = currentDeficit - targetDeficit;\n        feedback.deficitGap = Math.abs(deficitAdjustmentNeeded);\n        \n        // If we have both targets, prioritize revenue target\n        const adjustmentNeeded = this.budgetGoals.targetRevenue !== null ? \n          revenueAdjustmentNeeded : deficitAdjustmentNeeded;\n        \n        devLog(`Need to adjust revenue by $${adjustmentNeeded.toFixed(1)}B to reach target`);\n        \n        // If we're already close enough, don't adjust\n        if (Math.abs(adjustmentNeeded) < 0.1) {\n          devLog('Already at target, no adjustment needed');\n          feedback.success = true;\n          feedback.achieved = true;\n          feedback.message = 'Already at target';\n          return feedback;\n        }\n        \n        // Define the main revenue sources eligible for adjustment\n        const mainRevenueSources = [\n          'personalIncomeTax',\n          'corporateIncomeTax',\n          'gst',\n          'exciseTaxes',\n          'carbonPricing',\n          'eiPremiums',\n          'customsDuties'\n        ];\n        \n        // Filter to those that exist and have a valid base value\n        const adjustableSources = mainRevenueSources\n          .map(id => ({\n            id,\n            ...this.revenueSources[id]\n          }))\n          .filter(source => source && source.base > 0);\n        \n        if (adjustableSources.length === 0) {\n          feedback.success = false;\n          feedback.message = 'No adjustable revenue sources found';\n          return feedback;\n        }\n        \n        // Use the adjustRevenueProportionally helper method\n        const result = this.adjustRevenueProportionally(adjustmentNeeded, adjustableSources);\n        \n        if (!result.success) {\n          feedback.success = false;\n          feedback.message = result.message || 'Failed to adjust revenue sources';\n          return feedback;\n        }\n        \n        // Check if we achieved the target\n        const finalRevenue = this.totalRevenue;\n        const finalDeficit = this.totalSpending - finalRevenue;\n        \n        // Check revenue target achievement\n        if (this.budgetGoals.targetRevenue !== null) {\n          const revenueGap = Math.abs(finalRevenue - this.budgetGoals.targetRevenue);\n          const revenueThreshold = this.budgetGoals.targetRevenue * 0.05; // 5% threshold\n          feedback.achieved = revenueGap <= revenueThreshold;\n          \n          if (!feedback.achieved) {\n            feedback.success = false;\n            feedback.message = `Auto-balance could not reach the revenue target (off by $${revenueGap.toFixed(2)}B). Some sliders may be at their min/max bounds.`;\n            devWarn(`[AutoBalance] Could not reach revenue target. Gap: $${revenueGap.toFixed(2)}B`);\n          } else {\n            feedback.success = true;\n            feedback.message = 'Auto-balance succeeded in reaching revenue target.';\n          }\n        } else {\n          // Check deficit target achievement\n          const deficitGap = Math.abs(finalDeficit - targetDeficit);\n          const thresholdAchieved = 0.5; // $0.5B threshold for considering goal achieved\n          feedback.achieved = deficitGap <= thresholdAchieved;\n          \n          if (!feedback.achieved) {\n            feedback.success = false;\n            feedback.message = `Auto-balance could not reach the deficit target (off by $${deficitGap.toFixed(2)}B). Some sliders may be at their min/max bounds.`;\n            devWarn(`[AutoBalance] Could not reach deficit target. Gap: $${deficitGap.toFixed(2)}B`);\n          } else {\n            feedback.success = true;\n            feedback.message = 'Auto-balance succeeded in reaching deficit target.';\n          }\n        }\n        \n        return feedback;\n      } catch (err) {\n        feedback.success = false;\n        feedback.message = `Error in autoBalanceBudgetForGoal: ${err.message || err}`;\n        console.error(feedback.message);\n        return feedback;\n      } finally {\n        this.completeBatchUpdate();\n      }\n    },\n\n    /**\n     * Helper method to adjust revenue sources proportionally to meet a target adjustment amount\n     * @param {number} totalAdjustment - Dollar amount to adjust (positive = increase, negative = decrease)\n     * @param {Array} adjustableSources - Array of revenue sources that can be adjusted\n     * @returns {Object} - Result with success flag and details of changes\n     */\n    adjustRevenueProportionally(totalAdjustment, adjustableSources) {\n      // Skip if adjustment is negligible\n      if (Math.abs(totalAdjustment) < 1e-2) {\n        return { success: true, changes: {}, message: 'No adjustment needed' };\n      }\n      \n      // Prepare result object\n      const result = {\n        success: true,\n        changes: {},\n        actualAdjustment: 0,\n        message: ''\n      };\n      \n      // Validate inputs\n      if (!Array.isArray(adjustableSources) || adjustableSources.length === 0) {\n        return {\n          success: false,\n          changes: {},\n          message: 'No adjustable revenue sources available'\n        };\n      }\n      \n      try {\n        // Step 1: Prioritize PIT if configured to do so\n        let remainingAdjustment = totalAdjustment;\n        if (this.autoBalanceConfig.prioritizePIT) {\n          const pitSource = adjustableSources.find(item => item.id === 'personalIncomeTax');\n          if (pitSource) {\n            const oldRate = pitSource.rate;\n            const pitBase = pitSource.base;\n            const pitMax = pitSource.maxRate !== undefined ? pitSource.maxRate : 100;\n            const pitMin = pitSource.minRate !== undefined ? pitSource.minRate : 0;\n            \n            // Allocate 50% of the total adjustment to PIT\n            const targetPitAdjustment = totalAdjustment * 0.5;\n            let rateChange = targetPitAdjustment / pitBase;\n            let newRate = Math.min(Math.max(oldRate + rateChange, pitMin), pitMax);\n            \n            // Calculate actual change after clamping\n            rateChange = newRate - oldRate;\n            const actualPitAdjustment = rateChange * pitBase;\n            \n            // Store the change\n            result.changes[pitSource.id] = {\n              oldRate,\n              newRate,\n              amountChange: actualPitAdjustment\n            };\n            \n            // Update remaining adjustment needed\n            remainingAdjustment -= actualPitAdjustment;\n            result.actualAdjustment += actualPitAdjustment;\n            \n            // Apply the change\n            this.setRevenueRate(pitSource.id, newRate);\n            \n            devLog(`[AutoBalance] PIT: ${oldRate.toFixed(3)}  ${newRate.toFixed(3)} | $${actualPitAdjustment.toFixed(2)}B`);\n          }\n        }\n\n        // Step 2: Distribute remaining adjustment to other sources proportionally\n        if (Math.abs(remainingAdjustment) > 1e-2) {\n          // Filter sources, excluding PIT if we already adjusted it\n          const otherSources = this.autoBalanceConfig.prioritizePIT\n            ? adjustableSources.filter(item => item.id !== 'personalIncomeTax')\n            : adjustableSources;\n          \n          if (otherSources.length === 0) {\n            devLog('[AutoBalance] No other adjustable sources found for remaining adjustment');\n          } else {\n            // Calculate total base for proportional distribution\n            const totalBase = otherSources.reduce((sum, item) => sum + item.base, 0);\n            \n            if (totalBase <= 0) {\n              devLog('[AutoBalance] Warning: Total base for remaining sources is zero or negative');\n            } else {\n              // Calculate and apply changes for each source\n              otherSources.forEach(item => {\n                const oldRate = item.rate;\n                const base = item.base;\n                const maxRate = item.maxRate !== undefined ? item.maxRate : 100;\n                const minRate = item.minRate !== undefined ? item.minRate : 0;\n                \n                // Calculate proportional adjustment based on this source's share of the total base\n                const share = base / totalBase;\n                let targetAdjustment = remainingAdjustment * share;\n                let rateChange = targetAdjustment / base;\n                let newRate = Math.min(Math.max(oldRate + rateChange, minRate), maxRate);\n                \n                // Calculate actual adjustment after clamping\n                rateChange = newRate - oldRate;\n                const actualAdjustment = rateChange * base;\n                \n                // Store the change\n                result.changes[item.id] = {\n                  oldRate,\n                  newRate,\n                  amountChange: actualAdjustment\n                };\n                \n                result.actualAdjustment += actualAdjustment;\n                \n                // Apply the change\n                this.setRevenueRate(item.id, newRate);\n                \n                devLog(`[AutoBalance] ${item.name || item.id}: ${oldRate.toFixed(3)}  ${newRate.toFixed(3)} | $${actualAdjustment.toFixed(2)}B`);\n              });\n            }\n          }\n        }\n        \n        // Check if we achieved a sufficient portion of the requested adjustment\n        const achievementRatio = Math.abs(result.actualAdjustment / totalAdjustment);\n        result.success = achievementRatio >= 0.8; // Success if we achieved at least 80% of the target\n        \n        if (!result.success) {\n          result.message = `Revenue adjustment achieved only ${(achievementRatio * 100).toFixed(1)}% of target`;\n        }\n        \n        return result;\n      } catch (err) {\n        devWarn('[AutoBalance] Error in adjustRevenueProportionally:', err);\n        return {\n          success: false,\n          changes: {},\n          message: `Error adjusting revenue: ${err.message || err}`\n        };\n      }\n    },\n    \n    /**\n     * Helper method to adjust spending categories proportionally to meet a target adjustment amount\n     * @param {number} totalAdjustment - Dollar amount to adjust (positive = increase, negative = decrease)\n     * @returns {Object} - Result with success flag and details of changes\n     */\n    adjustSpendingProportionally(totalAdjustment) {\n      // Skip if adjustment is negligible\n      if (Math.abs(totalAdjustment) < 1e-2) {\n        return { success: true, changes: {}, message: 'No adjustment needed' };\n      }\n      \n      // Prepare result object\n      const result = {\n        success: true,\n        changes: {},\n        actualAdjustment: 0,\n        message: ''\n      };\n      \n      try {\n        // Find all non-group spending categories\n        const adjustableCategories = Object.entries(this.spendingCategories)\n          // eslint-disable-next-line no-unused-vars\n          .filter(([id, category]) => !category.isGroup && category.baseAmount > 0)\n          .map(([id, category]) => ({ id, category }));\n        \n        if (adjustableCategories.length === 0) {\n          return {\n            success: false,\n            changes: {},\n            message: 'No adjustable spending categories available'\n          };\n        }\n        \n        // Calculate total base amount for proportional distribution\n        const totalBaseAmount = adjustableCategories.reduce(\n          (sum, item) => sum + item.category.baseAmount,\n          0\n        );\n        \n        if (totalBaseAmount <= 0) {\n          return {\n            success: false,\n            changes: {},\n            message: 'Total base amount for spending categories is zero or negative'\n          };\n        }\n        \n        // Calculate and apply changes for each category\n        adjustableCategories.forEach(item => {\n          const oldFactor = item.category.adjustmentFactor || 1;\n          const baseAmount = item.category.baseAmount;\n          \n          // Calculate proportional adjustment\n          const share = baseAmount / totalBaseAmount;\n          const targetAdjustment = totalAdjustment * share;\n          \n          // Calculate new factor: current factor + ($ change / base amount)\n          let factorChange = targetAdjustment / baseAmount;\n          let newFactor = oldFactor + factorChange;\n          \n          // Clamp to configured min/max factor values\n          newFactor = Math.max(this.autoBalanceConfig.minSpendingFactor, \n                      Math.min(this.autoBalanceConfig.maxSpendingFactor, newFactor));\n          \n          // Calculate actual adjustment after clamping\n          factorChange = newFactor - oldFactor;\n          const actualAdjustment = factorChange * baseAmount;\n          \n          // Store the change\n          result.changes[item.id] = {\n            oldFactor,\n            newFactor,\n            amountChange: actualAdjustment\n          };\n          \n          result.actualAdjustment += actualAdjustment;\n          \n          devLog(`[AutoBalance] Spending ${item.id}: ${oldFactor.toFixed(3)}  ${newFactor.toFixed(3)} | $${actualAdjustment.toFixed(2)}B`);\n        });\n        \n        // Check if we achieved a sufficient portion of the requested adjustment\n        const achievementRatio = Math.abs(result.actualAdjustment / totalAdjustment);\n        result.success = achievementRatio >= 0.8; // Success if we achieved at least 80% of the target\n        \n        if (!result.success) {\n          result.message = `Spending adjustment achieved only ${(achievementRatio * 100).toFixed(1)}% of target`;\n        }\n        \n        return result;\n      } catch (err) {\n        devWarn('[AutoBalance] Error in adjustSpendingProportionally:', err);\n        return {\n          success: false,\n          changes: {},\n          message: `Error adjusting spending: ${err.message || err}`\n        };\n      }\n    },\n    \n    resetBudget() {\n      devLog('Starting budget reset...');\n      \n      // Track the reset\n      this.trackBudgetReset();\n      \n      // Store the current auto-balance state to log it\n      const wasAutoBalanceActive = this.autoBalanceActive;\n      if (wasAutoBalanceActive) {\n        devLog('Auto-Balance was active - disabling it for reset');\n      }\n      \n      // Disable auto-balance first to prevent it from interfering with the reset\n      // This must happen before any other changes\n      this.autoBalanceActive = false;\n      \n      // Reset active preset\n      this.activePreset = null;\n      \n      // Clear badges\n      this.badges = [];\n      \n      // Ensure currentYear is set to the default value\n      if (!this.currentYear) {\n        this.currentYear = 2024;\n      }\n      \n      // Skip automatic recalculation to ensure we maintain exact values\n      this._isRecalculating = true; // Prevent recursive calls\n      \n      try {\n        // Define exact original values for all revenue sources\n        const sources = {\n          // Income Taxes: 290B total (210 + 80)\n          personalIncomeTax: { rate: 21, amount: 210, adjustedAmount: 210 },\n          corporateIncomeTax: { rate: 15, amount: 80, adjustedAmount: 80 },\n          \n          // Consumption Taxes: 76B total (50 + 12 + 8 + 6)\n          gst: { rate: 5, amount: 50, adjustedAmount: 50 },\n          exciseTaxes: { rate: 2.5, amount: 12, adjustedAmount: 12 },\n          carbonPricing: { rate: 1, amount: 8, adjustedAmount: 8 },\n          customsDuties: { rate: 1, amount: 6, adjustedAmount: 6 },\n          \n          // Other Revenue: 68B total (27 + 6 + 5 + 30)\n          eiPremiums: { rate: 1.35, amount: 27, adjustedAmount: 27 },\n          crownProfits: { rate: 2.5, amount: 6, adjustedAmount: 6 },\n          resourceRoyalties: { rate: 1, amount: 5, adjustedAmount: 5 },\n          nonTaxRevenue: { rate: 3, amount: 30, adjustedAmount: 30 }\n        };\n        \n        // Calculate expected total dynamically instead of hardcoding it\n        const expectedTotal = Object.values(sources).reduce((total, source) => total + source.amount, 0);\n        devLog(`Expected total revenue after reset: ${expectedTotal}B`);\n\n        // Create a new shallow copy of revenue sources to maintain reactivity\n        const resetSources = { ...this.revenueSources };\n        \n        // Reset each revenue source individually to preserve all properties\n        Object.keys(sources).forEach(sourceId => {\n          if (resetSources[sourceId]) {\n            const source = sources[sourceId];\n            \n            // Create a shallow copy of each source to maintain reactivity\n            resetSources[sourceId] = {\n              ...resetSources[sourceId],\n              rate: source.rate,\n              amount: source.amount,\n              adjustedAmount: source.adjustedAmount,\n              expenditureImpact: 0\n            };\n            \n            devLog(`Reset ${sourceId} to rate: ${source.rate}, amount: ${source.amount}B`);\n          } else {\n            devWarn(`Revenue source ${sourceId} does not exist and cannot be reset`);\n          }\n        });\n        \n        // Apply the immutable update to revenue sources\n        this.revenueSources = resetSources;\n        \n        // Reset spending categories immutably\n        const resetCategories = {};\n        for (const catId in this.spendingCategories) {\n          const cat = this.spendingCategories[catId];\n          if (!cat.isGroup) {\n            resetCategories[catId] = { ...cat, adjustmentFactor: 1 };\n          } else if (cat.children) {\n            const resetChildren = {};\n            for (const childId in cat.children) {\n              resetChildren[childId] = { ...cat.children[childId], adjustmentFactor: 1 };\n            }\n            resetCategories[catId] = { ...cat, children: resetChildren };\n          }\n        }\n        this.spendingCategories = resetCategories;\n        \n        // Fixed costs remain unchanged during reset\n        // (debt servicing is not user-adjustable)\n        \n        // Reset expanded groups immutably\n        this.expandedGroups = {\n          incomeTaxes: true,\n          consumptionTaxes: true,\n          otherRevenues: true,\n          mainCategories: true,\n          otherCategories: false,\n          governmentOperations: false,\n          taxExpenditures: true,\n        };\n        \n        // Handle CPP Premiums if they exist in the store but not in our defaults\n        if (this.revenueSources.cppPremiums) {\n          devLog('CPP Premiums found in store but not in defaults - setting to zero');\n          // Update immutably\n          this.revenueSources = {\n            ...this.revenueSources,\n            cppPremiums: {\n              ...this.revenueSources.cppPremiums,\n              rate: 0,\n              amount: 0,\n              adjustedAmount: 0,\n              expenditureImpact: 0\n            }\n          };\n        }\n        \n        // Now perform a controlled recalculation\n        this.recalculateTotals();\n        \n        // Verify the total revenue is correct\n        const actualTotal = this.totalRevenue;\n        \n        devLog(`Total revenue after reset: ${actualTotal}B (expected: ${expectedTotal}B)`);\n        \n        // Ensure badges remain empty after recalculation\n        this.badges = [];\n        this.lastBadgeUpdate = Date.now();\n        \n        // Force a UI update for all revenue sources\n        this.lastRevenueSourceUpdate = Date.now();\n        \n        // Double-check that auto-balance is still disabled\n        // This is critical when auto-balance was active before reset\n        if (this.autoBalanceActive) {\n          devWarn('Auto-balance was re-enabled during reset - forcing it off again');\n          this.autoBalanceActive = false;\n        }\n        \n        // Double-check totals one more time\n        const finalTotal = this.totalRevenue;\n        if (Math.abs(finalTotal - expectedTotal) > 0.5) {\n          devWarn(`Final revenue check: ${finalTotal}B doesn't match expected ${expectedTotal}B`);\n          // Force direct correction of any discrepancy immutably\n          const correction = expectedTotal - finalTotal;\n          \n          this.revenueSources = {\n            ...this.revenueSources,\n            personalIncomeTax: {\n              ...this.revenueSources.personalIncomeTax,\n              amount: this.revenueSources.personalIncomeTax.amount + correction,\n              adjustedAmount: this.revenueSources.personalIncomeTax.adjustedAmount + correction,\n              rate: (this.revenueSources.personalIncomeTax.amount + correction) / this.revenueSources.personalIncomeTax.base\n            }\n          };\n          \n          devLog(`Applied final correction of ${correction}B to personal income tax`);\n        }\n      } finally {\n        this._isRecalculating = false;\n      }\n\n      // Signal reset complete\n      this.lastUpdate = Date.now();\n\n      // Sync to localStorage\n      this.syncToLocalStorage();\n\n      console.log('Budget reset to initial state with badges cleared');\n      console.log('Total Revenue after reset:', this.totalRevenue);\n    },\n\n    syncToLocalStorage() {\n      try {\n        this.isSaving = true;\n        \n        const budgetData = {\n          revenueSources: {},\n          spendingCategories: {},\n          taxExpenditures: {},\n          fixedCosts: this.fixedCosts, // Include fixed costs in storage\n          expandedGroups: this.expandedGroups,\n          currentYear: this.currentYear,\n          budgetGoals: this.budgetGoals,\n          goalStatus: this.goalStatus,\n          badges: this.badges,\n          lastBadgeUpdate: this.lastBadgeUpdate,\n          activePreset: this.activePreset\n        };\n\n        for (const sourceId in this.revenueSources) {\n          budgetData.revenueSources[sourceId] = {\n            rate: this.revenueSources[sourceId].rate,\n          };\n        }\n\n        for (const catId in this.spendingCategories) {\n          budgetData.spendingCategories[catId] = {\n            adjustmentFactor: this.spendingCategories[catId].adjustmentFactor,\n          };\n        }\n\n        for (const expId in this.taxExpenditures) {\n          budgetData.taxExpenditures[expId] = {\n            adjustmentFactor: this.taxExpenditures[expId].adjustmentFactor,\n          };\n        }\n\n        // Use the enhanced state persistence utility\n        budgetPersistence.save(budgetData);\n        \n        console.log(\"Successfully saved budget to localStorage using enhanced persistence\");\n      } catch (error) {\n        console.error(\"Error saving budget to localStorage:\", error);\n      } finally {\n        this.isSaving = false;\n      }\n    },\n\n    // Enhanced state persistence methods\n    autoSaveState() {\n      try {\n        const stateToSave = {\n          revenueSources: this.revenueSources,\n          spendingCategories: this.spendingCategories,\n          taxExpenditures: this.taxExpenditures,\n          currentYear: this.currentYear,\n          expandedGroups: this.expandedGroups,\n          badges: this.badges,\n          activePreset: this.activePreset,\n          lastUpdate: Date.now()\n        };\n        \n        budgetPersistence.autoSave(stateToSave);\n      } catch (error) {\n        console.error('[BudgetStore] Failed to auto-save state:', error);\n      }\n    },\n\n    // Enhanced initialization with loading state\n    async initializeBudget() {\n      this.isLoading = true;\n      try {\n        // Try to load from localStorage first\n        const savedState = budgetPersistence.load();\n        \n        if (savedState) {\n          // Restore state\n          this.restoreFromSavedState(savedState);\n        } else {\n          // Initialize with defaults\n          this.initializeWithDefaults();\n        }\n        \n        // Ensure calculations are up to date\n        this.recalculateTotals();\n        \n      } catch (error) {\n        console.error('[BudgetStore] Failed to initialize budget:', error);\n        // Fallback to defaults\n        this.initializeWithDefaults();\n      } finally {\n        this.isLoading = false;\n      }\n    },\n\n    // Restore state from saved data\n    restoreFromSavedState(savedState) {\n      if (savedState.revenueSources) {\n        Object.keys(savedState.revenueSources).forEach(sourceId => {\n          if (this.revenueSources[sourceId]) {\n            this.revenueSources[sourceId].rate = savedState.revenueSources[sourceId].rate;\n          }\n        });\n      }\n      \n      if (savedState.spendingCategories) {\n        Object.keys(savedState.spendingCategories).forEach(categoryId => {\n          if (this.spendingCategories[categoryId]) {\n            this.spendingCategories[categoryId].adjustmentFactor = savedState.spendingCategories[categoryId].adjustmentFactor;\n          }\n        });\n      }\n      \n      if (savedState.currentYear) {\n        this.currentYear = savedState.currentYear;\n      }\n      \n      if (savedState.expandedGroups) {\n        this.expandedGroups = { ...this.expandedGroups, ...savedState.expandedGroups };\n      }\n      \n      if (savedState.badges) {\n        this.badges = savedState.badges;\n      }\n      \n      if (savedState.activePreset) {\n        this.activePreset = savedState.activePreset;\n      }\n    },\n\n    // Initialize with default values\n    initializeWithDefaults() {\n      // Initialize revenue sources immutably\n      const initialRevenueSources = {};\n      for (const sourceId in this.revenueSources) {\n        const source = this.revenueSources[sourceId];\n        initialRevenueSources[sourceId] = {\n          ...source,\n          amount: source.base * source.rate,\n          adjustedAmount: source.base * source.rate,\n          expenditureImpact: 0\n        };\n      }\n      this.revenueSources = initialRevenueSources;\n\n      // Initialize tax expenditures immutably\n      const initialExpenditures = {};\n      for (const expId in this.taxExpenditures) {\n        const exp = this.taxExpenditures[expId];\n        initialExpenditures[expId] = {\n          ...exp,\n          adjustment: exp.baseAdjustment || 0,\n          revenueImpact: 0\n        };\n      }\n      this.taxExpenditures = initialExpenditures;\n\n      // Update all revenue sources to account for tax expenditure impacts\n      for (const sourceId in this.revenueSources) {\n        this.updateRevenueSourceAdjustedAmount(sourceId);\n      }\n\n      // Save initial state\n      this.syncToLocalStorage();\n    },\n\n    getDefaultRate(sourceId) {\n      const source = this.revenueSources[sourceId];\n      if (source && source.rateByYear && source.rateByYear[this.currentYear] !== undefined) {\n        return source.rateByYear[this.currentYear];\n      }\n      // Fallback defaults\n      switch (sourceId) {\n        case \"personalIncomeTax\":\n          return 21;\n        case \"corporateIncomeTax\":\n          return 15;\n        case \"gst\":\n          return 5;\n        case \"exciseTaxes\":\n          return 2.5;\n        case \"carbonPricing\":\n          return 1;\n        case \"eiPremiums\":\n          return 1.35;\n        case \"customsDuties\":\n          return 1;\n        case \"crownProfits\":\n          return 2.5;\n        case \"nonTaxRevenue\":\n          return 3;\n        case \"resourceRoyalties\":\n          return 1;\n        default:\n          return 0;\n      }\n    },\n\n    updateTaxExpenditureAdjustment: wrapStoreAction(\n      function(expenditureId, adjustment) {\n        try {\n          const expenditure = this.taxExpenditures[expenditureId];\n          if (!expenditure) return;\n\n          const numAdjustment = Number(adjustment) || 0;\n          const clampedAdjustment = Math.max(-100, Math.min(100, numAdjustment));\n          \n          // Track the change before updating\n          const oldAdjustment = expenditure.adjustmentFactor || 0;\n\n          // Calculate the revenue impact with explicit number conversion\n          const netAmount = Number(expenditure.netAmount) || 0;\n          const revenueImpact = -1 * netAmount * (clampedAdjustment / 100);\n\n          console.log(`Updating tax expenditure ${expenditureId} to ${clampedAdjustment}%, impact: ${revenueImpact}B, batch mode: ${this.isBatchUpdateInProgress}`);\n\n          // Update the tax expenditure immutably\n          this.taxExpenditures = {\n            ...this.taxExpenditures,\n            [expenditureId]: {\n              ...expenditure,\n              adjustmentFactor: clampedAdjustment,\n              revenueImpact: isNaN(revenueImpact) ? 0 : revenueImpact\n            }\n          };\n\n          // Update the linked revenue source\n          if (expenditure.linkedRevenueSource) {\n            this.updateRevenueSourceAdjustedAmount(expenditure.linkedRevenueSource);\n          }\n          \n          // Track the change\n          this.trackTaxExpenditureChange(expenditureId, oldAdjustment, clampedAdjustment);\n\n          // Only update timestamps if not in batch mode\n          if (!this.isBatchUpdateInProgress) {\n            // Signal update\n            this.lastUpdate = Date.now();\n            this.lastTaxExpenditureUpdate = Date.now();\n            \n            // Signal that sentiment update is needed\n            this.setSentimentUpdateRequired(true);\n            \n            // Sync to localStorage\n            this.syncToLocalStorage();\n          }\n        } catch (e) {\n          console.error(`Error updating tax expenditure ${expenditureId}:`, e);\n        }\n      },\n      budgetValidationSchemas.taxExpenditureAdjustment,\n      'updateTaxExpenditureAdjustment'\n    ),\n\n    updateLinkedRevenueSource(expenditureId) {\n      try {\n        const expenditure = this.taxExpenditures[expenditureId];\n        if (!expenditure) {\n          console.error(`Tax expenditure not found: ${expenditureId}`);\n          return;\n        }\n\n        // Calculate impact and update the linked revenue source\n        if (expenditure.linkedRevenueSource) {\n          this.updateRevenueSourceAdjustedAmount(expenditure.linkedRevenueSource);\n        }\n      } catch (e) {\n        console.error(`Error updating linked revenue source for ${expenditureId}:`, e);\n      }\n    },\n\n    updateRevenueSourceAdjustedAmount(revSourceId) {\n      try {\n        const source = this.revenueSources[revSourceId];\n        if (!source) {\n          console.error(`Revenue source not found: ${revSourceId}`);\n          return;\n        }\n        \n        // Calculate total impact from all linked tax expenditures with explicit number conversion\n        let totalImpact = 0;\n        Object.values(this.taxExpenditures).forEach(exp => {\n          if (exp.linkedRevenueSource === revSourceId && exp.adjustmentFactor !== undefined) {\n            const netAmount = Number(exp.netAmount) || 0;\n            const adjustmentFactor = Number(exp.adjustmentFactor) || 0;\n            const impact = -1 * netAmount * (adjustmentFactor / 100);\n            totalImpact += isNaN(impact) ? 0 : impact;\n          }\n        });\n        \n        // Update the revenue source immutably with explicit number conversion\n        const sourceAmount = Number(source.amount) || 0;\n        const adjustedAmount = Math.max(0, sourceAmount + totalImpact);\n        \n        this.revenueSources = {\n          ...this.revenueSources,\n          [revSourceId]: {\n            ...source,\n            adjustedAmount: isNaN(adjustedAmount) ? sourceAmount : adjustedAmount,\n            expenditureImpact: isNaN(totalImpact) ? 0 : totalImpact\n          }\n        };\n        \n        // Signal update\n        this.lastUpdate = Date.now();\n        \n        console.log(`Updated revenue source ${revSourceId}: base amount ${sourceAmount}B, tax impact ${totalImpact}B, adjusted ${adjustedAmount}B`);\n      } catch (e) {\n        console.error(`Error updating revenue source ${revSourceId}:`, e);\n      }\n    },\n\n    updateRevenueSourceAmount: wrapStoreAction(\n      function(sourceId, newAmount) {\n        try {\n          const source = this.revenueSources[sourceId];\n          if (!source) {\n            console.error(`Revenue source not found: ${sourceId}`);\n            return;\n          }\n          \n          // Convert to number explicitly and handle invalid values\n          const numAmount = Number(newAmount);\n          if (isNaN(numAmount)) {\n            console.error(`Invalid amount provided for ${sourceId}: ${newAmount}`);\n            return;\n          }\n          \n          // Create a new revenue source object with updated values\n          const updatedSource = {\n            ...source,\n            amount: numAmount,\n            adjustedAmount: numAmount\n          };\n          \n          // Calculate the new rate based on the base value\n          if (source.base) {\n            const baseValue = Number(source.base) || 1; // Prevent division by zero\n            updatedSource.rate = numAmount / baseValue;\n          }\n          \n          // Update the revenue source immutably\n          this.revenueSources = {\n            ...this.revenueSources,\n            [sourceId]: updatedSource\n          };\n          \n          // Update adjusted amount to account for tax expenditures\n          this.updateRevenueSourceAdjustedAmount(sourceId);\n          \n          // Signal update\n          this.lastUpdate = Date.now();\n          \n          // Sync to localStorage\n          this.syncToLocalStorage();\n          \n          console.log(`Updated revenue source ${sourceId} amount to ${numAmount}B`);\n        } catch (e) {\n          console.error(`Error updating revenue source amount for ${sourceId}:`, e);\n        }\n      },\n      budgetValidationSchemas.revenueSourceAmount,\n      'updateRevenueSourceAmount'\n    ),\n    \n    /**\n     * Alternative method name for backward compatibility - delegates to setRevenueRate\n     * @deprecated Use setRevenueRate instead\n     */\n    updateRevenueSourceRate(sourceId, newRate) {\n      return this.setRevenueRate(sourceId, newRate);\n    },\n\n    resetTaxExpenditures() {\n      // Reset tax expenditures immutably\n      const resetExpenditures = {};\n      for (const expId in this.taxExpenditures) {\n        const exp = this.taxExpenditures[expId];\n        resetExpenditures[expId] = {\n          ...exp,\n          adjustmentFactor: 0,\n          revenueImpact: 0,\n          adjustmentPercent: 0,\n          adjustedAmount: exp.baseAmount\n        };\n      }\n      this.taxExpenditures = resetExpenditures;\n      this.lastTaxExpenditureUpdate = Date.now();\n\n      // Update all revenue sources to reflect reset expenditures\n      for (const sourceId in this.revenueSources) {\n        this.updateRevenueSourceAdjustedAmount(sourceId);\n      }\n\n      // Signal update and recalculate totals\n      this.lastUpdate = Date.now();\n      this.recalculateTotals();\n      \n      // Update badges after tax expenditures are reset\n      this.updateBadges();\n      \n      console.log('Reset all tax expenditures to 0');\n    },\n\n    updateBadges() {\n      // Get the budget data in the format expected by the badge engine\n      const budgetData = this.budgetDataForBadges;\n      \n      console.log('%c[STORE DEBUG] updateBadges called', 'background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;');\n      console.log('Active preset in store:', this.activePreset);\n      console.log('Budget data for badges:', budgetData);\n      \n      // CRITICAL FIX: Ensure we're passing the activePreset correctly\n      // The activePreset must be a string, not undefined or null\n      const presetKey = this.activePreset || null;\n      \n      console.log('%c[STORE DEBUG] Calling getBudgetBadges with preset:', 'color: #e67e22;', presetKey);\n      \n      // Get the earned badges using the getBudgetBadges function, passing the active preset\n      const earnedBadges = getBudgetBadges(budgetData, presetKey);\n      \n      console.log('%c[STORE DEBUG] Earned badges:', 'color: #2ecc71;', earnedBadges.map(b => b.title));\n      \n      // Update the badges state\n      this.badges = [...earnedBadges]; // Use spread operator to ensure reactivity\n      this.lastBadgeUpdate = Date.now();\n      \n      // Force a UI update by triggering a reactive property\n      this.$patch({ lastBadgeUpdate: Date.now() });\n      \n      // Sync to localStorage\n      this.syncToLocalStorage();\n    },\n    \n    // Internal method that performs the actual recalculation\n    _performRecalculation() {\n      // Prevent recursive calls\n      if (this._isRecalculating) {\n        return;\n      }\n      \n      this._isRecalculating = true;\n      this._lastRecalculationTime = Date.now();\n      \n      try {\n        // Update all revenue sources to reflect current tax expenditures\n        Object.keys(this.revenueSources).forEach((id) => {\n          this.updateRevenueSourceAdjustedAmount(id);\n        });\n        \n        // Update the reactive triggers to force component updates\n        this.lastTaxExpenditureUpdate = Date.now();\n        this.lastRevenueSourceUpdate = Date.now();\n        \n        // Update the goal status if goals are enabled\n        if (this.budgetGoals.enabled) {\n          this.updateGoalStatus();\n        }\n        \n        // Update badges based on current budget\n        this.updateBadges();\n        \n        // If auto-balance is active, attempt to balance the budget\n        if (this.autoBalanceActive) {\n          if (this.budgetGoals.enabled && this.budgetGoals.targetDeficit !== null) {\n            this.autoBalanceBudgetForGoal();\n          } else {\n            this.autoBalanceBudget();\n          }\n        }\n        \n        // Check for deficit/surplus limits\n        const currentSurplus = this.surplus;\n        if (currentSurplus > 50) {\n          console.warn(`Surplus exceeds $50B limit: $${currentSurplus.toFixed(1)}B`);\n        } else if (currentSurplus < -50) {\n          console.warn(`Deficit exceeds $50B limit: $${-currentSurplus.toFixed(1)}B`);\n        }\n      } finally {\n        this._isRecalculating = false;\n      }\n    },\n\n    // Change tracking actions\n    addBudgetChange(type, category, itemId, itemName, oldValue, newValue, description = null, dollarImpact = null) {\n      console.log('%c[CHANGE DEBUG] addBudgetChange called:', 'background: #2ecc71; color: white; padding: 2px 5px;', {\n        type,\n        category,\n        itemId,\n        itemName,\n        oldValue,\n        newValue,\n        dollarImpact,\n        changeHistoryLength: this.changeHistory.length\n      });\n\n      // Deduplicate: keep only one entry per (type + itemId)\n      const existingIndex = this.changeHistory.findIndex(\n        (c) => c.type === type && c.itemId === itemId\n      );\n      if (existingIndex !== -1) {\n        console.log('%c[CHANGE DEBUG] Dedup: removing existing change for same item', 'background: #f1c40f; color: black; padding: 2px 5px;', {\n          removedId: this.changeHistory[existingIndex]?.id,\n          removedType: this.changeHistory[existingIndex]?.type,\n          removedItemId: this.changeHistory[existingIndex]?.itemId,\n        });\n        this.changeHistory.splice(existingIndex, 1);\n      }\n\n      const change = new ChangeRecord(type, category, itemId, itemName, oldValue, newValue, description, dollarImpact);\n\n      console.log('%c[CHANGE DEBUG] Created ChangeRecord:', 'background: #9b59b6; color: white; padding: 2px 5px;', {\n        id: change.id,\n        type: change.type,\n        category: change.category,\n        description: change.description,\n        amount: change.amount,\n        dollarImpact: change.dollarImpact,\n        hasGetDisplayAmount: typeof change.getDisplayAmount === 'function'\n      });\n      \n      // Add to beginning of array\n      this.changeHistory.unshift(change);\n      \n      // Maintain max history size\n      if (this.changeHistory.length > this.maxChangeHistorySize) {\n        this.changeHistory = this.changeHistory.slice(0, this.maxChangeHistorySize);\n      }\n      \n      // Increment version for reactivity\n      this.changeHistoryVersion++;\n      \n      console.log('%c[CHANGE DEBUG] Change added to history:', 'background: #34495e; color: white; padding: 2px 5px;', {\n        newHistoryLength: this.changeHistory.length,\n        newHistoryVersion: this.changeHistoryVersion\n      });\n      \n      devLog(`Added budget change: ${change.description}`);\n    },\n\n    trackRevenueChange(sourceId, oldRate, newRate) {\n      console.log('%c[CHANGE DEBUG] trackRevenueChange called:', 'background: #e74c3c; color: white; padding: 2px 5px;', {\n        sourceId,\n        oldRate,\n        newRate,\n        rateDiff: newRate - oldRate,\n        threshold: 0.001,\n        willTrack: Math.abs(newRate - oldRate) >= 0.001\n      });\n      \n      const source = this.revenueSources[sourceId];\n      if (!source) {\n        console.warn('%c[CHANGE DEBUG] Revenue source not found:', 'background: #e67e22; color: white; padding: 2px 5px;', sourceId);\n        return;\n      }\n      \n      const category = REVENUE_CATEGORY_MAP[sourceId] || CHANGE_CATEGORIES.OTHER_REVENUE;\n      const dollarImpact = source.base * (newRate - oldRate);\n      \n      console.log('%c[CHANGE DEBUG] Revenue change details:', 'background: #3498db; color: white; padding: 2px 5px;', {\n        sourceName: source.name,\n        category,\n        base: source.base,\n        dollarImpact,\n        isBatchMode: this.isBatchUpdateInProgress,\n        REVENUE_CATEGORY_MAP: REVENUE_CATEGORY_MAP[sourceId]\n      });\n      \n      // FIXED: Pass rates for correct descriptions, but calculate dollar impact correctly\n      this.addBudgetChange(\n        CHANGE_TYPES.REVENUE,\n        category,\n        sourceId,\n        source.name,\n        oldRate,        // Rate for description: \"21% to 22%\"\n        newRate,        // Rate for description: \"21% to 22%\"\n        null,           // Auto-generate description\n        dollarImpact    // Dollar impact as separate field\n      );\n    },\n\n    trackSpendingChange(categoryId, oldFactor, newFactor) {\n      // Find the category name and base amount\n      let categoryName = 'Unknown Category';\n      let category = CHANGE_CATEGORIES.MAIN_SPENDING;\n      let baseAmount = 0;\n      \n      // Search in main categories\n      Object.values(this.spendingCategories).forEach((cat) => {\n        if (cat.id === categoryId && !cat.isGroup) {\n          categoryName = cat.name;\n          baseAmount = cat.baseAmount || 0;  // Get base amount for dollar calculation\n          category = SPENDING_CATEGORY_MAP[categoryId] || CHANGE_CATEGORIES.MAIN_SPENDING;\n        }\n      });\n      \n      // Search in group children\n      Object.values(this.spendingCategories)\n        .filter((cat) => cat.isGroup && cat.children)\n        .forEach((group) => {\n          const child = Object.values(group.children).find((c) => c.id === categoryId);\n          if (child) {\n            categoryName = child.name;\n            baseAmount = child.baseAmount || 0;  // Get base amount for dollar calculation\n            category = SPENDING_CATEGORY_MAP[categoryId] || CHANGE_CATEGORIES.MAIN_SPENDING;\n          }\n        });\n      \n      // FIXED: Pass factors (for percentage description) and calculate dollar impact\n      const dollarImpact = baseAmount * (newFactor - oldFactor);\n      \n      this.addBudgetChange(\n        CHANGE_TYPES.SPENDING,\n        category,\n        categoryId,\n        categoryName,\n        oldFactor * 100,  // Convert to percentage for display\n        newFactor * 100,  // Convert to percentage for display\n        null,             // Auto-generate description\n        dollarImpact      // Actual dollar impact\n      );\n    },\n\n    trackTaxExpenditureChange(expenditureId, oldAdjustment, newAdjustment) {\n      const expenditure = this.taxExpenditures[expenditureId];\n      if (!expenditure) return;\n\n      // Compute dollar impact on revenue: increasing tax expenditures reduces revenue\n      const adjDelta = (newAdjustment || 0) - (oldAdjustment || 0);\n      const base = Number(expenditure.netAmount) || 0;\n      const dollarImpact = -1 * base * (adjDelta / 100);\n\n      this.addBudgetChange(\n        CHANGE_TYPES.TAX_EXPENDITURE,\n        CHANGE_CATEGORIES.TAX_CREDITS,\n        expenditureId,\n        expenditure.name,\n        oldAdjustment,\n        newAdjustment,\n        null,\n        dollarImpact\n      );\n    },\n\n    trackPresetApplication(presetKey, presetLabel) {\n      this.addBudgetChange(\n        CHANGE_TYPES.PRESET,\n        CHANGE_CATEGORIES.SYSTEM_ACTIONS,\n        presetKey,\n        `Applied Preset: ${presetLabel}`,\n        0,\n        0,\n        `Applied \"${presetLabel}\" preset configuration`\n      );\n    },\n\n    trackAutoBalance() {\n      this.addBudgetChange(\n        CHANGE_TYPES.AUTO_BALANCE,\n        CHANGE_CATEGORIES.SYSTEM_ACTIONS,\n        'auto_balance',\n        'Auto-Balance Applied',\n        0,\n        0,\n        'Budget automatically balanced'\n      );\n    },\n\n    trackBudgetReset() {\n      this.addBudgetChange(\n        CHANGE_TYPES.RESET,\n        CHANGE_CATEGORIES.SYSTEM_ACTIONS,\n        'budget_reset',\n        'Budget Reset',\n        0,\n        0,\n        'Budget reset to default values'\n      );\n    },\n\n    clearChangeHistory() {\n      this.changeHistory = [];\n      this.changeHistoryVersion++;\n      devLog('Cleared change history');\n    },\n\n    getChangesByCategory() {\n      console.log('%c[CHANGE DEBUG] getChangesByCategory called:', 'background: #16a085; color: white; padding: 2px 5px;', {\n        totalChanges: this.changeHistory.length,\n        historyVersion: this.changeHistoryVersion\n      });\n      \n      const grouped = {};\n      \n      this.changeHistory.forEach(change => {\n        if (!grouped[change.category]) {\n          grouped[change.category] = [];\n        }\n        grouped[change.category].push(change);\n      });\n      \n      console.log('%c[CHANGE DEBUG] Changes grouped by category:', 'background: #8e44ad; color: white; padding: 2px 5px;', {\n        categories: Object.keys(grouped),\n        categoryCounts: Object.entries(grouped).map(([cat, changes]) => ({\n          category: cat,\n          count: changes.length\n        }))\n      });\n      \n      return grouped;\n    },\n\n    getRecentChanges(count = 10) {\n      return this.changeHistory.slice(0, count);\n    },\n\n    getChangesByType(type) {\n      return this.changeHistory.filter(change => change.type === type);\n    },\n\n    getChangesSummary() {\n      const revenueChanges = this.getChangesByType(CHANGE_TYPES.REVENUE);\n      const spendingChanges = this.getChangesByType(CHANGE_TYPES.SPENDING);\n      const taxExpenditureChanges = this.getChangesByType(CHANGE_TYPES.TAX_EXPENDITURE);\n      \n      return {\n        totalRevenueChange: revenueChanges.reduce((sum, change) => sum + (change.dollarImpact || 0), 0),\n        totalSpendingChange: spendingChanges.reduce((sum, change) => sum + (change.dollarImpact || 0), 0),\n        totalTaxExpenditureChange: taxExpenditureChanges.reduce((sum, change) => sum + change.amount, 0),\n        changeCount: this.changeHistory.length,\n        lastChange: this.changeHistory[0] || null\n      };\n    },\n\n    // Add debounced localStorage sync\n    debouncedSyncToLocalStorage: debounce(function() {\n      this.syncToLocalStorage();\n    }, 500), // Longer delay for localStorage operations\n  },\n});\n","// src/utils/sharedBudget.js\n// Utility to parse and apply shared budget settings from URL\n\nimport { handleError } from '@/utils/errorHandler.js';\n\n/**\n * Parse budget, badge, and sentiment data from a shared budget URL or route query.\n * @param {Object|URLSearchParams} query - Either URLSearchParams or a route query object\n * @returns {Object}\n */\nexport function parseSharedBudgetParams(query) {\n  // Handle both URLSearchParams and plain objects (route.query)\n  const getValue = (key) => {\n    if (query instanceof URLSearchParams) {\n      return query.get(key);\n    } else {\n      return query[key];\n    }\n  };\n  \n  const hasKey = (key) => {\n    if (query instanceof URLSearchParams) {\n      return query.has(key);\n    } else {\n      return key in query && query[key] != null;\n    }\n  };\n  \n  const getEntries = () => {\n    if (query instanceof URLSearchParams) {\n      return Array.from(query.entries());\n    } else {\n      return Object.entries(query);\n    }\n  };\n\n  try {\n    // Parse main budget values\n    const surplus = Number(getValue('surplus') || 0);\n    const revenue = Number(getValue('revenue') || 0);\n    const debt = Number(getValue('debt') || 0);\n\n    // Parse revenue sliders\n    const revenueSources = {};\n    for (const [key, value] of getEntries()) {\n      if (key.startsWith('r_')) {\n        revenueSources[key.substring(2)] = Number(value);\n      }\n    }\n\n    // Parse spending sliders\n    const spendingCategories = {};\n    for (const [key, value] of getEntries()) {\n      if (key.startsWith('s_')) {\n        spendingCategories[key.substring(2)] = Number(value);\n      }\n    }\n\n    // Parse badges (just names)\n    let badges = [];\n    if (hasKey('badges')) {\n      badges = getValue('badges').split(',').filter(Boolean);\n    }\n\n    // Parse sentiment segments\n    const parseSegments = (prefix) => {\n      const result = [];\n      let i = 0;\n      while (hasKey(`${prefix}${i}_name`) && hasKey(`${prefix}${i}_score`)) {\n        result.push({\n          name: getValue(`${prefix}${i}_name`),\n          score: Number(getValue(`${prefix}${i}_score`))\n        });\n        i++;\n      }\n      return result;\n    };\n    const positiveSegments = parseSegments('pos');\n    const negativeSegments = parseSegments('neg');\n\n    // Parse party budget metadata\n    const title = getValue('title') || '';\n    const description = getValue('description') || '';\n    const partyId = getValue('partyId') || null;\n    const partyColor = getValue('partyColor') || '';\n    \n    // Parse highlights\n    let highlights = [];\n    if (hasKey('highlights')) {\n      highlights = getValue('highlights').split('|').filter(Boolean);\n    }\n    \n    return {\n      surplus,\n      revenue,\n      debt,\n      revenueSources,\n      spendingCategories,\n      badges,\n      positiveSegments,\n      negativeSegments,\n      // Party budget specific fields\n      title,\n      description,\n      partyId,\n      partyColor,\n      highlights\n    };\n  } catch (error) {\n    handleError(error, (msg) => alert(msg));\n    return {};\n  }\n}\n\n/**\n * Apply shared budget settings to the store.\n * @param {Object} sharedData\n * @param {Object} budgetStore\n */\nexport async function applySharedBudgetToStore(sharedData, budgetStore) {\n  try {\n    // Set revenue sliders\n    for (const [sourceId, rate] of Object.entries(sharedData.revenueSources || {})) {\n      if (budgetStore.revenueSources[sourceId]) {\n        budgetStore.updateRevenueRate(sourceId, rate);\n      }\n    }\n    // Set spending sliders\n    for (const [catId, factor] of Object.entries(sharedData.spendingCategories || {})) {\n      if (budgetStore.spendingCategories[catId]) {\n        budgetStore.updateSpendingFactor(catId, factor);\n      }\n    }\n    // Optionally set surplus, revenue, debt (not needed if computed)\n    // Optionally set badges/sentiment if needed\n    // For now, badges and sentiment are display-only (store computes them)\n  } catch (error) {\n    handleError(error, (msg) => alert(msg));\n  }\n}\n","// Salary options for different payment periods\nexport const salaryOptions = [\n  { label: 'Annual', value: 'Annual', periodMultiplier: 1 },\n  { label: 'Monthly', value: 'Monthly', periodMultiplier: 12 },\n  { label: 'Bi-weekly', value: 'Bi-weekly', periodMultiplier: 26 },\n  { label: 'Weekly', value: 'Weekly', periodMultiplier: 52 },\n  { label: 'Daily', value: 'Daily', periodMultiplier: 260 },\n  { label: 'Hourly', value: 'Hourly', periodMultiplier: 2080 },\n]\n\n// 2024 Tax Credits and Deductions\nexport const taxCredits2024 = {\n  basicPersonalAmount: 15705,\n  spouseAmount: 15705,\n  ageAmount: 8396,\n  disabilityAmount: 9428,\n  caregiverAmount: 7999,\n  pensionIncomeAmount: 2000,\n  employmentAmount: 1433,\n  homeBuyersAmount: 5000,\n  digitalNewsSubscriptionMax: 500,\n  volunteerFirefightersAmount: 3000,\n  adoptionExpensesMax: 17131,\n  medicalExpensesThreshold: 2479,\n  charitableDonationsThreshold: 200,\n  charitableDonationsHighIncomeThreshold: 253214\n};\n\n// 2025 Tax Credits and Deductions\nexport const taxCredits2025 = {\n  basicPersonalAmount: 16129,\n  spouseAmount: 16129,\n  ageAmount: 8396,\n  disabilityAmount: 9428,\n  caregiverAmount: 7999,\n  pensionIncomeAmount: 2000,\n  employmentAmount: 1368,\n  homeBuyersAmount: 5000,\n  digitalNewsSubscriptionMax: 500,\n  volunteerFirefightersAmount: 3000,\n  adoptionExpensesMax: 17131,\n  medicalExpensesThreshold: 2479,\n  charitableDonationsThreshold: 200,\n  charitableDonationsHighIncomeThreshold: 253214\n};\n\nexport const taxDeductions2025 = {\n  rrspMaxContribution: 31560,\n  fhsaAnnualLimit: 8000,\n  fhsaLifetimeLimit: 40000,\n  movingExpensesMinDistance: 40, // kilometers\n  unionDues: true,\n  disabilitySupports: true,\n  northernResidents: true,\n  pensionIncomeSplitting: true,\n  carryingCharges: true,\n  clergyResidence: true\n};\n\n// Region options\nexport const regions = [\n  'Alberta',\n  'British Columbia',\n  'Manitoba',\n  'New Brunswick',\n  'Newfoundland and Labrador',\n  'Nova Scotia',\n  'Ontario',\n  'Prince Edward Island',\n  'Quebec',\n  'Saskatchewan',\n  'Northwest Territories',\n  'Nunavut',\n  'Yukon',\n]\n\n// Allocation categories for budget visualization\nexport const allocationCategories = [\n  { label: 'Healthcare', value: 'Healthcare' },\n  { label: 'Support for Seniors', value: 'Support for Seniors' },\n  { label: 'Children and Families', value: 'Children and Families' },\n  {\n    label: 'Indigenous Services and Reconciliation',\n    value: 'Indigenous Services and Reconciliation',\n  },\n  {\n    label: 'Employment Insurance and Other Benefits',\n    value: 'Employment Insurance and Other Benefits',\n  },\n  { label: 'Defense and Public Safety', value: 'Defense and Public Safety' },\n  { label: 'Debt Servicing & Public Debt Charges', value: 'Debt Servicing & Public Debt Charges' },\n  { label: 'Other Government Operations', value: 'Other Government Operations' },\n  { label: 'International Financial Commitments', value: 'International Financial Commitments' },\n  { label: 'Loans, Investments, and Advances', value: 'Loans, Investments, and Advances' },\n]\n\n// Federal Basic Personal Amounts\nexport const federalBasicPersonalAmount2022 = 14398;\nexport const federalBasicPersonalAmount2023 = 15000;\nexport const federalBasicPersonalAmount2024 = 15705;\nexport const federalBasicPersonalAmount2025 = 16129;\n\n// For backward compatibility\nexport const federalBasicPersonalAmount = federalBasicPersonalAmount2023;\n\n// Provincial Basic Personal Amounts\nexport const provincialBasicPersonalAmounts2022 = {\n  'AB': 19369,\n  'BC': 11302,\n  'MB': 10145,\n  'NB': 10917,\n  'NL': 9802,\n  'NS': 8481,\n  'NT': 15609,\n  'NU': 16593,\n  'ON': 11041,\n  'PE': 11050,\n  'QC': 16143,\n  'SK': 16415,\n  'YT': 14398\n};\n\nexport const provincialBasicPersonalAmounts2023 = {\n  'AB': 21103,\n  'BC': 11581,\n  'MB': 10355,\n  'NB': 11220,\n  'NL': 10082,\n  'NS': 8481,\n  'NT': 15936,\n  'NU': 16967,\n  'ON': 11141,\n  'PE': 11350,\n  'QC': 16593,\n  'SK': 16861,\n  'YT': 15000\n};\n\nexport const provincialBasicPersonalAmounts2024 = {\n  'AB': 21503,\n  'BC': 11809,\n  'MB': 10582,\n  'NB': 11458,\n  'NL': 10293,\n  'NS': 8659,\n  'NT': 16267,\n  'NU': 17321,\n  'ON': 11365,\n  'PE': 11581,\n  'QC': 18056,\n  'SK': 17206,\n  'YT': 15705\n};\n\nexport const provincialBasicPersonalAmounts2025 = {\n  'AB': 21885,\n  'BC': 11302,\n  'MB': 15000,\n  'NB': 12458,\n  'NL': 10382,\n  'NS': 8481,\n  'NT': 16593,\n  'NU': 16862,\n  'ON': 12747,\n  'PE': 14250,\n  'QC': 18571,\n  'SK': 17661,\n  'YT': 16129\n};\n\n// For backward compatibility\nexport const provincialBasicPersonalAmounts = provincialBasicPersonalAmounts2023;\n\n// Quebec-specific contribution rates and limits (2024)\nexport const quebecContributionRates2024 = {\n  qpp: {\n    rate: 0.064, // 6.4%\n    maxPensionableEarnings: 68500,\n    basicExemption: 3500,\n    maxContribution: 4160 // (68500 - 3500) * 0.064\n  },\n  qpp2: {\n    rate: 0.04, // 4%\n    maxPensionableEarnings: 73200,\n    minPensionableEarnings: 68500,\n    maxContribution: 188 // (73200 - 68500) * 0.04\n  },\n  ei: {\n    rate: 0.0132, // 1.32% (Quebec rate, lower than federal)\n    maxInsurableEarnings: 63200,\n    maxContribution: 834.24 // 63200 * 0.0132\n  },\n  qpip: {\n    rate: 0.00494, // 0.494%\n    maxInsurableEarnings: 94000,\n    maxContribution: 464.36 // 94000 * 0.00494\n  }\n};\n\n// Quebec-specific contribution rates and limits (2025)\nexport const quebecContributionRates2025 = {\n  qpp: {\n    rate: 0.064, // 6.4%\n    maxPensionableEarnings: 71300,\n    basicExemption: 3500,\n    maxContribution: 4339.20 // (71300 - 3500) * 0.064\n  },\n  qpp2: {\n    rate: 0.04, // 4%\n    maxPensionableEarnings: 81200,\n    minPensionableEarnings: 71300,\n    maxContribution: 396 // (81200 - 71300) * 0.04\n  },\n  ei: {\n    rate: 0.0131, // 1.31% (Quebec rate, lower than federal)\n    maxInsurableEarnings: 65700,\n    maxContribution: 860.67 // 65700 * 0.0131\n  },\n  qpip: {\n    rate: 0.00494, // 0.494%\n    maxInsurableEarnings: 98000,\n    maxContribution: 484.12 // 98000 * 0.00494\n  }\n};\n\n// Quebec abatement rate (reduces federal tax)\nexport const quebecAbatementRate = 0.165; // 16.5%\n\n// Federal contribution rates and limits (2024)\nexport const federalContributionRates2024 = {\n  cpp: {\n    rate: 0.0595, // 5.95%\n    maxPensionableEarnings: 68500,\n    basicExemption: 3500,\n    maxContribution: 3867.50 // (68500 - 3500) * 0.0595\n  },\n  cpp2: {\n    rate: 0.04, // 4%\n    maxPensionableEarnings: 73200,\n    minPensionableEarnings: 68500,\n    maxContribution: 188 // (73200 - 68500) * 0.04\n  },\n  ei: {\n    rate: 0.0166, // 1.66%\n    maxInsurableEarnings: 63200,\n    maxContribution: 1049.12 // 63200 * 0.0166\n  }\n};\n\n// Federal contribution rates and limits (2025)\nexport const federalContributionRates2025 = {\n  cpp: {\n    rate: 0.0595, // 5.95%\n    maxPensionableEarnings: 71300,\n    basicExemption: 3500,\n    maxContribution: 4034.10 // (71300 - 3500) * 0.0595\n  },\n  cpp2: {\n    rate: 0.04, // 4%\n    maxPensionableEarnings: 81200,\n    minPensionableEarnings: 71300,\n    maxContribution: 396 // (81200 - 71300) * 0.04\n  },\n  ei: {\n    rate: 0.0164, // 1.64%\n    maxInsurableEarnings: 65700,\n    maxContribution: 1077.48 // 65700 * 0.0164\n  }\n};\n\n// Federal Tax Brackets\nexport const federalTaxBrackets2022 = [\n  { rate: 0.15, upTo: 50197 },\n  { rate: 0.205, upTo: 100392 },\n  { rate: 0.26, upTo: 155625 },\n  { rate: 0.29, upTo: 221708 },\n  { rate: 0.33, upTo: Infinity },\n];\n\nexport const federalTaxBrackets2023 = [\n  { rate: 0.15, upTo: 53359 },\n  { rate: 0.205, upTo: 106717 },\n  { rate: 0.26, upTo: 165430 },\n  { rate: 0.29, upTo: 235675 },\n  { rate: 0.33, upTo: Infinity },\n];\n\nexport const federalTaxBrackets2024 = [\n  { rate: 0.15, upTo: 55867 },\n  { rate: 0.205, upTo: 111733 },\n  { rate: 0.26, upTo: 173205 },\n  { rate: 0.29, upTo: 246752 },\n  { rate: 0.33, upTo: Infinity },\n];\n\nexport const federalTaxBrackets2025 = [\n  { rate: 0.15, upTo: 57375 },\n  { rate: 0.205, upTo: 114750 },\n  { rate: 0.26, upTo: 177882 },\n  { rate: 0.29, upTo: 253414 },\n  { rate: 0.33, upTo: Infinity },\n];\n\n// For backward compatibility\nexport const federalTaxBrackets = federalTaxBrackets2023;\n\n// Provincial Tax Brackets\nexport const provincialTaxBrackets2022 = {\n  'AB': [\n    { rate: 0.10, upTo: 131220 },\n    { rate: 0.12, upTo: 157464 },\n    { rate: 0.13, upTo: 209952 },\n    { rate: 0.14, upTo: 314928 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n  'BC': [\n    { rate: 0.0506, upTo: 45654 },\n    { rate: 0.077, upTo: 91310 },\n    { rate: 0.105, upTo: 104835 },\n    { rate: 0.1229, upTo: 127299 },\n    { rate: 0.147, upTo: 172602 },\n    { rate: 0.168, upTo: 240716 },\n    { rate: 0.205, upTo: Infinity },\n  ],\n  'MB': [\n    { rate: 0.108, upTo: 34431 },\n    { rate: 0.1275, upTo: 74416 },\n    { rate: 0.174, upTo: Infinity },\n  ],\n  'NB': [\n    { rate: 0.094, upTo: 47715 },\n    { rate: 0.14, upTo: 95431 },\n    { rate: 0.16, upTo: 176756 },\n    { rate: 0.195, upTo: Infinity },\n  ],\n  'NL': [\n    { rate: 0.087, upTo: 39147 },\n    { rate: 0.145, upTo: 78294 },\n    { rate: 0.158, upTo: 139780 },\n    { rate: 0.173, upTo: 195693 },\n    { rate: 0.183, upTo: 250000 },\n    { rate: 0.208, upTo: 500000 },\n    { rate: 0.213, upTo: 1000000 },\n    { rate: 0.218, upTo: Infinity },\n  ],\n  'NS': [\n    { rate: 0.0879, upTo: 29590 },\n    { rate: 0.1495, upTo: 59180 },\n    { rate: 0.1667, upTo: 93000 },\n    { rate: 0.175, upTo: 150000 },\n    { rate: 0.21, upTo: Infinity },\n  ],\n  'ON': [\n    { rate: 0.0505, upTo: 46226 },\n    { rate: 0.0915, upTo: 92454 },\n    { rate: 0.1116, upTo: 150000 },\n    { rate: 0.1216, upTo: 220000 },\n    { rate: 0.1316, upTo: Infinity },\n  ],\n  'PE': [\n    { rate: 0.098, upTo: 31984 },\n    { rate: 0.138, upTo: 63969 },\n    { rate: 0.167, upTo: Infinity },\n  ],\n  'QC': [\n    { rate: 0.15, upTo: 46295 },\n    { rate: 0.20, upTo: 92580 },\n    { rate: 0.24, upTo: 112655 },\n    { rate: 0.2575, upTo: Infinity },\n  ],\n  'SK': [\n    { rate: 0.105, upTo: 45677 },\n    { rate: 0.125, upTo: 130506 },\n    { rate: 0.145, upTo: Infinity },\n  ],\n  'NT': [\n    { rate: 0.059, upTo: 44396 },\n    { rate: 0.086, upTo: 88796 },\n    { rate: 0.122, upTo: 144362 },\n    { rate: 0.1405, upTo: Infinity },\n  ],\n  'NU': [\n    { rate: 0.04, upTo: 44437 },\n    { rate: 0.07, upTo: 88874 },\n    { rate: 0.09, upTo: 144362 },\n    { rate: 0.115, upTo: Infinity },\n  ],\n  'YT': [\n    { rate: 0.064, upTo: 49020 },\n    { rate: 0.09, upTo: 98040 },\n    { rate: 0.109, upTo: 151978 },\n    { rate: 0.128, upTo: 500000 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n};\n\nexport const provincialTaxBrackets2023 = {\n  'AB': [\n    { rate: 0.10, upTo: 142292 },\n    { rate: 0.12, upTo: 170751 },\n    { rate: 0.13, upTo: 227668 },\n    { rate: 0.14, upTo: 341502 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n  'BC': [\n    { rate: 0.0506, upTo: 43070 },\n    { rate: 0.077, upTo: 86141 },\n    { rate: 0.105, upTo: 98901 },\n    { rate: 0.1229, upTo: 120094 },\n    { rate: 0.147, upTo: 162832 },\n    { rate: 0.168, upTo: 227091 },\n    { rate: 0.205, upTo: Infinity },\n  ],\n  'MB': [\n    { rate: 0.108, upTo: 33723 },\n    { rate: 0.1275, upTo: 72885 },\n    { rate: 0.174, upTo: Infinity },\n  ],\n  'NB': [\n    { rate: 0.0968, upTo: 43835 },\n    { rate: 0.1482, upTo: 87671 },\n    { rate: 0.1652, upTo: 142534 },\n    { rate: 0.1784, upTo: 162383 },\n    { rate: 0.203, upTo: Infinity },\n  ],\n  'NL': [\n    { rate: 0.087, upTo: 39157 },\n    { rate: 0.145, upTo: 78315 },\n    { rate: 0.158, upTo: 139780 },\n    { rate: 0.173, upTo: 195693 },\n    { rate: 0.183, upTo: Infinity },\n  ],\n  'NS': [\n    { rate: 0.0879, upTo: 29590 },\n    { rate: 0.1495, upTo: 59180 },\n    { rate: 0.1667, upTo: 93000 },\n    { rate: 0.175, upTo: 150000 },\n    { rate: 0.21, upTo: Infinity },\n  ],\n  'ON': [\n    { rate: 0.0505, upTo: 46226 },\n    { rate: 0.0915, upTo: 92454 },\n    { rate: 0.1116, upTo: 150000 },\n    { rate: 0.1216, upTo: 220000 },\n    { rate: 0.1316, upTo: Infinity },\n  ],\n  'PE': [\n    { rate: 0.0985, upTo: 31984 },\n    { rate: 0.138, upTo: 63969 },\n    { rate: 0.167, upTo: Infinity },\n  ],\n  'QC': [\n    { rate: 0.15, upTo: 45545 },\n    { rate: 0.20, upTo: 91105 },\n    { rate: 0.24, upTo: 112655 },\n    { rate: 0.2575, upTo: Infinity },\n  ],\n  'SK': [\n    { rate: 0.105, upTo: 47677 },\n    { rate: 0.125, upTo: 136385 },\n    { rate: 0.145, upTo: Infinity },\n  ],\n  'NT': [\n    { rate: 0.059, upTo: 44437 },\n    { rate: 0.086, upTo: 88874 },\n    { rate: 0.122, upTo: 144362 },\n    { rate: 0.1405, upTo: Infinity },\n  ],\n  'NU': [\n    { rate: 0.04, upTo: 45462 },\n    { rate: 0.07, upTo: 90925 },\n    { rate: 0.09, upTo: 147692 },\n    { rate: 0.115, upTo: Infinity },\n  ],\n  'YT': [\n    { rate: 0.064, upTo: 50197 },\n    { rate: 0.09, upTo: 100392 },\n    { rate: 0.109, upTo: 155625 },\n    { rate: 0.128, upTo: 500000 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n};\n\nexport const provincialTaxBrackets2024 = {\n  'AB': [\n    { rate: 0.10, upTo: 148269 },\n    { rate: 0.12, upTo: 177922 },\n    { rate: 0.13, upTo: 237230 },\n    { rate: 0.14, upTo: 355845 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n  'BC': [\n    { rate: 0.0506, upTo: 45654 },\n    { rate: 0.077, upTo: 91310 },\n    { rate: 0.105, upTo: 104835 },\n    { rate: 0.1229, upTo: 127299 },\n    { rate: 0.147, upTo: 172602 },\n    { rate: 0.168, upTo: 240716 },\n    { rate: 0.205, upTo: Infinity },\n  ],\n  'MB': [\n    { rate: 0.108, upTo: 34431 },\n    { rate: 0.1275, upTo: 74416 },\n    { rate: 0.174, upTo: Infinity },\n  ],\n  'NB': [\n    { rate: 0.094, upTo: 47715 },\n    { rate: 0.14, upTo: 95431 },\n    { rate: 0.16, upTo: 176756 },\n    { rate: 0.195, upTo: Infinity },\n  ],\n  'NL': [\n    { rate: 0.087, upTo: 39147 },\n    { rate: 0.145, upTo: 78294 },\n    { rate: 0.158, upTo: 139780 },\n    { rate: 0.173, upTo: 195693 },\n    { rate: 0.183, upTo: 250000 },\n    { rate: 0.208, upTo: 500000 },\n    { rate: 0.213, upTo: 1000000 },\n    { rate: 0.218, upTo: Infinity },\n  ],\n  'NS': [\n    { rate: 0.0879, upTo: 29590 },\n    { rate: 0.1495, upTo: 59180 },\n    { rate: 0.1667, upTo: 93000 },\n    { rate: 0.175, upTo: 150000 },\n    { rate: 0.21, upTo: Infinity },\n  ],\n  'ON': [\n    { rate: 0.0505, upTo: 46226 },\n    { rate: 0.0915, upTo: 92454 },\n    { rate: 0.1116, upTo: 150000 },\n    { rate: 0.1216, upTo: 220000 },\n    { rate: 0.1316, upTo: Infinity },\n  ],\n  'PE': [\n    { rate: 0.098, upTo: 31984 },\n    { rate: 0.138, upTo: 63969 },\n    { rate: 0.167, upTo: Infinity },\n  ],\n  'QC': [\n    { rate: 0.14, upTo: 51780 },\n    { rate: 0.20, upTo: 103545 },\n    { rate: 0.24, upTo: 126000 },\n    { rate: 0.2575, upTo: Infinity },\n  ],\n  'SK': [\n    { rate: 0.105, upTo: 45677 },\n    { rate: 0.125, upTo: 130506 },\n    { rate: 0.145, upTo: Infinity },\n  ],\n  'NT': [\n    { rate: 0.059, upTo: 44396 },\n    { rate: 0.086, upTo: 88796 },\n    { rate: 0.122, upTo: 144362 },\n    { rate: 0.1405, upTo: Infinity },\n  ],\n  'NU': [\n    { rate: 0.04, upTo: 44437 },\n    { rate: 0.07, upTo: 88874 },\n    { rate: 0.09, upTo: 144362 },\n    { rate: 0.115, upTo: Infinity },\n  ],\n  'YT': [\n    { rate: 0.064, upTo: 49020 },\n    { rate: 0.09, upTo: 98040 },\n    { rate: 0.109, upTo: 151978 },\n    { rate: 0.128, upTo: 500000 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n};\n\nexport const provincialTaxBrackets2025 = {\n  'AB': [\n    { rate: 0.10, upTo: 151234 },\n    { rate: 0.12, upTo: 181481 },\n    { rate: 0.13, upTo: 241974 },\n    { rate: 0.14, upTo: 362961 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n  'BC': [\n    { rate: 0.0506, upTo: 49279 },\n    { rate: 0.077, upTo: 98560 },\n    { rate: 0.105, upTo: 113158 },\n    { rate: 0.1229, upTo: 137407 },\n    { rate: 0.147, upTo: 186306 },\n    { rate: 0.168, upTo: 259829 },\n    { rate: 0.205, upTo: Infinity },\n  ],\n  'MB': [\n    { rate: 0.108, upTo: 47564 },\n    { rate: 0.1275, upTo: 101200 },\n    { rate: 0.174, upTo: Infinity },\n  ],\n  'NB': [\n    { rate: 0.094, upTo: 51306 },\n    { rate: 0.14, upTo: 102614 },\n    { rate: 0.16, upTo: 190060 },\n    { rate: 0.195, upTo: Infinity },\n  ],\n  'NL': [\n    { rate: 0.087, upTo: 44192 },\n    { rate: 0.145, upTo: 88382 },\n    { rate: 0.158, upTo: 157792 },\n    { rate: 0.178, upTo: 220910 },\n    { rate: 0.198, upTo: 282214 },\n    { rate: 0.208, upTo: 564429 },\n    { rate: 0.213, upTo: 1128858 },\n    { rate: 0.218, upTo: Infinity },\n  ],\n  'NS': [\n    { rate: 0.0879, upTo: 30507 },\n    { rate: 0.1495, upTo: 61015 },\n    { rate: 0.1667, upTo: 95883 },\n    { rate: 0.175, upTo: 154650 },\n    { rate: 0.21, upTo: Infinity },\n  ],\n  'ON': [\n    { rate: 0.0505, upTo: 52886 },\n    { rate: 0.0915, upTo: 105775 },\n    { rate: 0.1116, upTo: 150000 },\n    { rate: 0.1216, upTo: 220000 },\n    { rate: 0.1316, upTo: Infinity },\n  ],\n  'PE': [\n    { rate: 0.095, upTo: 33328 },\n    { rate: 0.1347, upTo: 64656 },\n    { rate: 0.166, upTo: 105000 },\n    { rate: 0.1762, upTo: 140000 },\n    { rate: 0.19, upTo: Infinity },\n  ],\n  'QC': [\n    { rate: 0.14, upTo: 53295 },\n    { rate: 0.19, upTo: 106585 },\n    { rate: 0.24, upTo: 129275 },\n    { rate: 0.2575, upTo: Infinity },\n  ],\n  'SK': [\n    { rate: 0.105, upTo: 53463 },\n    { rate: 0.125, upTo: 152750 },\n    { rate: 0.145, upTo: Infinity },\n  ],\n  'NT': [\n    { rate: 0.059, upTo: 51964 },\n    { rate: 0.086, upTo: 103930 },\n    { rate: 0.122, upTo: 168967 },\n    { rate: 0.1405, upTo: Infinity },\n  ],\n  'NU': [\n    { rate: 0.04, upTo: 54707 },\n    { rate: 0.07, upTo: 109413 },\n    { rate: 0.09, upTo: 177881 },\n    { rate: 0.115, upTo: Infinity },\n  ],\n  'YT': [\n    { rate: 0.064, upTo: 57375 },\n    { rate: 0.09, upTo: 114750 },\n    { rate: 0.109, upTo: 177882 },\n    { rate: 0.128, upTo: 500000 },\n    { rate: 0.15, upTo: Infinity },\n  ],\n};\n\n// For backward compatibility\nexport const provincialTaxBrackets = provincialTaxBrackets2023;\n\n// Budget Categories\nexport const budgetCategories2022 = [\n  {\n    id: 1,\n    key: 'healthcare',\n    name: 'Healthcare (Canada Health Transfer)',\n    amount: 58200000000,\n    description: 'Funding for healthcare systems across Canada, including medical and technical aid, healthcare professionals training, and public health initiatives.'\n  },\n  {\n    id: 2,\n    key: 'childrenAndFamilies',\n    name: 'Children and Families',\n    amount: 26900000000,\n    description: 'Support for families with children, including the Canada Child Benefit (CCB), childcare initiatives, and family support programs.'\n  },\n  {\n    id: 3,\n    key: 'indigenousServices',\n    name: 'Indigenous Services',\n    amount: 39800000000,\n    description: 'Funding for Indigenous communities, including healthcare, education, infrastructure, and community development.'\n  },\n  {\n    id: 4,\n    key: 'employmentInsuranceAndBenefits',\n    name: 'Employment Insurance and Benefits',\n    amount: 35600000000,\n    description: 'Employment insurance benefits and related employment programs.'\n  },\n  {\n    id: 5,\n    key: 'supportForSeniors',\n    name: 'Support for Seniors',\n    amount: 69100000000,\n    description: 'Old Age Security, Guaranteed Income Supplement, and other senior support programs.'\n  },\n  {\n    id: 6,\n    key: 'defense',\n    name: 'Defense',\n    amount: 36400000000,\n    description: 'National defense spending, including military procurement, operations, and personnel costs.'\n  },\n  {\n    id: 7,\n    key: 'publicSafetyAndEmergencyPreparedness',\n    name: 'Public Safety and Emergency Preparedness',\n    amount: 11600000000,\n    description: 'Funding for police, border security, corrections, and emergency management.'\n  },\n  {\n    id: 8,\n    key: 'internationalAffairsAndDevelopment',\n    name: 'International Affairs and Development',\n    amount: 9800000000,\n    description: 'International aid, diplomacy, and global development initiatives.'\n  },\n  {\n    id: 9,\n    key: 'publicDebtCharges',\n    name: 'Public Debt Charges',\n    amount: 42700000000,\n    description: 'Interest payments on the federal debt.'\n  },\n  {\n    id: 10,\n    key: 'loansInvestmentsAndAdvances',\n    name: 'Loans, Investments, and Advances',\n    amount: 10000000000,\n    description: 'Government loans, investments, and financial advances.'\n  },\n  {\n    id: 11,\n    key: 'otherGovernmentOperations',\n    name: 'Other Government Operations',\n    amount: 242000000000,\n    description: 'Various government operations including General Public Services ($40B), Social Protection Programs ($30B), Economic Affairs ($12B), and other departments and agencies.'\n  }\n];\n\n// For backward compatibility\nexport const budgetCategories = budgetCategories2022;\n\n// Budget Categories for 2024\nexport const budgetCategories2024 = [\n  {\n    id: 1,\n    key: 'healthcareCanadaHealthTransfer',\n    name: 'Healthcare (Canada Health Transfer)',\n    amount: 50400000000,\n    description: 'The federal government supports provincial and territorial healthcare systems through the Canada Health Transfer (CHT). This funding assists in delivering universal healthcare, including hospitals, healthcare professionals, and public health initiatives. Healthcare expenditures represent approximately 10% of total federal spending.'\n  },\n  {\n    id: 2,\n    key: 'supportForSeniors',\n    name: 'Support for Seniors',\n    amount: 76000000000,\n    description: 'This allocation funds programs like Old Age Security (OAS) and the Guaranteed Income Supplement (GIS), providing basic income support to seniors. Driven by Canada\\'s aging population, these programs account for around 14% of total federal spending.'\n  },\n  {\n    id: 3,\n    key: 'childrenAndFamilies',\n    name: 'Children and Families',\n    amount: 26300000000,\n    description: 'The Canada Child Benefit (CCB) offers income support to low- and middle-income families to assist with child-rearing costs. This initiative plays a crucial role in reducing child poverty and constitutes about 6% of federal spending.'\n  },\n  {\n    id: 4,\n    key: 'indigenousServicesAndReconciliation',\n    name: 'Indigenous Services and Reconciliation',\n    amount: 35500000000,\n    description: 'This funding supports Indigenous communities through initiatives in healthcare, education, infrastructure, and reconciliation efforts, including land claim settlements. Indigenous services represent around 7% of the total federal budget.'\n  },\n  {\n    id: 5,\n    key: 'employmentInsuranceAndOtherBenefits',\n    name: 'Employment Insurance and Other Benefits',\n    amount: 23100000000,\n    description: 'Funding for Employment Insurance (EI) provides income support to temporarily unemployed workers, new parents, and seasonal employees. This category also includes retraining and skill development programs, making up around 5% of federal spending.'\n  },\n  {\n    id: 6,\n    key: 'defenseAndPublicSafety',\n    name: 'Defense and Public Safety',\n    amount: 32600000000,\n    description: 'Expenditures cover the Canadian Armed Forces, military procurement (e.g., ships, aircraft), and public safety programs like border security and cybersecurity. This reflects Canada\\'s defense commitments and represents about 6% of the total budget.'\n  },\n  {\n    id: 7,\n    key: 'debtServicingPublicDebtCharges',\n    name: 'Debt Servicing (Public Debt Charges)',\n    amount: 47300000000,\n    description: 'Payments for interest on Canada\\'s national debt, which totaled $1.173 trillion by the end of the fiscal year. Rising interest rates have increased debt servicing costs, accounting for around 9% of total spending.'\n  },\n  {\n    id: 8,\n    key: 'loansInvestmentsAndAdvances',\n    name: 'Loans, Investments, and Advances',\n    amount: 10000000000,\n    description: 'This category encompasses various financial assistance programs including Student Loans ($24B total portfolio), Agriculture Loans ($162M), International Development and Loans ($53B total), Business and Innovation Loans ($600M), Defense Sector Loans ($1.45B), and Economic Development Loans.'\n  },\n  {\n    id: 9,\n    key: 'otherGovernmentOperations',\n    name: 'Other Government Operations',\n    amount: 140000000000,\n    description: 'This category includes Transportation Infrastructure ($15B), Environmental Programs ($8B), Public Safety ($9B), Government Buildings ($7B), Research and Innovation ($10B), Digital Government ($5B), Federal Employee Salaries ($35B), Legal and Justice System ($5B), Indigenous Services Operations ($4B), Cultural Programs ($2B), Scientific R&D ($5B), and Diplomatic Representation ($5B).'\n  }\n];\n\n// Base budget data for 2024 (in billions)\nexport const baseBudget2024Data = [\n  { category: 'Healthcare (Canada Health Transfer)', amount: 50.4 },\n  { category: 'Support for Seniors', amount: 76.0 },\n  { category: 'Children and Families', amount: 26.3 },\n  { category: 'Indigenous Services and Reconciliation', amount: 35.5 },\n  { category: 'Employment Insurance and Other Benefits', amount: 23.1 },\n  { category: 'Defense and Public Safety', amount: 32.6 },\n  { category: 'Debt Servicing (Public Debt Charges)', amount: 47.3 },\n  { category: 'Loans, Investments, and Advances', amount: 10.0 },\n  { category: 'Other Government Operations', amount: 140.0 },\n];\n\n// Federal budget data for 2024 (in billions)\nexport const federalBudget2024Data = [\n  { category: 'Economic Growth and Tax Policies', amount: 412.4 },\n  { category: 'Housing and Affordability', amount: 121.418 },\n  { category: 'Green Energy and Sustainability', amount: 8.407 },\n  { category: 'Social Programs and Indigenous Communities', amount: 1.236 },\n  { category: 'Defence and Public Safety', amount: 43.143 },\n  { category: 'Public Debt and Fiscal Stability', amount: 58.3 },\n  { category: 'Strategic Investments in Innovation', amount: 0.138 }\n];","import { defineStore } from \"pinia\";\nimport { ref, computed } from \"vue\";\nimport { salaryOptions } from \"@/domains/calculator/constants/taxData.js\";\nimport { createValidatedAction } from '@/utils/storeActionWrapper.js';\n\nexport const useSalaryStore = defineStore('salary', () => {\n  const selectedSalaryRate = ref('Annual')\n\n  const selectSalaryRate = createValidatedAction('salary', 'selectedSalaryRate', function(salaryRate) {\n    selectedSalaryRate.value = salaryRate\n  })\n\n  const periodMultiplier = computed(() => {\n    if (!salaryOptions) return 1\n    const option = salaryOptions.find((so) => so.value === selectedSalaryRate.value)\n    return option ? option.periodMultiplier : 1\n  })\n\n  return {\n    selectedSalaryRate,\n    selectSalaryRate,\n    periodMultiplier\n  }\n})","import { defineStore } from \"pinia\";\nimport { ref, computed } from \"vue\";\nimport { createValidatedAction } from '@/utils/storeActionWrapper.js';\n\nexport const useYearStore = defineStore('year', () => {\n  // Available tax years\n  const taxYears = [\n    { id: '2023', label: '2022-2023' },\n    { id: '2024', label: '2023-2024' },\n    { id: '2025', label: '2024-2025' }\n  ];\n  \n  // Default to 2025 (2024-2025 tax year)\n  const selectedTaxYear = ref('2025');\n  \n  // Computed property to determine which budget data to use\n  const budgetYear = computed(() => {\n    // 2022 and 2023 use the same 2022-2023 budget data\n    return selectedTaxYear.value === '2024' ? '2023-2024' : '2022-2023';\n  });\n  \n  // Function to change the selected year\n  const setSelectedTaxYear = createValidatedAction('year', 'selectedTaxYear', function(year) {\n    selectedTaxYear.value = year;\n  });\n  \n  return {\n    taxYears,\n    selectedTaxYear,\n    budgetYear,\n    setSelectedTaxYear\n  };\n});\n","/* eslint-disable */\n<template>\n  <ErrorBoundary component-name=\"App\">\n    <div id=\"app\">\n      <!-- Router View - This is where route components will be rendered -->\n      <router-view v-if=\"$route.path !== '/'\" />\n\n      <!-- Main Content (only shown on home route) -->\n      <main v-if=\"$route.path === '/'\">\n        <div class=\"main-container\">\n          <!-- Header Section -->\n          <header>\n            <div class=\"logo-container\">\n              <img\n                :src=\"logoUrl\"\n                :alt=\"t('home.alt.logo')\"\n                class=\"site-logo\"\n              >\n            </div>\n            <h1 class=\"main-title main-title--highlight\">\n              {{ t('home.header.title') }}\n            </h1>\n            <div class=\"header-actions\">\n            <nav class=\"main-navigation\">\n              <router-link\n                to=\"/welcome\"\n                class=\"nav-link\"\n              >{{ t('home.nav.home') }}</router-link>\n              <router-link\n                to=\"/how-it-works\"\n                class=\"nav-link\"\n              >\n                {{ t('home.nav.howItWorks') }}\n              </router-link>\n              <router-link\n                to=\"/simulator\"\n                class=\"nav-link simulator-link\"\n              >\n                {{ t('home.nav.simulator') }}\n              </router-link>\n              <a\n                href=\"https://www.canada.ca/en/revenue-agency.html\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"nav-link\"\n              >{{ t('home.nav.cra') }}</a>\n            </nav>\n            <div class=\"language-switcher\" role=\"group\" :aria-label=\"t('home.language.switchLabel')\">\n              <button\n                v-for=\"lng in locales\"\n                :key=\"lng.code\"\n                type=\"button\"\n                class=\"language-button\"\n                :class=\"{ active: currentLocale === lng.code }\"\n                @click=\"setLocale(lng.code)\"\n              >\n                {{ t(lng.labelKey) }}\n              </button>\n            </div>\n          </div>\n            <p class=\"subtitle subtitle--highlight\">\n              {{ t('home.header.subtitle') }}\n            </p>\n          </header>\n\n          <!-- Year Selector Section -->\n          <section class=\"year-selector-section\">\n            <div class=\"year-selector-container\">\n              <h3 class=\"year-selector-title\">\n                {{ t('home.year.title') }}\n              </h3>\n              <div class=\"year-selector\">\n                <button \n                  v-for=\"year in yearStore.taxYears\" \n                  :key=\"year.id\"\n                  :class=\"['year-button', { active: yearStore.selectedTaxYear === year.id }]\"\n                  @click=\"yearStore.setSelectedTaxYear(year.id)\"\n                >\n                  {{ year.label }}\n                </button>\n              </div>\n                            <p class=\"year-selector-note\">\n                {{ yearSelectorNote }}\n              </p>\n            </div>\n          </section>\n\n          <!-- Salary Rate Selector Section -->\n          <ErrorBoundary component-name=\"SalaryRateSelector\">\n            <SalaryRateSelector />\n          </ErrorBoundary>\n\n          <Tabs\n            class=\"calculator-tabs\"\n            variant=\"primary\"\n            :items=\"tabItems\"\n            v-model=\"activeTab\"\n          >\n            <template #default=\"{ activeTab: currentTab, getPanelProps }\">\n              <section\n                v-bind=\"getPanelProps('calculator')\"\n                class=\"calculator-section budget-simulator\"\n                v-show=\"currentTab === 'calculator'\"\n              >\n                <div class=\"calculator-wrapper\">\n                  <ErrorBoundary component-name=\"CalculatorView\">\n                    <CalculatorView />\n                  </ErrorBoundary>\n                  <ErrorBoundary component-name=\"ResultView\">\n                    <ResultView />\n                  </ErrorBoundary>\n                </div>\n              </section>\n\n              <section\n                v-bind=\"getPanelProps('breakdown')\"\n                class=\"income-section\"\n                v-show=\"currentTab === 'breakdown'\"\n              >\n                <h2 class=\"section-title section-title--highlight\">\n                  {{ t('home.sections.breakdown.title') }}\n                </h2>\n                <p class=\"section-description section-description--highlight\">\n                  {{ t('home.sections.breakdown.description') }}\n                </p>\n                <ErrorBoundary component-name=\"FederalBudgetView\">\n                  <FederalBudgetView />\n                </ErrorBoundary>\n              </section>\n\n              <section\n                v-bind=\"getPanelProps('categories')\"\n                class=\"budget-categories-section expenses-section\"\n                v-show=\"currentTab === 'categories'\"\n              >\n                <div class=\"section-header\">\n                  <h2 class=\"section-title\">\n                    {{ t('home.sections.categories.title') }}\n                  </h2>\n                  <button\n                    class=\"toggle-section-button\"\n                    @click=\"toggleBudgetCategories\"\n                  >\n                    {{ t(showBudgetCategories ? 'home.actions.hide' : 'home.actions.show') }}\n                  </button>\n                </div>\n                <transition name=\"fade\">\n                  <div v-if=\"showBudgetCategories\">\n                    <p class=\"section-description\">\n                    <template v-if=\"yearStore.selectedTaxYear === '2023'\">\n                      {{ t('home.sections.categories.description.2023') }}\n                    </template>\n                    <template v-else-if=\"yearStore.selectedTaxYear === '2024'\">\n                      {{ t('home.sections.categories.description.2024') }}\n                    </template>\n                    <template v-else-if=\"yearStore.selectedTaxYear === '2025'\">\n                      {{ t('home.sections.categories.description.2025') }}\n                    </template>\n                    <template v-else>\n                      {{ t('home.sections.categories.description.fallback') }}\n                    </template>\n                  </p>\n                    <ErrorBoundary component-name=\"BudgetCategoriesView\">\n                      <BudgetCategoriesView />\n                    </ErrorBoundary>\n                  </div>\n                </transition>\n              </section>\n\n              <section\n                v-bind=\"getPanelProps('faqs')\"\n                class=\"faq-section summary-section\"\n                v-show=\"currentTab === 'faqs'\"\n              >\n                <div class=\"section-header\">\n                  <h2 class=\"section-title\">\n                    {{ t('home.sections.faqs.title') }}\n                  </h2>\n                  <button\n                    class=\"toggle-section-button\"\n                    @click=\"toggleFAQs\"\n                  >\n                    {{ t(showFAQs ? 'home.actions.hide' : 'home.actions.show') }}\n                  </button>\n                </div>\n                <transition name=\"fade\">\n                  <div v-if=\"showFAQs\">\n                    <ErrorBoundary component-name=\"FAQSection\">\n                      <FAQSection />\n                    </ErrorBoundary>\n                  </div>\n                </transition>\n              </section>\n\n              <section\n                v-bind=\"getPanelProps('resources')\"\n                class=\"resources-section\"\n                v-show=\"currentTab === 'resources'\"\n              >\n                <h2 class=\"section-title\">\n                  {{ t('home.sections.resources.title') }}\n                </h2>\n                <p class=\"resources-description\">\n                  {{ t('home.sections.resources.description') }}\n                </p>\n                <div class=\"resources-links\">\n                  <router-link\n                    to=\"/how-it-works\"\n                    class=\"resource-link\"\n                  >\n                    {{ t('home.sections.resources.links.howItWorks') }}\n                  </router-link>\n                  <a\n                    href=\"https://www.canada.ca/en/revenue-agency.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    class=\"resource-link\"\n                  >{{ t('home.sections.resources.links.cra') }}</a>\n                  <a\n                    href=\"https://www.canada.ca/en/department-finance.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    class=\"resource-link\"\n                  >{{ t('home.sections.resources.links.finance') }}</a>\n                  <a\n                    href=\"https://www.budget.canada.ca/2024/home-accueil-en.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    class=\"resource-link\"\n                  >{{ t('home.sections.resources.links.budget') }}</a>\n                  <a\n                    href=\"https://www.tpsgc-pwgsc.gc.ca/recgen/cpc-pac/index-eng.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    class=\"resource-link\"\n                  >{{ t('home.sections.resources.links.publicAccounts') }}</a>\n                </div>\n              </section>\n            </template>\n          </Tabs>\n        </div>\n      </main>\n\n      <!-- Footer - Now visible on all pages -->\n      <footer class=\"site-footer\">\n        <div class=\"footer-content\">\n          <div class=\"footer-section\">\n            <h3>{{ t('home.footer.about.title') }}</h3>\n            <p>{{ t('home.footer.about.body') }}</p>\n          </div>\n          <div class=\"footer-section\">\n            <h3>{{ t('home.footer.connect.title') }}</h3>\n            <div class=\"social-links\">\n              <a\n                href=\"mailto:fiscal-insights@outlook.com\"\n                class=\"social-link\"\n              >\n                <img\n                  src=\"@/assets/email-icon.svg\"\n                  :alt=\"t('home.alt.email')\"\n                  class=\"social-icon\"\n                >\n                {{ t('home.footer.connect.contact') }}\n              </a>\n              <a\n                href=\"https://www.instagram.com/fiscal_insights1/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"social-link\"\n              >\n                <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/87/87390.png\"\n                  :alt=\"t('home.alt.instagram')\"\n                  class=\"social-icon\"\n                >\n                {{ t('home.footer.social.instagram') }}\n              </a>\n              <a\n                href=\"https://www.linkedin.com/company/fiscal-insights-canada/?viewAsMember=true\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"social-link\"\n              >\n                <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/174/174857.png\"\n                  :alt=\"t('home.alt.linkedin')\"\n                  class=\"social-icon\"\n                >\n                {{ t('home.footer.social.linkedin') }}\n              </a>\n            </div>\n          </div>\n          <div class=\"footer-section\">\n            <h3>{{ t('home.footer.legal.title') }}</h3>\n            <div class=\"legal-links\">\n              <router-link\n                to=\"/terms-of-service\"\n                class=\"legal-link\"\n              >\n                {{ t('home.footer.legal.terms') }}\n              </router-link>\n            </div>\n          </div>\n        </div>\n        <div class=\"footer-bottom\">\n          <p>{{ t('home.footer.bottom.contact') }} <a href=\"mailto:fiscal-insights@outlook.com\" class=\"text-blue-600 hover:text-blue-800\">fiscal-insights@outlook.com</a></p>\n          <p>&copy; {{ new Date().getFullYear() }} {{ t('home.footer.bottom.copy') }}</p>\n        </div>\n      </footer>\n\n      <!-- Beta Testing Button - Visible on all pages -->\n      <a\n        href=\"https://forms.gle/Yofdxnr1iLZ5fRJ8A\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        class=\"beta-button\"\n      >\n        <span>{{ t('home.beta.cta') }}</span>\n      </a>\n    </div>\n  </ErrorBoundary>\n</template>\n\n<script>\nimport { ref, computed, defineAsyncComponent, watch, onMounted, onBeforeUnmount } from 'vue'\nimport { useYearStore } from '@/domains/calculator/store/year.js'\nimport ErrorBoundary from '@/components/ErrorBoundary.vue'\nimport Tabs from '@/components/Tabs.vue'\nimport { useI18n } from '@/i18n'\n\n// Lazy load heavy components for better initial page load\nconst CalculatorView = defineAsyncComponent({\n  loader: () => import('@/views/CalculatorView.vue'),\n  loadingComponent: { template: '<div class=\"loading-view\">Loading calculator...</div>' },\n  errorComponent: { template: '<div class=\"error-view\">Failed to load calculator</div>' },\n  delay: 200,\n  timeout: 10000\n})\n\nconst ResultView = defineAsyncComponent({\n  loader: () => import('@/views/ResultView.vue'),\n  loadingComponent: { template: '<div class=\"loading-view\">Loading results...</div>' },\n  errorComponent: { template: '<div class=\"error-view\">Failed to load results</div>' },\n  delay: 200,\n  timeout: 10000\n})\n\nconst FederalBudgetView = defineAsyncComponent({\n  loader: () => import('@/views/FederalBudgetView.vue'),\n  loadingComponent: { template: '<div class=\"loading-view\">Loading budget view...</div>' },\n  errorComponent: { template: '<div class=\"error-view\">Failed to load budget view</div>' },\n  delay: 200,\n  timeout: 10000\n})\n\nconst BudgetCategoriesView = defineAsyncComponent({\n  loader: () => import('@/views/BudgetCategoriesView.vue'),\n  loadingComponent: { template: '<div class=\"loading-view\">Loading budget categories...</div>' },\n  errorComponent: { template: '<div class=\"error-view\">Failed to load budget categories</div>' },\n  delay: 200,\n  timeout: 10000\n})\n\nconst FAQSection = defineAsyncComponent({\n  loader: () => import('@/domains/faq/components/FAQSection.vue'),\n  loadingComponent: { template: '<div class=\"loading-view\">Loading FAQ...</div>' },\n  errorComponent: { template: '<div class=\"error-view\">Failed to load FAQ</div>' },\n  delay: 200,\n  timeout: 10000\n})\n\n// Keep lightweight components as regular imports\nimport SalaryRateSelector from '@/domains/calculator/components/SalaryRateSelector.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Tabs,\n    CalculatorView,\n    ResultView,\n    FederalBudgetView,\n    BudgetCategoriesView,\n    FAQSection,\n    SalaryRateSelector,\n    ErrorBoundary\n  },\n  setup() {\n    const yearStore = useYearStore()\n    const { t, locale } = useI18n()\n    const locales = [\n      { code: 'en', labelKey: 'home.language.english' },\n      { code: 'fr', labelKey: 'home.language.french' }\n    ]\n    const currentLocale = computed(() => locale.value)\n    const setLocale = (code) => {\n      if (locale.value === code) {\n        return\n      }\n      locale.value = code\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem('locale', code)\n      }\n    }\n\n    const showBudgetCategories = ref(false)\n    const showFAQs = ref(false)\n    const activeTab = ref('calculator')\n    const tabItems = computed(() => [\n      { id: 'calculator', label: t('home.tabs.calculator'), panelId: 'calculator-panel' },\n      { id: 'breakdown', label: t('home.tabs.breakdown'), panelId: 'how-it-works' },\n      { id: 'categories', label: t('home.tabs.categories'), panelId: 'budget-categories-section' },\n      { id: 'faqs', label: t('home.tabs.faqs'), panelId: 'faq-section' },\n      { id: 'resources', label: t('home.tabs.resources'), panelId: 'resources-section' }\n    ])\n\n    const logoUrl = computed(() => {\n      return new URL('@/assets/fiscal-insights-logo.webp', import.meta.url).href\n    })\n\n    const toggleBudgetCategories = () => {\n      showBudgetCategories.value = !showBudgetCategories.value\n    }\n\n    const toggleFAQs = () => {\n      showFAQs.value = !showFAQs.value\n    }\n\n    const yearSelectorNote = computed(() => {\n      if (yearStore.selectedTaxYear === '2024') {\n        return t('home.year.note.2024')\n      }\n      if (yearStore.selectedTaxYear === '2025') {\n        return t('home.year.note.2025')\n      }\n      return t('home.year.note.default', { year: yearStore.selectedTaxYear })\n    })\n\n    watch(activeTab, (value) => {\n      if (value === 'categories' && !showBudgetCategories.value) {\n        showBudgetCategories.value = true\n      }\n      if (value === 'faqs' && !showFAQs.value) {\n        showFAQs.value = true\n      }\n    })\n\n    const handleExternalTabNavigate = (event) => {\n      const requestedTab = event.detail?.tab\n      if (!requestedTab) {\n        return\n      }\n\n      const target = tabItems.value.find((item) => item.id === requestedTab)\n      if (target) {\n        activeTab.value = target.id\n      }\n    }\n\n    onMounted(() => {\n      window.addEventListener('tax-tabs:navigate', handleExternalTabNavigate)\n    })\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('tax-tabs:navigate', handleExternalTabNavigate)\n    })\n\n    return {\n      yearStore,\n      showBudgetCategories,\n      showFAQs,\n      activeTab,\n      tabItems,\n      logoUrl,\n      locales,\n      currentLocale,\n      setLocale,\n      yearSelectorNote,\n      t,\n      toggleBudgetCategories,\n      toggleFAQs\n    }\n  }\n}\n</script>\n\n<style>\n/* Theme tokens (light + dark) */\n:root {\n  --bg: #ffffff;\n  --fg: #111827;           /* slate-900 */\n  --muted: #6b7280;        /* gray-500 */\n  --surface: #ffffff;      /* card surface */\n  --surface-muted: #f9fafb;/* subtle background */\n  --border: rgba(17, 24, 39, 0.08);\n  --accent: #22d3ee;       /* cyan-400 */\n  --success: #10b981;      /* emerald-500 */\n  --danger: #ef4444;       /* red-500 */\n  --radius: 8px;\n  --shadow-sm: 0 2px 8px rgba(0,0,0,.08);\n  --shadow: 0 8px 24px rgba(0,0,0,.12);\n  --nums: tabular-nums;\n}\n\n.dark {\n  --bg: #0b0f19;\n  --fg: #e5e7eb;\n  --muted: #9ca3af;\n  --surface: #0f1424;\n  --surface-muted: #0c1220;\n  --border: rgba(255,255,255,0.08);\n  --accent: #60a5fa;       /* blue-400 */\n  --shadow-sm: 0 2px 8px rgba(0,0,0,.35);\n  --shadow: 0 16px 40px rgba(0,0,0,.45);\n}\n/* Global crisp rendering improvements */\n* {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizeLegibility;\n  image-rendering: -webkit-optimize-contrast;\n  image-rendering: crisp-edges;\n}\n\n/* Base styles */\n#app {\n  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: var(--fg);\n  text-rendering: optimizeLegibility;\n  min-height: 100vh;\n  position: relative;\n  z-index: 1;\n}\n\n/* Import fonts */\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');\n\nbody {\n  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;\n  background: var(--bg);\n  margin: 0;\n  padding: 0;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizeLegibility;\n  min-height: 100vh;\n  overflow-x: hidden;\n}\n\n/* Improve crispness for all text elements */\nh1, h2, h3, h4, h5, h6, p, span, div, label, input, button, select, textarea {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizeLegibility;\n}\n\n/* Improve crispness for icons */\n.material-icons, .icon {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizeLegibility;\n  font-feature-settings: 'liga' 1;\n}\n\n/* Optimize for high DPI displays */\n@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n  * {\n    border-width: 0.5px;\n  }\n}\n\n/* Ensure crisp rendering on all browsers */\n@supports (-webkit-appearance: none) {\n  .calculator-container,\n  .result-box,\n  .calculator-section,\n  .faq-section,\n  .budget-categories-section,\n  .resources-section,\n  .year-selector-container,\n  .simulator-card {\n    -webkit-transform: translateZ(0);\n    transform: translateZ(0);\n    backface-visibility: hidden;\n    -webkit-backface-visibility: hidden;\n  }\n}\n\n/* Mobile scaling */\n@media (max-width: 768px) {\n  #app {\n    transform: scale(0.9);\n    transform-origin: top center;\n    width: 111.11%; /* Compensate for the 10% scale down (100/0.9) */\n    margin-left: -5.55%; /* Center the scaled content */\n  }\n}\n\n.main-container {\n  max-width: 1000px;\n  margin: 40px auto;\n  padding: 0 20px;\n}\n\n.logo-container {\n  text-align: center;\n  margin-bottom: 15px;\n}\n\n.site-logo {\n  max-width: 180px;\n  height: auto;\n  transition: transform 0.3s ease;\n}\n\n.site-logo:hover {\n  transform: scale(1.05);\n}\n\n.main-title {\n  font-size: 34px;\n  color: var(--fg);\n  margin-bottom: 8px;\n  font-weight: 700;\n  text-align: center;\n}\n\n/* Modern navigation */\n.main-navigation {\n  display: flex;\n  justify-content: center;\n  gap: 12px;\n  margin: 10px 0 0;\n}\n.header-actions {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  flex-wrap: wrap;\n  margin: 15px 0 0;\n}\n\n.language-switcher {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  background: rgba(255, 255, 255, 0.12);\n  padding: 4px;\n  border-radius: 999px;\n  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.15);\n}\n\n.language-button {\n  border: none;\n  background: transparent;\n  color: var(--fg);\n  font-weight: 600;\n  padding: 6px 12px;\n  border-radius: 999px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.language-button:hover {\n  background: rgba(255, 255, 255, 0.18);\n}\n\n.language-button.active {\n  background: linear-gradient(135deg, rgba(34, 211, 238, 0.35), rgba(59, 130, 246, 0.45));\n  color: #0f172a;\n  box-shadow: 0 10px 22px rgba(34, 211, 238, 0.35);\n}\n\n@media (prefers-color-scheme: dark) {\n  .language-switcher {\n    background: rgba(15, 23, 42, 0.65);\n  }\n\n  .language-button:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  .language-button.active {\n    color: #0f172a;\n  }\n}\n\n.nav-link {\n  color: var(--fg);\n  text-decoration: none;\n  padding: 8px 12px;\n  border-radius: var(--radius);\n  border: 1px solid var(--border);\n  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease;\n}\n.nav-link:hover {\n  background: var(--surface-muted);\n}\n.nav-link.simulator-link {\n  background: var(--accent);\n  color: #001018;\n  border-color: transparent;\n  box-shadow: var(--shadow-sm);\n}\n.nav-link.simulator-link:hover {\n  box-shadow: var(--shadow);\n}\n\n.welcome-link {\n  display: block;\n  text-align: center;\n  color: #27ae60;\n  text-decoration: none;\n  margin-bottom: 10px;\n  font-size: 18px;\n  transition: color 0.3s;\n}\n\n.welcome-link:hover {\n  color: #219a52;\n  text-decoration: underline;\n}\n\n.subtitle {\n  font-size: 18px;\n  color: var(--muted);\n  text-align: center;\n  max-width: 800px;\n  margin: 0 auto 30px;\n}\n\n.section-title {\n  color: #34495e;\n  font-size: 24px;\n  margin-top: 40px;\n  margin-bottom: 20px;\n  font-weight: 600;\n  text-align: center;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease;\n}\n\n.section-title:hover {\n  transform: scale(1.02);\n}\n\n.section-description {\n  text-align: center;\n  color: #7f8c8d;\n  margin-bottom: 30px;\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.salary-selector-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 30px;\n}\n\n.salary-selector {\n  display: flex;\n  overflow-x: auto;\n  scrollbar-width: none;\n}\n\n.salary-selector::-webkit-scrollbar {\n  display: none;\n}\n\n.salary-option {\n  padding: 10px 20px;\n  margin: 0 5px;\n  background-color: #ecf0f1;\n  border-radius: 30px;\n  cursor: pointer;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  transform-style: preserve-3d;\n  perspective: 1000px;\n}\n\n.salary-option:hover {\n  background-color: #27ae60;\n  color: #ffffff;\n  transform: translateY(-2px) rotateX(5deg);\n  box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);\n}\n\n.salary-option.active {\n  background-color: #27ae60;\n  color: #ffffff;\n  font-weight: 600;\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);\n}\n\n.input-field::placeholder {\n  font-style: italic;\n  color: #7f8c8d;\n}\n\n.select-region option[disabled],\n#maritalStatus option[disabled] {\n  font-style: italic;\n  color: #7f8c8d;\n}\n\n.calculator-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n}\n\n.calculator-container,\n.result-box,\n.calculator-section,\n.faq-section,\n.budget-categories-section,\n.resources-section,\n.year-selector-container {\n  background: var(--surface) !important;\n  border-radius: var(--radius);\n  box-shadow: var(--shadow-sm);\n  border: 1px solid var(--border);\n  flex: 1;\n  min-width: 300px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.calculator-container:hover,\n.result-box:hover {\n  transform: translateY(-5px);\n  box-shadow:\n    0 15px 30px rgba(0, 0, 0, 0.25),\n    0 10px 10px rgba(0, 0, 0, 0.22);\n}\n\n.title {\n  color: #2c3e50;\n  font-size: 24px;\n  margin-bottom: 10px;\n  font-weight: 600;\n}\n\n.description {\n  color: #7f8c8d;\n  font-size: 18px;\n  margin-bottom: 20px;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  margin-bottom: 25px;\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 10px;\n  margin: 15px 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.input-group:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);\n}\n\n.select-region,\n.input-field {\n  width: 100%;\n  padding: 14px;\n  border: 1px solid #bdc3c7;\n  border-radius: 6px;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.select-region:focus,\n.input-field:focus {\n  border-color: #27ae60;\n  box-shadow: 0 5px 15px rgba(39, 174, 96, 0.2);\n  transform: translateY(-2px);\n}\n\n.input-label {\n  font-size: 16px;\n  color: #2c3e50;\n  margin-bottom: 5px;\n}\n\n.result-title {\n  font-size: 22px;\n  margin-bottom: 15px;\n  font-weight: 600;\n}\n\n.result-item {\n  display: flex;\n  justify-content: space-between;\n  font-size: 18px;\n  margin-bottom: 10px;\n}\n\n.total-tax {\n  border-top: 1px solid #bdc3c7;\n  padding-top: 10px;\n  font-weight: bold;\n}\n\n.net-income {\n  border-top: 2px solid #27ae60;\n  padding-top: 10px;\n  font-size: 20px;\n  font-weight: bold;\n  color: #27ae60;\n}\n\n.placeholder-text {\n  font-size: 16px;\n  color: #e74c3c;\n  text-align: center;\n  margin-top: 50px;\n}\n\n.allocation-description {\n  display: block;  \n  text-align: center;\n  margin: 0 auto 20px; \n  width: 100%; \n}\n\n\n.export-button {\n  margin-top: 20px;\n  padding: 10px 20px;\n  background-color: #27ae60;\n  color: #ffffff;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s;\n}\n\n.export-button:hover {\n  background-color: #1e8449;\n}\n\n.tax-pie-chart-container {\n  position: relative;\n  height: 400px;\n  width: 100%;\n  margin: 40px 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.tax-pie-chart-container:hover {\n  transform: scale(1.02);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n/*.tax-pie-chart-container canvas {\n  max-width: 100%;\n  height: 100% !important;\n}*/\n\n\n\n/*.pie-chart-item {\n  flex: 0 0 auto;\n  min-width: 500px;\n  max-width: 500px;\n  height: 500px;\n  width: 500px;\n  margin: 40px auto;\n  position: relative;\n}*/\n\n/*.pie-chart-item canvas {\n  width: 100% !important;\n  height: 100% !important;\n}*/\n\n/*.allocation-total {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 18px;\n  margin-bottom: 20px;\n  font-weight: bold;\n  color: #2c3e50;\n  background: linear-gradient(135deg, #f8f9fa, #e0e0e0);\n  padding: 15px 20px;\n  border-radius: 8px;\n  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);\n}*/\n\n.allocation-filters {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 20px;\n  justify-content: center;\n}\n\n.filter-label {\n  font-size: 16px;\n  color: #2c3e50;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  cursor: pointer;\n  transition: color 0.3s;\n}\n\n.filter-label:hover {\n  color: #2980b9;\n}\n\n.sort-button {\n  background-color: #2980b9;\n  color: #ffffff;\n  border: none;\n  padding: 8px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  margin-bottom: 10px;\n}\n\n.sort-button:hover {\n  background-color: #1f6391;\n}\n\n.sort-button.asc {\n  background-color: #27ae60;\n}\n\n.sort-button.desc {\n  background-color: #c0392b;\n}\n\n.allocation-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 10px;\n}\n\n.allocation-table th,\n.allocation-table td {\n  border: 1px solid #bdc3c7;\n  padding: 10px;\n  text-align: left;\n}\n\n.allocation-table th {\n  background-color: #34495e;\n  color: #ffffff;\n}\n\n.allocation-table tbody tr:nth-child(even) {\n  background-color: #f2f2f2;\n}\n\n.allocation-table tbody tr:hover {\n  background-color: #e0e0e0;\n}\n\n.toggle-all-button {\n  padding: 8px 16px;\n  background-color: #8e44ad;\n  color: #ffffff;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: background-color 0.3s;\n}\n\n.toggle-all-button:hover {\n  background-color: #732d91;\n}\n\n.toggle-description-button {\n  margin-top: 10px;\n  padding: 8px 16px;\n  background-color: #3498db;\n  color: #ffffff;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: background-color 0.3s;\n}\n\n.toggle-description-button:hover {\n  background-color: #2980b9;\n}\n\n.budget-category {\n  margin-bottom: 20px;\n}\n\n.category-description {\n  margin-top: 15px;\n}\n\n.subsections {\n  margin-top: 15px;\n  padding-left: 20px;\n  border-left: 3px solid #bdc3c7;\n}\n\n.subsection {\n  margin-top: 10px;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n/* Collapsible section styling */\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.toggle-section-button {\n  background-color: #27ae60;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 8px 16px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.3s, transform 0.2s;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.toggle-section-button:hover {\n  background-color: #219a52;\n  transform: translateY(-2px);\n}\n\n.toggle-section-button:active {\n  transform: translateY(0);\n}\n\n/* Animation for collapsible sections */\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.5s, max-height 0.5s;\n  max-height: 1000px;\n  overflow: hidden;\n}\n\n.fade-enter-from, .fade-leave-to {\n  opacity: 0;\n  max-height: 0;\n}\n\n/* Footer Styles */\n.site-footer {\n  background-color: #000000;\n  color: #ecf0f1;\n  padding: 40px 20px 20px;\n  margin-top: 60px;\n  border-radius: 10px 10px 0 0;\n  box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);\n}\n\n.footer-content {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.footer-section {\n  flex: 1;\n  min-width: 250px;\n  margin-bottom: 30px;\n  padding: 0 15px;\n}\n\n.footer-section h3 {\n  color: #27ae60;\n  margin-bottom: 20px;\n  font-size: 20px;\n  position: relative;\n  padding-bottom: 10px;\n  font-weight: 600;\n}\n\n.footer-section h3:after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 50px;\n  height: 2px;\n  background-color: #27ae60;\n}\n\n.footer-section p {\n  color: #bdc3c7;\n  line-height: 1.6;\n  margin-bottom: 10px;\n}\n\n.social-links {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  margin-top: 15px;\n}\n\n.social-link {\n  display: flex;\n  align-items: center;\n  color: #bdc3c7;\n  text-decoration: none;\n  transition: all 0.3s ease;\n  padding: 10px;\n  border-radius: 8px;\n  background-color: rgba(255, 255, 255, 0.05);\n}\n\n.social-icon {\n  width: 32px;\n  height: 32px;\n  margin-right: 15px;\n  object-fit: contain;\n  transition: transform 0.3s ease;\n  border-radius: 6px;\n  padding: 3px;\n  background-color: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  filter: brightness(0) invert(1);\n}\n\n.social-link:hover .social-icon {\n  transform: scale(1.2);\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.social-link:hover {\n  color: #27ae60;\n  transform: translateX(5px);\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.footer-bottom {\n  text-align: center;\n  padding-top: 20px;\n  margin-top: 20px;\n  border-top: 1px solid #1a1a1a;\n}\n\n.footer-bottom p {\n  color: #95a5a6;\n  font-size: 14px;\n}\n\n@media (max-width: 768px) {\n  .footer-content {\n    flex-direction: column;\n  }\n  \n  .footer-section {\n    margin-bottom: 30px;\n  }\n  \n  .social-link {\n    padding: 12px;\n  }\n  \n  .social-icon {\n    width: 28px;\n    height: 28px;\n  }\n}\n\nfooter {\n  background: #ffffff;\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  margin-top: 60px;\n  text-align: center;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\nfooter:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\nfooter p {\n  color: #7f8c8d;\n  margin: 10px 0;\n  transition: transform 0.3s ease;\n}\n\nfooter p:hover {\n  transform: translateX(5px);\n  color: #34495e;\n}\n\n.calculator-section {\n  background: #ffffff;\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  margin: 40px 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.calculator-section:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n}\n\n.budget-categories-section {\n  background: #ffffff;\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  margin: 40px 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.budget-categories-section:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n}\n\n.faq-section {\n  background: #ffffff;\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  margin: 40px 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.faq-section:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n}\n\n.faq-item {\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 10px;\n  margin: 15px 0;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.faq-item:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);\n}\n\n.resources-section {\n  margin: 40px auto;\n  padding: 20px;\n  background: #ffffff;\n  border-radius: 12px;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19);\n  text-align: center;\n}\n\n.resources-links {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 20px;\n  margin-top: 20px;\n}\n\n.resource-link {\n  display: inline-block;\n  padding: 10px 20px;\n  background-color: #ecf0f1;\n  color: #34495e;\n  text-decoration: none;\n  border-radius: 30px;\n  transition: all 0.3s ease;\n}\n\n.resource-link:hover {\n  background-color: #27ae60;\n  color: #ffffff;\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);\n}\n\n.beta-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\n  color: #ffffff;\n  border: none;\n  border-radius: 30px;\n  cursor: pointer;\n  font-weight: bold;\n  font-size: 16px;\n  text-decoration: none;\n  box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3);\n  transition: all 0.3s ease;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  animation: pulse 2s infinite;\n}\n\n.beta-subtext {\n  font-size: 12px;\n  opacity: 0.9;\n  margin-top: 3px;\n  font-weight: normal;\n}\n\n.beta-button:hover {\n  background: linear-gradient(135deg, #219a52, #27ae60);\n  transform: translateY(-3px);\n  box-shadow: 0 6px 15px rgba(39, 174, 96, 0.5);\n  animation: none;\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n    box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3);\n  }\n  50% {\n    transform: scale(1.05);\n    box-shadow: 0 6px 15px rgba(39, 174, 96, 0.5);\n  }\n  100% {\n    transform: scale(1);\n    box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3);\n  }\n}\n\n.main-navigation {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  margin: 15px 0;\n  perspective: 1000px;\n  transform-style: preserve-3d;\n}\n\n.nav-link {\n  color: #3498db;\n  text-decoration: none;\n  font-weight: 600;\n  padding: 10px 20px;\n  border-radius: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: rgba(255, 255, 255, 0.8);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  transform-style: preserve-3d;\n  transform: translateZ(0);\n  position: relative;\n  overflow: hidden;\n  min-width: 120px;\n  text-align: center;\n}\n\n.nav-link::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    120deg,\n    transparent,\n    rgba(255, 255, 255, 0.3),\n    transparent\n  );\n  transition: 0.5s;\n}\n\n.nav-link:hover {\n  transform: translateY(-2px) translateZ(20px) rotateX(5deg);\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);\n}\n\n.nav-link:hover::before {\n  left: 100%;\n}\n\n.nav-link.router-link-active {\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\n  color: white;\n  transform: translateY(-2px) translateZ(30px);\n  box-shadow: 0 8px 20px rgba(39, 174, 96, 0.4);\n  border: none;\n}\n\n.simulator-link {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);\n}\n\n.simulator-link:hover {\n  background: linear-gradient(135deg, #2980b9, #2471a3);\n  box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);\n}\n\n/* Touch Device Optimizations */\n@media (hover: none) {\n  .nav-link:hover {\n    transform: none;\n  }\n  \n  .nav-link:active {\n    transform: translateY(-2px) translateZ(10px) rotateX(2deg);\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .nav-link,\n  .nav-link::before {\n    transition: none;\n    transform: none !important;\n  }\n}\n\n/* High Contrast Mode */\n@media (forced-colors: active) {\n  .nav-link {\n    border: 2px solid CanvasText;\n  }\n  \n  .nav-link.router-link-active {\n    border: 2px solid CanvasText;\n  }\n}\n\n/* Mobile Responsiveness */\n@media (max-width: 768px) {\n  .main-navigation {\n    flex-wrap: wrap;\n    gap: 10px;\n  }\n  \n  .nav-link {\n    padding: 8px 16px;\n    font-size: 0.9rem;\n    min-width: 100px;\n  }\n}\n\n.resources-description {\n  text-align: center;\n  margin-bottom: 20px;\n  color: #555;\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n  .main-title {\n    font-size: 1.8rem;\n    margin-bottom: 1.5rem;\n  }\n  \n  .subtitle {\n    font-size: 0.9rem;\n    margin-bottom: 1.5rem;\n  }\n  \n  .main-navigation {\n    flex-wrap: wrap;\n    gap: 1rem;\n    padding: 1rem;\n  }\n  \n  .nav-link {\n    font-size: 0.9rem;\n    padding: 0.75rem 1rem;\n    margin: 0.25rem;\n  }\n  \n  .calculator-section, .faq-section, .budget-categories-section, .resources-section {\n    padding: 1.5rem;\n    margin: 1.5rem 0;\n  }\n  \n  .section-title {\n    font-size: 1.4rem;\n    margin-bottom: 1.25rem;\n  }\n  \n  .section-description {\n    font-size: 0.9rem;\n    margin-bottom: 1.5rem;\n    line-height: 1.6;\n  }\n  \n  .resources-description {\n    font-size: 0.9rem;\n    margin: 1.5rem auto;\n    padding: 0 1rem;\n  }\n  \n  .resource-link {\n    padding: 0.75rem 1.25rem;\n    font-size: 0.9rem;\n    margin: 0.5rem 0;\n  }\n  \n  .site-logo {\n    max-width: 140px;\n    margin: 1rem auto;\n  }\n  \n  .footer-section {\n    padding: 1.5rem;\n    margin: 1rem 0;\n  }\n  \n  .footer-section h3 {\n    font-size: 1.1rem;\n    margin-bottom: 1rem;\n  }\n  \n  .footer-section p, .footer-bottom p {\n    font-size: 0.85rem;\n    margin: 0.75rem 0;\n  }\n  \n  .social-link {\n    font-size: 0.85rem;\n    padding: 0.5rem;\n    margin: 0.25rem;\n  }\n  \n  .social-icon {\n    width: 16px;\n    height: 16px;\n    margin: 0 0.25rem;\n  }\n  \n  .beta-button {\n    padding: 0.75rem 1.25rem;\n    font-size: 14px;\n    bottom: 1.5rem;\n    right: 1.5rem;\n  }\n  \n  .beta-subtext {\n    font-size: 10px;\n    margin-top: 0.25rem;\n  }\n}\n\n/* Global Button Styles */\nbutton, .button {\n  padding: 0.75rem 1.5rem;\n  background: #3498db;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\nbutton:hover, .button:hover {\n  background: #2980b9;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n/* Secondary Button Style */\nbutton.secondary, .button.secondary {\n  background: #718096;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\nbutton.secondary:hover, .button.secondary:hover {\n  background: #4a5568;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n/* Success Button Style */\nbutton.success, .button.success {\n  background: #38a169;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\nbutton.success:hover, .button.success:hover {\n  background: #2f855a;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n/* Danger Button Style */\nbutton.danger, .button.danger {\n  background: #e53e3e;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\nbutton.danger:hover, .button.danger:hover {\n  background: #c53030;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n/* Small Button Style */\nbutton.small, .button.small {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n}\n\n/* Large Button Style */\nbutton.large, .button.large {\n  padding: 1rem 2rem;\n  font-size: 1.125rem;\n}\n\n/* Disabled Button Style */\nbutton:disabled, .button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  background: #cbd5e0;\n  box-shadow: none;\n}\n\n/* Remove 3D effects and complex transitions */\nbutton::before, .button::before {\n  display: none;\n}\n\n/* Touch Device Optimizations */\n@media (hover: none) {\n  button:hover, .button:hover {\n    transform: none;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n  \n  button:active, .button:active {\n    background: #2980b9;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  button, .button {\n    transition: none;\n  }\n}\n\n/* High Contrast Mode */\n@media (forced-colors: active) {\n  button, .button {\n    border: 2px solid CanvasText;\n  }\n}\n\n.year-selector-section {\n  margin: 2rem 0;\n  perspective: 1000px;\n}\n\n.year-selector-container {\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 2rem;\n  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  animation: fadeIn 0.6s ease-out forwards;\n  transform-style: preserve-3d;\n}\n\n.year-selector-title {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #2c3e50;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  background: linear-gradient(135deg, #2c3e50, #3498db);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease;\n}\n\n.year-selector-title:hover {\n  transform: scale(1.02) translateZ(20px);\n}\n\n.year-selector {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  perspective: 1000px;\n}\n\n.year-button {\n  padding: 0.75rem 1.5rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  border-radius: 12px;\n  font-weight: 500;\n  color: #2c3e50;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  transform-style: preserve-3d;\n  transform: translateZ(0);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n  min-width: 120px;\n  text-align: center;\n}\n\n.year-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    120deg,\n    transparent,\n    rgba(255, 255, 255, 0.3),\n    transparent\n  );\n  transition: 0.5s;\n}\n\n.year-button:hover {\n  transform: translateY(-2px) translateZ(20px) rotateX(5deg);\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);\n}\n\n.year-button:hover::before {\n  left: 100%;\n}\n\n.year-button.active {\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\n  color: white;\n  transform: translateY(-2px) translateZ(30px);\n  box-shadow: 0 8px 20px rgba(39, 174, 96, 0.4);\n  border: none;\n}\n\n.year-selector-note {\n  text-align: center;\n  color: #4a5568;\n  font-size: 0.9rem;\n  margin-top: 1rem;\n  padding: 0.75rem;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.year-selector-note:hover {\n  background: rgba(255, 255, 255, 0.7);\n  transform: translateY(-1px);\n}\n\n/* Touch Device Optimizations */\n@media (hover: none) {\n  .year-button:hover {\n    transform: none;\n  }\n  \n  .year-button:active {\n    transform: translateY(-2px) translateZ(10px) rotateX(2deg);\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .year-button,\n  .year-button::before,\n  .year-selector-title,\n  .year-selector-note {\n    transition: none;\n    transform: none !important;\n  }\n}\n\n/* High Contrast Mode */\n@media (forced-colors: active) {\n  .year-button {\n    border: 2px solid CanvasText;\n  }\n  \n  .year-button.active {\n    border: 2px solid CanvasText;\n  }\n}\n\n/* 1. Add new highlight classes */\n.main-title--highlight {\n  color: #fff;\n  font-weight: 700;\n  text-shadow: 0 4px 18px rgba(0,0,0,0.45), 0 1px 0 #222;\n}\n.subtitle--highlight {\n  color: #f3f6fa;\n  text-shadow: 0 3px 12px rgba(0,0,0,0.45), 0 1px 0 #222;\n}\n.section-title--highlight {\n  color: #fff;\n  font-weight: 700;\n  text-shadow: 0 4px 18px rgba(0,0,0,0.45), 0 1px 0 #222;\n}\n.section-description--highlight {\n  color: #f3f6fa;\n  text-shadow: 0 3px 12px rgba(0,0,0,0.45), 0 1px 0 #222;\n}\n\n/* Background is handled by public/index.html */\n\n.calculator-tabs {\n  margin-top: 2.5rem;\n}\n\n.tax-highlight {\n  animation: taxHighlightPulse 1.6s ease forwards;\n  box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.35);\n  border-radius: 20px;\n}\n\n@keyframes taxHighlightPulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.45);\n  }\n  55% {\n    box-shadow: 0 0 0 18px rgba(34, 211, 238, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(34, 211, 238, 0);\n  }\n}\n\n/* Loading and Error States for Lazy Components */\n.loading-view {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  color: #3498db;\n  font-weight: 600;\n  font-size: 1.1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  margin: 2rem auto;\n  max-width: 600px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  animation: loadingPulse 1.5s ease-in-out infinite;\n}\n\n.loading-view::before {\n  content: \"\";\n  margin-right: 0.75rem;\n  font-size: 1.5em;\n  animation: spin 2s linear infinite;\n}\n\n.error-view {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  color: #e74c3c;\n  font-weight: 600;\n  font-size: 1.1rem;\n  background: rgba(255, 245, 245, 0.95);\n  border: 2px solid #e74c3c;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  margin: 2rem auto;\n  max-width: 600px;\n  box-shadow: 0 4px 6px rgba(231, 76, 60, 0.2);\n}\n\n.error-view::before {\n  content: \"\";\n  margin-right: 0.75rem;\n  font-size: 1.5em;\n}\n\n@keyframes loadingPulse {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.7;\n    transform: scale(1.02);\n  }\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","<template>\n  <div v-if=\"error\" class=\"error-boundary\">\n    <div class=\"error-content\">\n      <span class=\"material-icons error-icon\">error_outline</span>\n      <h3 class=\"error-title\">Something went wrong</h3>\n      <p class=\"error-message\">{{ error.message || 'An unexpected error occurred' }}</p>\n      <div class=\"error-actions\">\n        <button class=\"error-button primary\" @click=\"resetError\">Try Again</button>\n        <button class=\"error-button secondary\" @click=\"reportError\">Report Issue</button>\n      </div>\n      <details v-if=\"showDetails\" class=\"error-details\">\n        <summary>Technical Details</summary>\n        <pre class=\"error-stack\">{{ error.stack }}</pre>\n        <p class=\"error-context\">Component: {{ componentName }}</p>\n        <p class=\"error-context\">Timestamp: {{ errorTimestamp }}</p>\n      </details>\n    </div>\n  </div>\n  <slot v-else />\n</template>\n\n<script setup>\nimport { ref, onErrorCaptured, provide } from 'vue';\nimport { handleError } from '@/utils/errorHandler.js';\n\nconst props = defineProps({\n  componentName: {\n    type: String,\n    default: 'Unknown Component'\n  },\n  fallback: {\n    type: Function,\n    default: null\n  }\n});\n\nconst error = ref(null);\nconst errorTimestamp = ref(null);\nconst showDetails = ref(false);\n\n// Provide error boundary context to child components\nprovide('errorBoundary', {\n  reportError: (err) => {\n    error.value = err;\n    errorTimestamp.value = new Date().toISOString();\n  }\n});\n\n// Capture errors from child components\nonErrorCaptured((err, instance, info) => {\n  console.error(`[ErrorBoundary] Error in ${props.componentName}:`, err, info);\n  \n  // Handle chunk loading errors specifically\n  if (err.name === 'ChunkLoadError' || err.message?.includes('Loading chunk')) {\n    console.error(`[ErrorBoundary] Chunk loading error in ${props.componentName}:`, err);\n    // Try to reload the page to recover from chunk loading errors\n    setTimeout(() => {\n      if (window.location) {\n        window.location.reload();\n      }\n    }, 2000);\n  }\n  \n  // Log error with context\n  handleError(err, (msg) => {\n    console.error(`[ErrorBoundary] ${msg}`);\n  });\n  \n  // Store error details\n  error.value = err;\n  errorTimestamp.value = new Date().toISOString();\n  \n  // Prevent error from propagating up\n  return false;\n});\n\nconst resetError = () => {\n  error.value = null;\n  errorTimestamp.value = null;\n  showDetails.value = false;\n};\n\nconst reportError = () => {\n  // Send error to monitoring service\n  if (process.env.NODE_ENV === 'production') {\n    // Integrate with Sentry, LogRocket, etc.\n    console.error('[ErrorBoundary] Reporting error:', {\n      error: error.value,\n      component: props.componentName,\n      timestamp: errorTimestamp.value,\n      userAgent: navigator.userAgent,\n      url: window.location.href\n    });\n  }\n  showDetails.value = true;\n};\n</script>\n\n<style scoped>\n.error-boundary {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(5px);\n}\n\n.error-content {\n  background: white;\n  padding: 2rem;\n  border-radius: 1rem;\n  text-align: center;\n  max-width: 500px;\n  width: 90%;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19);\n}\n\n.error-icon {\n  font-size: 3rem;\n  color: #e53e3e;\n  margin-bottom: 1rem;\n}\n\n.error-title {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 0.5rem;\n}\n\n.error-message {\n  color: #4a5568;\n  margin-bottom: 1.5rem;\n}\n\n.error-actions {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-bottom: 1rem;\n}\n\n.error-button {\n  padding: 0.5rem 1rem;\n  border-radius: 0.5rem;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.error-button.primary {\n  background: #4299e1;\n  color: white;\n}\n\n.error-button.primary:hover {\n  background: #3182ce;\n}\n\n.error-button.secondary {\n  background: #e2e8f0;\n  color: #4a5568;\n}\n\n.error-button.secondary:hover {\n  background: #cbd5e0;\n}\n\n.error-details {\n  margin-top: 1rem;\n  text-align: left;\n}\n\n.error-stack {\n  background: #f7fafc;\n  padding: 1rem;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  overflow-x: auto;\n  white-space: pre-wrap;\n}\n\n.error-context {\n  font-size: 0.875rem;\n  color: #718096;\n  margin: 0.5rem 0;\n}\n</style> ","import script from \"./ErrorBoundary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ErrorBoundary.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ErrorBoundary.vue?vue&type=style&index=0&id=6666b916&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6666b916\"]])\n\nexport default __exports__","<script setup>\nimport { computed, onBeforeUpdate, ref, watch } from 'vue'\n\ndefineOptions({\n  name: 'TabsComponent'\n})\n\nconst props = defineProps({\n  items: {\n    type: Array,\n    required: true,\n    validator: (value) => Array.isArray(value) && value.every(item => item && typeof item.id === 'string' && typeof item.label === 'string')\n  },\n  modelValue: {\n    type: String,\n    default: ''\n  },\n  variant: {\n    type: String,\n    default: 'default'\n  },\n  orientation: {\n    type: String,\n    default: 'horizontal',\n    validator: (value) => ['horizontal', 'vertical'].includes(value)\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'change'])\n\nconst instanceId = `tabs-${Math.random().toString(36).slice(2, 10)}`\n\nconst tabRefs = ref([])\n\nconst normalizedItems = computed(() => props.items.map(item => ({\n  ...item,\n  panelId: item.panelId || `${instanceId}-panel-${item.id}`\n})))\n\nconst activeTab = ref('')\n\nconst getFallbackId = () => normalizedItems.value[0]?.id || ''\n\nconst setActive = (id, { emitChange = false } = {}) => {\n  const nextId = id ?? ''\n  const changed = nextId !== activeTab.value\n\n  if (changed) {\n    activeTab.value = nextId\n    emit('update:modelValue', nextId)\n    if (emitChange) {\n      emit('change', nextId)\n    }\n  } else if (emitChange) {\n    emit('change', nextId)\n  }\n}\n\nwatch(\n  normalizedItems,\n  (items) => {\n    if (!items.length) {\n      activeTab.value = ''\n      emit('update:modelValue', '')\n      return\n    }\n\n    const hasActive = items.some(item => item.id === activeTab.value)\n    if (!hasActive) {\n      const fallback = props.modelValue && items.some(item => item.id === props.modelValue)\n        ? props.modelValue\n        : getFallbackId()\n      setActive(fallback, { emitChange: false })\n    }\n  },\n  { immediate: true, deep: true }\n)\n\nwatch(\n  () => props.modelValue,\n  (value) => {\n    if (!value) {\n      if (!activeTab.value && normalizedItems.value.length) {\n        setActive(getFallbackId(), { emitChange: false })\n      }\n      return\n    }\n\n    if (value !== activeTab.value) {\n      setActive(value, { emitChange: false })\n    }\n  }\n)\n\nonBeforeUpdate(() => {\n  tabRefs.value = []\n})\n\nconst classes = computed(() => ['tabs', `tabs--${props.variant}`].filter(Boolean))\n\nconst getTabId = (id) => `${instanceId}-tab-${id}`\n\nconst getPanelId = (id) => {\n  const match = normalizedItems.value.find(item => item.id === id)\n  return match ? match.panelId : `${instanceId}-panel-${id}`\n}\n\nconst getPanelProps = (id) => ({\n  id: getPanelId(id),\n  role: 'tabpanel',\n  tabindex: activeTab.value === id ? 0 : -1,\n  'aria-labelledby': getTabId(id),\n  'aria-hidden': activeTab.value === id ? 'false' : 'true'\n})\n\nconst focusTab = (index) => {\n  const el = tabRefs.value[index]\n  if (el) {\n    el.focus()\n  }\n}\n\nconst selectByIndex = (index) => {\n  const item = normalizedItems.value[index]\n  if (!item) {\n    return\n  }\n  setActive(item.id, { emitChange: true })\n  focusTab(index)\n}\n\nconst onKeydown = (event, index) => {\n  const { key } = event\n  const total = normalizedItems.value.length\n  if (!total) {\n    return\n  }\n\n  const isHorizontal = props.orientation === 'horizontal'\n  const prevKey = isHorizontal ? 'ArrowLeft' : 'ArrowUp'\n  const nextKey = isHorizontal ? 'ArrowRight' : 'ArrowDown'\n\n  if (key === nextKey) {\n    event.preventDefault()\n    const nextIndex = (index + 1) % total\n    selectByIndex(nextIndex)\n  } else if (key === prevKey) {\n    event.preventDefault()\n    const prevIndex = (index - 1 + total) % total\n    selectByIndex(prevIndex)\n  } else if (key === 'Home') {\n    event.preventDefault()\n    selectByIndex(0)\n  } else if (key === 'End') {\n    event.preventDefault()\n    selectByIndex(total - 1)\n  } else if (key === 'Enter' || key === ' ') {\n    event.preventDefault()\n    const item = normalizedItems.value[index]\n    if (item) {\n      setActive(item.id, { emitChange: true })\n    }\n  }\n}\n\nconst onClickTab = (id) => {\n  if (id !== activeTab.value) {\n    setActive(id, { emitChange: true })\n  }\n}\n\nconst setTabRef = (el, index) => {\n  if (el) {\n    tabRefs.value[index] = el\n  }\n}\n\nconst slotBinding = computed(() => ({\n  activeTab: activeTab.value,\n  getPanelProps,\n  getPanelId,\n  getTabId\n}))\n</script>\n\n<template>\n  <div :class=\"classes\">\n    <div\n      class=\"tabs__list\"\n      role=\"tablist\"\n      :aria-orientation=\"orientation\"\n    >\n      <button\n        v-for=\"(tab, index) in normalizedItems\"\n        :key=\"tab.id\"\n        type=\"button\"\n        class=\"tabs__tab\"\n        :class=\"{ 'is-active': tab.id === activeTab }\"\n        :id=\"getTabId(tab.id)\"\n        role=\"tab\"\n        :aria-selected=\"tab.id === activeTab\"\n        :aria-controls=\"tab.panelId\"\n        :tabindex=\"tab.id === activeTab ? 0 : -1\"\n        @click=\"onClickTab(tab.id)\"\n        @keydown=\"onKeydown($event, index)\"\n        :ref=\"(el) => setTabRef(el, index)\"\n      >\n        <span class=\"tabs__label\">{{ tab.label }}</span>\n      </button>\n    </div>\n    <div class=\"tabs__panels\">\n      <slot v-bind=\"slotBinding\" />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.tabs {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.tabs__list {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.35rem 0.75rem;\n  border-radius: 9999px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(17, 24, 39, 0.08);\n  box-shadow: 0 12px 24px rgba(15, 23, 42, 0.18);\n  overflow-x: auto;\n  scrollbar-width: thin;\n  backdrop-filter: blur(14px);\n}\n\n\n.tabs__list::-webkit-scrollbar {\n  height: 6px;\n}\n\n.tabs__list::-webkit-scrollbar-thumb {\n  background: rgba(17, 24, 39, 0.2);\n  border-radius: 9999px;\n}\n\n.tabs__tab {\n  appearance: none;\n  border: 1px solid transparent;\n  background: transparent;\n  color: var(--muted, #4b5563);\n  padding: 0.6rem 1.25rem;\n  font-weight: 600;\n  border-radius: 9999px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n}\n\n.tabs__tab:hover {\n  color: var(--fg, #111827);\n  background: rgba(17, 24, 39, 0.06);\n}\n\n.tabs__tab:focus-visible {\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.35);\n}\n\n.tabs__tab.is-active {\n  color: var(--fg, #111827);\n  background: rgba(34, 211, 238, 0.16);\n  border-color: rgba(34, 211, 238, 0.4);\n  box-shadow: 0 6px 18px rgba(34, 211, 238, 0.18);\n}\n\n.tabs__panels {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.dark .tabs__list {\n  background: rgba(15, 23, 42, 0.88);\n  border-color: rgba(148, 163, 184, 0.26);\n  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.45);\n}\n\n.dark .tabs__tab {\n  color: rgba(226, 232, 240, 0.78);\n}\n\n.dark .tabs__tab:hover {\n  color: rgba(248, 250, 252, 0.92);\n  background: rgba(248, 250, 252, 0.08);\n}\n\n.dark .tabs__tab.is-active {\n  color: #f8fafc;\n  background: rgba(34, 211, 238, 0.28);\n  border-color: rgba(34, 211, 238, 0.5);\n  box-shadow: 0 12px 28px rgba(34, 211, 238, 0.35);\n}\n\n.tabs--primary .tabs__tab.is-active {\n  background: linear-gradient(135deg, rgba(34, 211, 238, 0.28), rgba(16, 185, 129, 0.24));\n  border-color: rgba(34, 211, 238, 0.55);\n  box-shadow: 0 8px 20px rgba(34, 211, 238, 0.25);\n}\n\n.tabs--primary .tabs__tab:hover {\n  background: rgba(34, 211, 238, 0.18);\n}\n\n@media (max-width: 768px) {\n  .tabs__tab {\n    flex: 1 0 auto;\n    padding: 0.55rem 1rem;\n    font-size: 0.9rem;\n  }\n}\n</style>\n","import script from \"./Tabs.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Tabs.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Tabs.vue?vue&type=style&index=0&id=7d38301f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d38301f\"]])\n\nexport default __exports__","<template>\n  <section class=\"salary-selector-section\">\n    <h3 class=\"section-title\">\n      {{ t('calculator.salary.title') }}\n    </h3>\n    <div class=\"salary-selector-wrapper\">\n      <div class=\"salary-selector\">\n        <div\n          v-for=\"option in localizedSalaryOptions\"\n          :key=\"option.value\"\n          :class=\"['salary-option', { active: selectedSalaryRate === option.value }]\"\n          role=\"button\"\n          tabindex=\"0\"\n          :aria-pressed=\"selectedSalaryRate === option.value\"\n          :aria-label=\"t('calculator.salary.aria', { label: t(`calculator.salary.options.${option.key}`) })\"\n          @click=\"selectSalaryRate(option.value)\"\n          @keydown.enter.prevent=\"selectSalaryRate(option.value)\"\n          @keydown.space.prevent=\"selectSalaryRate(option.value)\"\n        >\n          {{ t(`calculator.salary.options.${option.key}`) }}\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup>\n/* eslint-disable */\nimport { useSalaryStore } from '@/domains/calculator/store/salary.js'\nimport { salaryOptions as salaryOptionsRaw } from '@/domains/calculator/constants/taxData.js'\nimport { storeToRefs } from 'pinia'\nimport { computed } from 'vue'\nimport { useI18n } from '@/i18n'\n\nconst salaryStore = useSalaryStore()\nconst { selectSalaryRate } = salaryStore\nconst { selectedSalaryRate } = storeToRefs(salaryStore)\nconst { t } = useI18n()\n\nconst optionKeyMap = {\n  Annual: 'annual',\n  Monthly: 'monthly',\n  'Bi-weekly': 'biweekly',\n  Weekly: 'weekly',\n  Daily: 'daily',\n  Hourly: 'hourly'\n}\n\nconst localizedSalaryOptions = computed(() =>\n  salaryOptionsRaw.map((option) => ({\n    ...option,\n    key: optionKeyMap[option.value] || option.value.toLowerCase()\n  }))\n)\n</script>\n\n<style scoped>\n.salary-selector-section {\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 2rem;\n  margin: 2rem 0;\n  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  animation: fadeIn 0.6s ease-out forwards;\n  perspective: 1000px;\n}\n\n.section-title {\n  color: #2c3e50;\n  font-size: 1.5rem;\n  margin-bottom: 1.5rem;\n  font-weight: 600;\n  text-align: center;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease;\n  background: linear-gradient(135deg, #2c3e50, #3498db);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.section-title:hover {\n  transform: scale(1.02) translateZ(20px);\n}\n\n.salary-selector-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  perspective: 1000px;\n  position: relative;\n}\n\n.salary-selector {\n  display: flex;\n  gap: 1rem;\n  padding: 0.5rem;\n  overflow-x: auto;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(52, 152, 219, 0.5) transparent;\n  transform-style: preserve-3d;\n  max-width: 100%;\n  -webkit-overflow-scrolling: touch;\n  scroll-behavior: smooth;\n}\n\n.salary-selector::-webkit-scrollbar {\n  height: 6px;\n}\n\n.salary-selector::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n}\n\n.salary-selector::-webkit-scrollbar-thumb {\n  background: rgba(52, 152, 219, 0.5);\n  border-radius: 3px;\n  transition: background 0.3s ease;\n}\n\n.salary-selector::-webkit-scrollbar-thumb:hover {\n  background: rgba(52, 152, 219, 0.7);\n}\n\n.salary-option {\n  padding: 0.75rem 1.5rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  border-radius: 12px;\n  cursor: pointer;\n  white-space: nowrap;\n  font-weight: 500;\n  color: #2c3e50;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  transform-style: preserve-3d;\n  transform: translateZ(0);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n  min-width: 120px;\n  text-align: center;\n}\n\n.salary-option::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    120deg,\n    transparent,\n    rgba(255, 255, 255, 0.3),\n    transparent\n  );\n  transition: 0.5s;\n}\n\n.salary-option:hover {\n  transform: translateY(-2px) translateZ(20px) rotateX(5deg);\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);\n}\n\n.salary-option:hover::before {\n  left: 100%;\n}\n\n.salary-option.active {\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\n  color: white;\n  transform: translateY(-2px) translateZ(30px);\n  box-shadow: 0 8px 20px rgba(39, 174, 96, 0.4);\n  border: none;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Touch Device Optimizations */\n@media (hover: none) {\n  .salary-option:hover {\n    transform: none;\n  }\n  \n  .salary-option:active {\n    transform: translateY(-2px) translateZ(10px) rotateX(2deg);\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .salary-option,\n  .salary-option::before,\n  .section-title {\n    transition: none;\n    transform: none !important;\n  }\n  \n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n}\n\n/* High Contrast Mode */\n@media (forced-colors: active) {\n  .salary-option {\n    border: 2px solid CanvasText;\n  }\n  \n  .salary-option.active {\n    border: 2px solid CanvasText;\n  }\n}\n</style>\n","import script from \"./SalaryRateSelector.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalaryRateSelector.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SalaryRateSelector.vue?vue&type=style&index=0&id=fad92c84&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fad92c84\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=17bc7a59\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=17bc7a59&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["badgeConfig","title","icon","tier","explanation","presetMatch","conditions","b","Math","abs","surplus","totalSpending","totalRevenue","budgetItems","healthcare","childrenAndFamilies","environmentAndClimateChange","taxExpenditures","deferrals","adjustmentPercent","corporateTaxExpenditures","education","conditionsType","supportForSeniors","indigenousServices","indigenousOps","revenueMix","corporateTax","personalIncomeTaxCredits","personalIncomeTax","gst","research","digitalGovernment","infrastructure","carbonTax","defense","Object","values","every","v","BUDGET_STORE_OVERRIDE","Symbol","useBudgetSimulatorStore","override","inject","realUseBudgetSimulatorStore","badgeErrorMessage","ref","sensitivityMultiplier","applySensitivity","budget","multiplier","fromEntries","entries","map","key","value","getBudgetBadges","activePreset","maxBadges","hash","JSON","stringify","window","_badgeCache","result","console","log","length","sensitiveBudget","regularBadges","filter","conditionStr","toString","includes","Array","isArray","results","condition","err","handleError","msg","some","r","error","priority","presetBadges","forEach","presetBadge","rb","push","presetMatchBadges","matches","sortedPresetMatches","sort","a","indexOf","otherBadges","sortedOtherBadges","combined","slice","sortedRegularBadges","getTranslatedName","categoryId","categoryType","getCategoryName","CHANGE_TYPES","REVENUE","SPENDING","TAX_EXPENDITURE","PRESET","RESET","AUTO_BALANCE","CHANGE_CATEGORIES","INCOME_TAXES","CONSUMPTION_TAXES","OTHER_REVENUE","MAIN_SPENDING","LOANS_INVESTMENTS","GOVERNMENT_OPS","TAX_CREDITS","SYSTEM_ACTIONS","REVENUE_CATEGORY_MAP","corporateIncomeTax","exciseTaxes","carbonPricing","customsDuties","eiPremiums","crownProfits","resourceRoyalties","nonTaxRevenue","SPENDING_CATEGORY_MAP","seniors","childrenFamilies","employmentInsurance","defensePublicSafety","studentLoans","agricultureLoans","internationalDevelopment","businessInnovation","defenseSector","economicDevelopment","transportationInfrastructure","environmentalPrograms","publicSafetyEmergency","governmentBuildings","researchInnovation","federalEmployeeSalaries","legalJusticeSystem","indigenousServicesOps","culturalHeritage","scientificResearch","diplomaticRepresentation","ChangeRecord","constructor","type","category","itemId","itemName","oldValue","newValue","description","dollarImpact","this","id","Date","now","random","substr","amount","timestamp","generateDescription","changeDirection","toFixed","getDisplayAmount","undefined","getChangeIcon","val","getChangeColor","devLog","message","args","process","devWarn","budgetErrorMessage","defineStore","state","isBatchUpdateInProgress","stateVersion","_reactiveUpdates","_batchUpdateDepth","_pendingUpdates","Set","_computedCache","Map","_cacheVersion","isUpdating","isCalculating","isSaving","isLoading","sentimentUpdateRequired","badges","lastBadgeUpdate","lastSentimentUpdate","autoBalanceActive","simpleAutoBalanceActive","autoBalanceConfig","revenueToSpendingRatio","minSpendingFactor","maxSpendingFactor","prioritizePIT","_isRecalculating","revenueSources","name","rate","base","adjustedAmount","rateByYear","minRate","maxRate","note","linkedExpenditures","expenditureImpact","color","spendingCategories","baseAmount","adjustmentFactor","loansInvestments","isGroup","isExpanded","children","governmentOperations","fixedCosts","debtServicing","personalTaxCredits","netAmount","interactionFactor","minAdjustment","maxAdjustment","linkedRevenueSource","tooltip","gstExpenditures","taxDeferrals","budgetGoals","enabled","revenueTarget","deficitTarget","goalStatus","revenue","status","text","deficit","currentYear","lastSpendingUpdate","lastTaxExpenditureUpdate","lastRevenueSourceUpdate","lastUpdate","expandedGroups","incomeTaxes","consumptionTaxes","otherRevenues","mainCategories","otherCategories","fiscalIndicators","gdp","debt","_debouncedRecalculate","_lastRecalculationTime","changeHistory","changeHistoryVersion","maxChangeHistorySize","getters","formattedFiscalYear","availableFiscalYears","keys","year","parseInt","label","currentDebt","baseDebt","debtToGdpRatio","budgetData","cacheKey","has","get","budgetDataForBadges","set","markRaw","e","fallback","personalIncomeTaxAmount","corporateIncomeTaxAmount","gstAmount","carbonPricingAmount","exciseTaxesAmount","eiPremiumsAmount","customsDutiesAmount","crownProfitsAmount","nonTaxRevenueAmount","resourceRoyaltiesAmount","baselineRevenue","defaultRates","reduce","total","source","additionalRevenue","incomeTaxTotal","Number","consumptionTaxTotal","otherRevenueTotal","mainCategoriesSpending","mains","cat","loansInvestmentsSpending","governmentOperationsSpending","otherCategoriesTotal","fixedCostsTotal","cost","revenueGoalStatus","targetRevenue","deficitGoalStatus","targetDeficit","isGroupExpanded","groupId","group","find","getGroupChildren","getGroupTotal","child","getGroupBaseTotal","getGroupFactor","totalAmount","sum","weightedFactor","hst","hstAmount","scienceAndInnovation","agriculture","culturalPrograms","transit","indigenousOperations","revenueKeyCount","expenditureKeyCount","spendingCategoryKeyCount","earnedBadges","optimizedRevenueSources","actions","setSentimentUpdateRequired","clearSentimentDirty","triggerSentimentUpdate","beginBatchUpdate","warn","clear","completeBatchUpdate","recalculateTotals","syncToLocalStorage","initializeStore","loadFromLocalStorage","initialRevenueSources","sourceId","initialExpenditures","expId","exp","adjustment","baseAdjustment","revenueImpact","updateRevenueSourceAdjustedAmount","debounce","_performRecalculation","storedData","localStorage","getItem","parsedData","parse","setCurrentYear","updatedSources","toggleGroupExpansion","setRevenueRate","newRate","clampedRate","max","min","oldRate","diff","threshold","isBatchMode","updatedSource","trackRevenueChange","debouncedSyncToLocalStorage","updateRevenueRate","currentRate","add","debouncedUpdateRevenueRate","clearCache","updateSpendingFactor","factor","found","oldFactor","c","trackSpendingChange","updateGroupSpendingFactor","updateBudgetGoals","goals","updateGoalStatus","statusData","revenueGoal","currentRevenue","revenueStatus","deficitGoal","currentDeficit","deficitStatus","autoBalanceBudget","prioritySourceIds","adjustableSources","remainingDeficit","adjustedSources","maxPossibleRevenue","additionalRevenuePotential","rateIncrease","aPotential","bPotential","deficitToCover","join","trackAutoBalance","toggleAutoBalance","active","goalsEnabled","feedback","autoBalanceBudgetForGoal","toggleSimpleAutoBalance","success","achieved","deficitGap","revenueGap","revenueAdjustmentNeeded","deficitAdjustmentNeeded","adjustmentNeeded","mainRevenueSources","adjustRevenueProportionally","finalRevenue","finalDeficit","revenueThreshold","thresholdAchieved","totalAdjustment","changes","actualAdjustment","remainingAdjustment","pitSource","item","pitBase","pitMax","pitMin","targetPitAdjustment","rateChange","actualPitAdjustment","amountChange","otherSources","totalBase","share","targetAdjustment","achievementRatio","adjustSpendingProportionally","adjustableCategories","totalBaseAmount","factorChange","newFactor","resetBudget","trackBudgetReset","wasAutoBalanceActive","sources","expectedTotal","resetSources","resetCategories","catId","resetChildren","childId","cppPremiums","actualTotal","finalTotal","correction","budgetPersistence","save","autoSaveState","stateToSave","autoSave","initializeBudget","savedState","load","restoreFromSavedState","initializeWithDefaults","getDefaultRate","updateTaxExpenditureAdjustment","wrapStoreAction","expenditureId","expenditure","numAdjustment","clampedAdjustment","oldAdjustment","isNaN","trackTaxExpenditureChange","budgetValidationSchemas","taxExpenditureAdjustment","updateLinkedRevenueSource","revSourceId","totalImpact","impact","sourceAmount","updateRevenueSourceAmount","newAmount","numAmount","baseValue","revenueSourceAmount","updateRevenueSourceRate","resetTaxExpenditures","resetExpenditures","updateBadges","presetKey","$patch","currentSurplus","addBudgetChange","changeHistoryLength","existingIndex","findIndex","removedId","removedType","removedItemId","splice","change","hasGetDisplayAmount","unshift","newHistoryLength","newHistoryVersion","rateDiff","willTrack","sourceName","categoryName","newAdjustment","adjDelta","trackPresetApplication","presetLabel","clearChangeHistory","getChangesByCategory","totalChanges","historyVersion","grouped","categories","categoryCounts","count","getRecentChanges","getChangesByType","getChangesSummary","revenueChanges","spendingChanges","taxExpenditureChanges","totalRevenueChange","totalSpendingChange","totalTaxExpenditureChange","changeCount","lastChange","parseSharedBudgetParams","query","getValue","URLSearchParams","hasKey","getEntries","from","startsWith","substring","split","Boolean","parseSegments","prefix","i","score","positiveSegments","negativeSegments","partyId","partyColor","highlights","alert","async","applySharedBudgetToStore","sharedData","budgetStore","salaryOptions","periodMultiplier","taxCredits2024","basicPersonalAmount","spouseAmount","ageAmount","disabilityAmount","caregiverAmount","pensionIncomeAmount","employmentAmount","homeBuyersAmount","digitalNewsSubscriptionMax","volunteerFirefightersAmount","adoptionExpensesMax","medicalExpensesThreshold","charitableDonationsThreshold","charitableDonationsHighIncomeThreshold","taxCredits2025","regions","federalBasicPersonalAmount2022","federalBasicPersonalAmount2023","federalBasicPersonalAmount2024","federalBasicPersonalAmount2025","provincialBasicPersonalAmounts2022","provincialBasicPersonalAmounts2023","provincialBasicPersonalAmounts2024","provincialBasicPersonalAmounts2025","federalTaxBrackets2022","upTo","Infinity","federalTaxBrackets2023","federalTaxBrackets2024","federalTaxBrackets2025","provincialTaxBrackets2022","provincialTaxBrackets2023","provincialTaxBrackets2024","provincialTaxBrackets2025","budgetCategories2022","budgetCategories2024","useSalaryStore","selectedSalaryRate","selectSalaryRate","createValidatedAction","salaryRate","computed","option","so","useYearStore","taxYears","selectedTaxYear","budgetYear","setSelectedTaxYear","class","href","target","rel","_createBlock","_component_ErrorBoundary","default","_withCtx","_createElementVNode","_hoisted_1","_ctx","$route","path","_component_router_view","_createCommentVNode","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","src","$setup","logoUrl","alt","t","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_createVNode","_component_router_link","to","_createTextVNode","_","_hoisted_9","role","_Fragment","_renderList","locales","lng","code","_normalizeClass","currentLocale","onClick","$event","setLocale","labelKey","_hoisted_11","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","yearStore","_hoisted_17","_hoisted_18","yearSelectorNote","_component_SalaryRateSelector","_component_Tabs","variant","items","tabItems","modelValue","activeTab","_cache","currentTab","getPanelProps","_mergeProps","_hoisted_19","_component_CalculatorView","_component_ResultView","_hoisted_20","_hoisted_21","_component_FederalBudgetView","_hoisted_22","_hoisted_23","toggleBudgetCategories","showBudgetCategories","_Transition","_hoisted_24","_hoisted_25","_component_BudgetCategoriesView","_hoisted_26","_hoisted_27","toggleFAQs","showFAQs","_hoisted_28","_component_FAQSection","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_imports_0","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","getFullYear","_hoisted_50","props","__props","errorTimestamp","showDetails","provide","reportError","toISOString","onErrorCaptured","instance","info","componentName","setTimeout","location","reload","resetError","component","userAgent","navigator","url","__exports__","emit","__emit","instanceId","tabRefs","normalizedItems","panelId","getFallbackId","setActive","emitChange","nextId","changed","watch","hasActive","immediate","deep","onBeforeUpdate","classes","getTabId","getPanelId","match","tabindex","focusTab","index","el","focus","selectByIndex","onKeydown","event","isHorizontal","orientation","prevKey","nextKey","preventDefault","nextIndex","prevIndex","onClickTab","setTabRef","slotBinding","salaryStore","storeToRefs","useI18n","optionKeyMap","Annual","Monthly","Weekly","Daily","Hourly","localizedSalaryOptions","salaryOptionsRaw","toLowerCase","CalculatorView","defineAsyncComponent","loader","loadingComponent","template","errorComponent","delay","timeout","ResultView","FederalBudgetView","BudgetCategoriesView","FAQSection","components","Tabs","SalaryRateSelector","ErrorBoundary","setup","locale","setItem","URL","handleExternalTabNavigate","requestedTab","detail","tab","onMounted","addEventListener","onBeforeUnmount","removeEventListener","render"],"sourceRoot":""}